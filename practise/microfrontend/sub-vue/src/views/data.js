const resp = {
  "success": true,
  "data": [
    {
      "id": "6100f54de3e67140e158fe63",
      "author_id": "4efc278625fa69ac6900038f",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><h2>æ´»åŠ¨ä»‹ç»</h2>\n<p>æ´»åŠ¨å®˜æ–¹ç½‘ç«™ï¼š<a href=\"https://subway.midwayjs.org/\">https://subway.midwayjs.org/</a>\nç¬¬åäºŒå±Š Node åœ°ä¸‹é“å°†äº 2021 å¹´ 8 æœˆ 8 æ—¥åœ¨åŒ—äº¬çº¿ä¸‹ä¸¾è¡Œï¼Œæˆ‘ä»¬é‚€è¯·äº†ä¸šç•Œ 4 ä½æœ‰å®è·µå’Œè½åœ°ç»éªŒçš„åŒå­¦ç»™å¤§å®¶åˆ†äº«ç›¸å…³è¯é¢˜ï¼Œæ¬¢è¿å„ä½æŠ¥åã€‚</p>\n<p>PC æŠ¥ååœ°å€ï¼š<a href=\"https://www.huodongxing.com/event/6608502975800\">https://www.huodongxing.com/event/6608502975800</a></p>\n<h2>æ—¶é—´åœ°ç‚¹</h2>\n<p>æ²™é¾™æ—¶é—´ï¼š2021 å¹´ 8 æœˆ 8 æ—¥ï¼ˆå‘¨æ—¥ï¼‰\næ²™é¾™åœ°ç‚¹ï¼šåŒ—äº¬Â·èæ–°ç§‘æŠ€ä¸­å¿ƒBåº§ï¼ˆåˆ›è¿œè·¯34å·é™¢5å·æ¥¼ï¼‰\né¢å‘äººç¾¤ï¼šNode.js å¼€å‘è€…</p>\n<h2>æ—¥ç¨‹å®‰æ’</h2>\n<p>13ï¼š00-13ï¼š30   æ´»åŠ¨ç­¾åˆ°\n13ï¼š30-13ï¼š40   å¼€åœº\n13ï¼š40-14ï¼š20   æœä½³æ˜†ï¼šã€Šäº‘åŸç”Ÿæ—¶ä»£çš„ Alinodeã€‹\n14ï¼š20-15ï¼š00   ææ´‹æ´‹ï¼šã€ŠNode.js / NestJS åœ¨ Authing æ¶æ„ä¸­çš„æ¼”è¿›å’Œå·¥ç¨‹å®è·µã€‹\n15ï¼š00-15ï¼š10   é—´ä¼‘\n15ï¼š10-15ï¼š50   ç‹ä¸œï¼šã€ŠåŸºäº Node.js çš„ç‰©è”ç½‘å¹³å°åº”ç”¨å±‚å®è·µã€‹\n15ï¼š50-16ï¼š30   è´¾å»ºå®¹ï¼šã€Šé«˜å¾· Node.js Serverlessä½“ç³»åŒ–å»ºè®¾ä¹‹è·¯ã€‹\n16ï¼š30-16ï¼š35   åŒ—äº¬ Node.js åœ†æ¡Œè®¨è®º + æŠ½å¥–\n17ï¼š00   åˆç…§ &amp; ç»“æŸ</p>\n<h2>æ´»åŠ¨æµ·æŠ¥</h2>\n<p><img src=\"//static.cnodejs.org/FqcUo5fO-xn3tjHs4KUdOjYfkzkH\" alt=\"ç¬¬åäºŒå±Šåœ°ä¸‹é“æµ·æŠ¥.jpg\"></p>\n<h2>æ¸©é¦¨æç¤º</h2>\n<p>1ã€æœ¬æ¬¡æ´»åŠ¨å…è´¹ã€‚\n2ã€æŠ¥åçš„æœ‹å‹ä»¬å¦‚æœæä¾›çš„emailå’Œæ‰‹æœºå·ç æ— è¯¯ï¼Œæˆ‘ä»¬ä¼šåœ¨æ´»åŠ¨å¼€å§‹å‰ä¸€å¤©å‘é€çŸ­ä¿¡å’Œé‚®ä»¶ç¡®è®¤ã€‚æ‰€ä»¥è¯·ç¡®è®¤è‡ªå·±å¡«å†™çš„emailåœ°å€æ— è¯¯ã€‚\n3ã€æœ¬æ´»åŠ¨æ¬¢è¿å¤§å®¶å¸¦è‡ªå·±çš„åŒäº‹å’Œæœ‹å‹ä¸€èµ·å‚åŠ ï¼Œä¸è¿‡ä¸ºäº†ç¡®ä¿è‰¯å¥½çš„å¬è¯¾ç¯å¢ƒï¼Œè¯·å°½å¯èƒ½æå‰ä¸ºä»–ä»¬æŠ¥åã€‚</p>\n</div>",
      "title": "2021å¹´8 æœˆ8 æ—¥ ç¬¬åäºŒå±Š Node åœ°ä¸‹é“åŒ—äº¬ä¸“åœºæ¥å•¦ï¼Œå¼€å¯æŠ¥åä¸­",
      "last_reply_at": "2021-08-02T03:55:51.564Z",
      "good": false,
      "top": true,
      "reply_count": 7,
      "visit_count": 1213,
      "create_at": "2021-07-28T06:12:29.276Z",
      "author": {
        "loginname": "czy88840616",
        "avatar_url": "//gravatar.com/avatar/c4e414b7264b513a00bbd8ec3e9a0d66?s=48"
      }
    },
    {
      "id": "601e668a03d797cf5b66f437",
      "author_id": "54009f5ccd66f2eb37190485",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><h2>PPTåœ°å€</h2>\n<p><a href=\"https://github.com/midwayjs/subway-station/tree/master/No.10.HangZhou.Let%E2%80%99s%20imagine%202021\">https://github.com/midwayjs/subway-station/tree/master/No.10.HangZhou.Letâ€™s imagine 2021</a>!</p>\n<h2>å–œæ¬¢çš„è‡ªå–</h2>\n<p>æœ¬æ¬¡é‡‡ç”¨çº¿ä¸Šç›´æ’­æ–¹å¼ï¼Œä¼šä½¿ç”¨é˜¿é‡Œçš„ä¼šè®®å®¤ï¼Œæ­¤æ¬¡Node Partyä½¿ç”¨Nodeåœ°ä¸‹é“å“ç‰Œã€‚ä¼šåœ¨è§†é¢‘å·ï¼šAlibabaF2Eå’ŒBilibiliï¼šæ”¯ä»˜å®ä½“éªŒç§‘æŠ€åŒæ—¶ç›´æ’­ã€‚</p>\n<p>å¤§å®¶æœ‰å•¥æƒ³æ³•å¯ä»¥éšæ—¶è¡¥å……ã€‚</p>\n<h2>ä¸»é¢˜åˆ†äº«</h2>\n<h3>1ã€ã€ŠåŸºäº Addon çš„ Node.js æ€§èƒ½ç›‘æ§ä¸çº¿ä¸Šæ•…éšœå®šä½è§£å†³æ–¹æ¡ˆã€‹</h3>\n<p>é€‰é¢˜ç†ç”±ï¼š<strong>å¦‚æœè¯´2020å›½å†…Node.jsç¤¾åŒºæœ€å¤§çš„äº‹ä»¶ï¼Œæˆ‘ä»¥ä¸ºæ˜¯ Easy-Monitor 3.0 ç‰ˆæœ¬å¼€æºäº†ï¼Œå®ƒæ˜¯ä¸€æ¬¾Node.js åº”ç”¨æ€§èƒ½ç›‘æ§ä¸çº¿ä¸Šæ•…éšœå®šä½è§£å†³æ–¹æ¡ˆã€‚</strong></p>\n<p>Topicç®€ä»‹ï¼šæ—¨åœ¨ Node.js çš„å¼€æºç”Ÿæ€å·¥å…·é“¾ä¸Šï¼Œåšä¸€äº›èƒ½å¸®åŠ©åˆ°æƒ³ä½¿ç”¨å’Œæ­£åœ¨ä½¿ç”¨ Node.js çš„å¼€å‘è€…æ›´å¥½åœ°æ„ŸçŸ¥è‡ªå·±çš„ Node.js åº”ç”¨çŠ¶æ€ï¼Œä»¥æ›´å¥½åœ°é¢å¯¹æ¥è‡ªæ€§èƒ½å’Œç¨³å®šæ€§æ–¹é¢çš„æŒ‘æˆ˜ã€‚</p>\n<p>ä¸ªäººç®€ä»‹ï¼š<a href=\"https://github.com/hyj1991/\">hyj1991</a>ï¼Œå¼€æº Node.js æ€§èƒ½ç›‘æ§å·¥å…· <a href=\"https://github.com/hyj1991/easy-monitor\">Easy-Monitor</a> ä½œè€…ï¼Œå‚ä¸äº†å¼€æºæ¡†æ¶ Egg.js çš„ç»´æŠ¤ï¼Œä»¥å‰ AliNode çš„æ ¸å¿ƒå¼€å‘è€…ä¹‹ä¸€ï¼Œå‰ç«¯æ¶æ„å¸ˆï¼Œç›®å‰åœ¨ç¤¾åŒºä¸€ç›´è‡´åŠ›äº Node.js åŸºç¡€ä¿éšœæ€§è´¨å·¥å…·é“¾çš„è¿›ä¸€æ­¥å®Œå–„ã€‚</p>\n<p><img src=\"//static.cnodejs.org/Fkm3ogNc8lbsjFMQatCF54qgyUul\" alt=\"16126047795218.jpg\"></p>\n<h3>2ã€ã€ŠMidway Hooks â€” æ›´å…·ç”Ÿäº§åŠ›çš„å…¨æ ˆæ¡†æ¶ï¼šå…¨æ ˆã€â€œé›¶â€ APIã€Hooks å¼€å‘åç«¯ã€‹</h3>\n<p>é€‰é¢˜ç†ç”±ï¼š<strong>Midway Hooksæ˜¯ç¤¾åŒºWebæ–¹å‘æ¯”è¾ƒæœ‰æ–°æ„çš„é¡¹ç›®ï¼Œé¢å‘FaaSè®©å¼€å‘æ›´ç®€å•ï¼Œé¢å‘Reactå¼€å‘è€…ï¼Œè®©åŒæ„å…¨æ ˆæ›´ç®€å•ã€‚</strong></p>\n<p>ç®€ä»‹ï¼š<a href=\"https://github.com/midwayjs/hooks\">Midway Hooks</a> æ˜¯ä¸ºå‰ç«¯å¼€å‘è€…æ‰“é€ çš„å…¨æ ˆæ¡†æ¶ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼šâ˜ï¸ å…¨æ ˆï¼Œåœ¨ src ç›®å½•ä¸­å¼€å‘å‰åç«¯ä»£ç ã€ğŸŒˆ â€œé›¶â€APIï¼Œæå…¶ç®€å•çš„åç«¯ Api å¼€å‘ä¸è°ƒç”¨æ–¹å¼ã€ğŸŒ ä½¿ç”¨ â€œReact Hooksâ€ å¼€å‘åç«¯ã€‚æœ¬æ¬¡åˆ†äº«åˆ™å°†ä¸ºå¤§å®¶ä»‹ç» Midway Hooks çš„ç”¨æ³•ã€è®¾è®¡ç†å¿µä»¥åŠèƒŒåçš„æŠ€æœ¯åŸç†ã€‚</p>\n<p>ä¸ªäººç®€ä»‹ï¼šåˆ˜å­å¥ï¼ˆèŠ±åç¹æ˜“ï¼ŒLxxyxï¼šNode.jsï¼‰ï¼Œæ·˜ç³»æŠ€æœ¯éƒ¨-å‰ç«¯æ¶æ„å›¢é˜Ÿæˆå‘˜ã€‚å¼€æºçˆ±å¥½è€…ï¼ŒNode.js Core Collaboratorï¼Œç›®å‰è‡´åŠ›äºæ‰“é€ æ›´å…·ç”Ÿäº§åŠ›çš„å…¨æ ˆæ¡†æ¶ï¼šMidway Hooksã€‚</p>\n<p><img src=\"//static.cnodejs.org/FsqpQzPYFIz0xzXGGIwf5CxjFSML\" alt=\"16126048815842.jpg\"></p>\n<h3>3ã€ã€Šæ¯”Webpack5å¿«4å€çš„AirpackCDN â€” æ–°ä¸€ä»£ç»„ä»¶åˆ†å‘ç½‘ç»œæ„å»ºä¹‹è·¯ã€‹</h3>\n<p>é€‰é¢˜ç†ç”±ï¼š<strong>Denoå¸¦åŠ¨äº†http importçš„å‘å±•ï¼ŒåŒæ—¶ä¹Ÿä½¿å¾—ç¤¾åŒºä»Commonjsåˆ°ESMçš„è¶‹åŠ¿æ—¥æ¸æ˜æ˜¾ï¼Œè¿™å°±ä¿ƒä½¿ç¤¾åŒºä¼šå‡ºç°æ–°ä¸€ä»£CDNæŠ€æœ¯çš„è¯ç”Ÿã€‚</strong></p>\n<p>Topicç®€ä»‹ï¼šAirpackCDN æ˜¯é€‚ç”¨äºç°ä»£ Web åº”ç”¨ç¨‹åºçš„ç»„ä»¶åˆ†å‘ç½‘ç»œ (Components Delivery Network for modern web apps)ï¼Œæ˜¯é›†å›¢å†…ç¬¬ä¸€ä¸ªä¸ºç°ä»£ JavaScript åº”ç”¨ç¨‹åºè®¾è®¡å’Œä¼˜åŒ–çš„ CDNï¼ˆæ³¨ï¼šè¿˜æœªå¼€æºï¼Œç­¹å¤‡ä¸­ï¼‰ã€‚é€šè¿‡ Airpack ç½‘ç»œçš„åˆ†å‘çš„ç»„ä»¶å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œä¸”é’ˆå¯¹æµè§ˆå™¨åšäº†å¤§é‡ä¼˜åŒ–ï¼Œå‡ ä¹æ‰€æœ‰è½¯ä»¶åŒ…éƒ½å¯ä»¥ä»¥ ES Module çš„æ ¼å¼å¯¹å¤–è¾“å‡ºï¼Œæˆ‘ä»¬è‡´åŠ›äºæ„å»ºä¸€ä¸ªå¯ä»¥ä¾èµ–çš„æ ¸å¿ƒåŸºç¡€è®¾æ–½ã€‚</p>\n<p>ä½œè€…ç®€ä»‹ï¼šèµµå‰å½¤ï¼ˆèŠ±åï¼šç‰§æ›ˆï¼‰ï¼Œé˜¿é‡Œäº‘ä½“éªŒæŠ€æœ¯å›¢é˜Ÿå‰ç«¯å·¥ç¨‹å¸ˆï¼Œä¸»æ”»å‰ç«¯ä¸­åå°ã€å·¥ç¨‹åŒ–æ–¹å‘ï¼Œå¼€æºçˆ±å¥½è€…ï¼Œèµ„æ·±æå®¢ã€‚</p>\n<p><img src=\"//static.cnodejs.org/FjDKce673wxx97YeqhT62wpx94oO\" alt=\"16125037643179.jpg\"></p>\n<h3>4ã€ã€ŠiMoveâ€”è‡´åŠ›äºæé«˜å¼€å‘æ•ˆç‡çš„jsæ¡†æ¶ï¼šå¼€å¯å¯è§†åŒ–ç¼–æ’çš„æ–°å‹å¼€å‘æ¨¡å¼ã€‹</h3>\n<p>é€‰é¢˜ç†ç”±ï¼š<strong>å‰ç«¯æ™ºèƒ½åŒ–è§£å†³äº†è®¾è®¡ç¨¿åˆ°ä»£ç çš„UIæ¸²æŸ“éƒ¨åˆ†ï¼Œä½†é€»è¾‘ä»£ç å¦‚ä½•ç”Ÿæˆä¾ç„¶æ˜¯ä¸€ä¸ªéš¾é¢˜ã€‚iMoveç®—ä¸€ä¸ªä¸é”™çš„æ¢ç´¢</strong></p>\n<p>Topicç®€ä»‹ï¼š<a href=\"https://github.com/imgcook/imove\">iMove</a>æ˜¯ä¸ºå¼€å‘è€…æ‰“é€ çš„æ”¯æŒå¯è§†åŒ–ç¼–æ’çš„jsæ¡†æ¶ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼šğŸ”¥é€»è¾‘å¯ç»„è£…ï¼šæ¥å£å’ŒUIåœ¨æœ€å°ç²’åº¦ä¸Šçš„å¤ç”¨ï¼›â˜ï¸æµç¨‹å¯è§†åŒ–ï¼šæœ€å°å•å…ƒé€šè¿‡æµç¨‹å›¾è¿›è¡Œç¼–æ’ï¼›ğŸŒˆ é€»è¾‘å¤ç”¨ï¼šå°†é€»è¾‘è¿›è¡Œæ²‰æ·€ï¼Œå˜æˆå¯å¤ç”¨çš„èƒ½åŠ›ï¼›ğŸŒ²è¿è¥é…ç½®æ”¶æ•›ï¼šé™ä½è¿è¥æ“ä½œæˆæœ¬ã€‚æœ¬æ¬¡åˆ†äº«åˆ™å°†ä¸ºå¤§å®¶ä»‹ç» iMove çš„ä½¿ç”¨æ–¹æ³•ã€åº•å±‚åŸç†ã€è®¾è®¡æ€æƒ³ï¼Œä»¥åŠæ­¤æ¡†æ¶æ˜¯å¦‚ä½•è§£å†³ä½ä»£ç å¼€å‘ä¸­çš„ç—›ç‚¹é—®é¢˜çš„ã€‚</p>\n<p>ä¸ªäººç®€ä»‹ï¼šæ¨ä½©ï¼ˆèŠ±åå†·å‰ï¼‰ï¼Œé˜¿é‡Œæ·˜ç³»æŠ€æœ¯éƒ¨f(x) teamå›¢é˜Ÿæˆå‘˜ï¼ŒiMoveæ ¸å¿ƒæˆå‘˜ï¼Œå¼€æºçˆ±å¥½è€…ã€‚ç›®å‰è‡´åŠ›äºæ‰“é€ ç”¨äºæé«˜å¼€å‘æ•ˆç‡çš„æ–°ä¸€ä»£æ™ºèƒ½åŒ–åŸºå»ºã€‚</p>\n<p><img src=\"//static.cnodejs.org/FjXLoj0EpAmLhgACJK5Sw5OuJUMD\" alt=\"16126049650090.jpg\"></p>\n<h3>5ã€ã€ŠSSR framework 2.0 -åŒæ—¶æ”¯æŒReact, Vue çš„æœåŠ¡ç«¯æ¸²æŸ“èƒ½åŠ›ã€‹</h3>\n<p>é€‰é¢˜ç†ç”±ï¼š<strong>ä»egg-react-ssråˆ°ykfe/ssræ˜¯ä¸€ä¸ªä¸é”™çš„æ¼”è¿›ï¼ŒServerless-side renderæ¦‚å¿µä¹Ÿæ…¢æ…¢è¢«å¤§å®¶æ¥å—ï¼Œ2020å¹´æ·˜å®åŒåä¸€ä½¿ç”¨äº†ssrï¼Œæ‹¼å¤šå¤šçš„é¡µé¢æ¸²æŸ“ä¹Ÿä½¿ç”¨äº†ssrï¼Œå¯è§ssræ˜¯ä¸€ä¸ªä¸å¯ç¼ºå°‘çš„Webåº”ç”¨æŠ€æœ¯ã€‚</strong></p>\n<p>Topicç®€ä»‹ï¼š<a href=\"https://github.com/ykfe/ssr\">SSR framework 2.0</a>é›†æˆè‡ªykfe/ssr 1.0ï¼ŒåŒæ—¶æ”¯æŒReact, Vue çš„æœåŠ¡ç«¯æ¸²æŸ“èƒ½åŠ›ï¼Œä»¥æ’ä»¶åŒ–çš„å½¢å¼æ”¯æŒä»»æ„æœåŠ¡ç«¯æ¡†æ¶ä¸å‰ç«¯æ¡†æ¶çš„ç»“åˆï¼ŒåŒæ—¶æ”¯æŒServerlessæ–¹å¼æˆ–ä¼ ç»ŸNode.jsåº”ç”¨æ–¹å¼éƒ¨ç½².</p>\n<p>ä¸ªäººç®€ä»‹ï¼šå¼ å®‡æ˜‚ï¼Œå¾®ä¿¡å‰ç«¯å·¥ç¨‹å¸ˆï¼Œå‰é˜¿é‡Œå·´å·´å‰ç«¯å·¥ç¨‹å¸ˆï¼Œä¸“æ³¨äº Node.js ä¸å‰ç«¯çš„ç»“åˆåœ¨ä¼ä¸šçš„å®è·µè½åœ°ï¼Œykfe/ssræ¡†æ¶æ ¸å¿ƒå¼€å‘è€…, ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·Viteçˆ±å¥½è€…å’ŒRust çˆ±å¥½è€…ã€‚</p>\n<p><img src=\"//static.cnodejs.org/FjnIQLlOsfUyoaFmt7_vbWrVWVmi\" alt=\"image.png\"></p>\n<h2>å¤§ä½¬åœ†æ¡Œä¼š</h2>\n<p>å¾…å®šï¼šæœ¬æ¬¡çº¿ä¸‹åœ¨æ­å·ï¼Œå¤§æœã€æµå¸ã€é›·å§†ã€æ­»æœˆ</p>\n<p>è¿˜æ²¡æœ‰æ²Ÿé€šå®Œæˆ</p>\n<h2>ç›´æ’­ä¿¡æ¯</h2>\n<ul>\n<li>æ—¶é—´ï¼š2021å¹´3æœˆ6æ—¥ï¼Œä¸‹åˆ2ç‚¹-6ç‚¹</li>\n<li>Obsæ¨æµ</li>\n</ul>\n<h3>1ï¼‰å¾®ä¿¡è§†é¢‘å·ï¼šAlibabaF2E</h3>\n<p><img src=\"//static.cnodejs.org/FtM_sWKCWUbmiXTx36xP0dv50n7E\" alt=\"image.png\"></p>\n<h3>2ï¼‰Bilibiliï¼šæ”¯ä»˜å®ä½“éªŒç§‘æŠ€</h3>\n<p><img src=\"//static.cnodejs.org/FnaquwPttUJx7haOT51yjR8kekzP\" alt=\"image.png\"></p>\n<h2>æ´»åŠ¨å®‰æ’</h2>\n<p>ç¨åç»™å‡º</p>\n<h2>æ²Ÿé€šç¾¤</h2>\n<p>å¦‚æœæƒ³å‚åŠ æ´»åŠ¨ï¼Œåé¦ˆæ„è§éƒ½å¯ä»¥åŠ å…¥ä¸‹é¢è¿™ä¸ªé’‰é’‰ç¾¤</p>\n<p><img src=\"//static.cnodejs.org/Ft0nBD73FkFw8CBbceGjo0HW29iu\" alt=\"image.png\"></p>\n</div>",
      "title": "2021å¹´3æœˆ6æ—¥Node Party PPT",
      "last_reply_at": "2021-08-01T09:03:41.916Z",
      "good": false,
      "top": true,
      "reply_count": 31,
      "visit_count": 80004,
      "create_at": "2021-02-06T09:51:06.662Z",
      "author": {
        "loginname": "i5ting",
        "avatar_url": "https://avatars.githubusercontent.com/u/3118295?v=4&s=120"
      }
    },
    {
      "id": "5fdb44d70f99cb37f45e3410",
      "author_id": "56f3686f02c237a73a1a8acf",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>RT.</p>\n<p>è¯·å¤§å®¶éµå®ˆæ³•å¾‹æ³•è§„ï¼Œå‹¿å‘å¸ƒä¸åˆè§„å†…å®¹ã€‚</p>\n</div>",
      "title": "è¯·å¤§å®¶éµçºªå®ˆæ³•ï¼Œå‹¿å‘å¸ƒä¸åˆè§„å†…å®¹",
      "last_reply_at": "2021-07-30T05:18:11.576Z",
      "good": false,
      "top": true,
      "reply_count": 159,
      "visit_count": 78798,
      "create_at": "2020-12-17T11:45:27.667Z",
      "author": {
        "loginname": "thonatos",
        "avatar_url": "https://avatars.githubusercontent.com/u/958063?v=4&s=120"
      }
    },
    {
      "id": "607ea4374d20cbe2d168d737",
      "author_id": "515005e9604b3d512109bb17",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>äº”æœˆæ˜¯ä¸€ä¸ªå¥½æœˆä»½ï¼Œäº”æœˆçš„æ­¦æ±‰ä¹Ÿå¾ˆæ¼‚äº®ã€‚2020 å¹´ï¼Œç–«æƒ…è‚†è™ï¼Œæˆ‘ä»¬æ— å¥ˆåœæ­¢äº† Node åœ°ä¸‹é“ä¸€æ®µæ—¶é—´ã€‚ä»Šå¹´ 3 æœˆä»½æˆ‘ä»¬é‡å¯äº† Node åœ°ä¸‹é“ï¼›è€Œä»Šå¹´äº”æœˆï¼Œæˆ‘ä»¬å†³å®šä¸å¤§å®¶ä¸€èµ·å»è§è¯ä¸€ä¸‹æ­¦æ±‰ç„•æ–°çš„æ´»åŠ›ï¼Œåœ¨æ­¦æ±‰ä¸¾åŠä¸€åœºçƒ­å¹²é¢ä¸“åœºï¼ˆç¬¬ 11 æœŸï¼‰ã€‚</p>\n<p>Node åœ°ä¸‹é“æ²™é¾™æ˜¯é˜¿é‡Œå·´å·´æ·˜ç³»å‰ç«¯å‘èµ·çš„ä¸€ä¸ªçº¿ä¸‹æŠ€æœ¯æ²™é¾™ã€‚éå¸¸æ„Ÿè°¢æœ‰èµè”åˆä¸¾åŠæœ¬æœŸæ´»åŠ¨ã€‚</p>\n<h2>æ´»åŠ¨ä¿¡æ¯</h2>\n<ul>\n<li><strong>æœ¬æœŸä¸»é¢˜</strong>ï¼šä»ç¤¾åŒºåˆ°ä¼ä¸šçº§å®è·µ</li>\n<li><strong>æœ¬æœŸå‡ºå“äºº</strong>ï¼šæ­»æœˆï¼›</li>\n<li><strong>ä¸»æŒäºº</strong>ï¼šè‰ºç’‡ï¼›</li>\n<li><strong>åœ†æ¡Œä¸»æŒäºº</strong>ï¼šç‹¼å”ï¼ˆi5tingï¼‰ï¼›</li>\n<li><strong>æ—¶é—´</strong>ï¼š2021 å¹´ 5 æœˆ 23 æ—¥ 13:00 ~ 18:00ï¼›</li>\n<li><strong>åœ°ç‚¹</strong>ï¼šæ­¦æ±‰ä¿åˆ©å›½é™…ä¸­å¿ƒ 35 å±‚ P1-2ã€‚</li>\n</ul>\n<p>æœ¬æœŸæˆ‘ä»¬é‚€è¯·åˆ°äº†æ·˜å®ã€èš‚èšé›†å›¢ã€æœ‰èµã€è…¾è®¯ä»¥åŠ Wiredcraft çš„å°ä¼™ä¼´ï¼Œä¸ºå¤§å®¶çŒ®ä¸Šæ–°çš„ä¸€æœŸ Node.js è¯é¢˜ç››å®´ï¼Œç‚’ä¸€ç‚’æ­¦æ±‰è¿™ä¸ªç¾ä¸½åŸå¸‚çš„ Node.js çƒ­åº¦ã€‚æ´»åŠ¨æœ€åï¼Œè¿˜æœ‰ç¥ç§˜å˜‰å®¾**ç‹¼å”ï¼ˆi5tingï¼‰**ä¸ºå¤§å®¶ä¸»æŒåœ†æ¡Œè®¨è®ºå’ŒæŠ½å¥–ã€‚çœŸçš„è¡€èµšï¼</p>\n<p>æ„Ÿå…´è¶£çš„å°ä¼™ä¼´ä»¬ï¼Œæ— è®ºä½ ä»¬æ˜¯å·²ç»åœ¨èŒå·¥ä½œï¼Œè¿˜æ˜¯å°šåœ¨å­¦æ ¡è¿›ä¿®ï¼Œéƒ½æ¬¢è¿æ¥æŠ¥åå‘€ã€‚Node åœ°ä¸‹é“æŠ¥åå…è´¹ï¼Œåªè¦é€šè¿‡å®¡æ ¸å³å¯æ¥å‚åŠ ã€‚**åé¢æœ‰é™ï¼Œå…ˆåˆ°å…ˆå¾—ã€‚**æœ›å¤§å®¶äº’ç›¸ä¼ é˜…ã€‚</p>\n<blockquote>\n<p>æœ¬æœŸå®˜ç½‘ï¼š<a href=\"https://subway.midwayjs.org/\">https://subway.midwayjs.org/</a></p>\n<p>æŠ¥åé“¾æ¥ï¼š<a href=\"https://www.huodongxing.com/event/7596833409300\">https://www.huodongxing.com/event/7596833409300</a></p>\n</blockquote>\n<h2>è¯é¢˜ä»‹ç»</h2>\n<h3>Node.js åœ¨ TARS å¾®æœåŠ¡æ¡†æ¶ä¸­çš„å®è·µ</h3>\n<p><img src=\"//static.cnodejs.org/FnSk20oDl0RaRhRupa-2jCqK-9Fo\" alt=\"image.png\"></p>\n<blockquote>\n<p>é‚¹æˆå“ @è…¾è®¯ é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ</p>\n</blockquote>\n<p>TARS Node.js æ˜¯å¼€æºå¾®æœåŠ¡æ¡†æ¶ TARS çš„ Node.js è¯­è¨€éƒ¨åˆ†ï¼Œä¸º Node.js æœåŠ¡ç«¯æä¾›äº†ä¸€å¥—å®Œæ•´çš„å¼€å‘è¿ç»´ç¯å¢ƒã€‚åŒ…å«äº†è¿›ç¨‹ç®¡ç†ã€æ—¥å¿—è¾“å‡ºã€è°ƒç”¨ç›‘æ§ã€ç‰¹æ€§ç›‘æ§ã€RPC è°ƒç”¨ã€å¿«é€Ÿæ‰©ç¼©å®¹ç­‰åŠŸèƒ½ï¼Œè®© Node.js å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡ä»£ç ï¼Œå…¶å®ƒäº¤ç»™ TARSã€‚</p>\n<h3>Node.js &amp; Midway.js æºç è´¡çŒ®æŒ‡åŒ—</h3>\n<p><img src=\"//static.cnodejs.org/FnIqqd_BtjPowS1mxBioW6Eck9K5\" alt=\"image.png\"></p>\n<blockquote>\n<p>åˆ˜å­å¥ @æ·˜å® / Node.js Core Collaborator</p>\n</blockquote>\n<p>å¼€æºç”Ÿæ€æ˜¯ç°ä»£è½¯ä»¶å¼€å‘ä¸­æå…¶é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œä»¥ Node.js ä¸ºä¾‹ï¼Œè‡ªå‘å¸ƒä»¥æ¥æŒç»­æœ‰ç¤¾åŒºçš„å¼€å‘è€…ä¸ºå…¶è´¡çŒ®ä»£ç ã€‚æœ¬æ¬¡åˆ†äº«ä¹Ÿå°†ä» Node.js æºç å‡ºå‘ï¼Œè®²è§£å…¶æºç æ„æˆä¸è´¡çŒ®æ–¹å¼ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿä¼šè®²è§£é˜¿é‡Œå·´å·´çš„å¼€æº Node.js æ¡†æ¶ Midway å¼€å‘æ–¹å¼ï¼Œå¸®åŠ©æ–°æ‰‹æ›´å¿«çš„æŠ•å…¥çš„ç¤¾åŒºå¼€æºé¡¹ç›®çš„å»ºè®¾ä¸­ã€‚</p>\n<h3>å¤æ‚ç³»ç»Ÿçš„åŸç†åŠå…¶åœ¨ Node.js ç³»ç»Ÿå¼€å‘ä¸­çš„åº”ç”¨</h3>\n<p><img src=\"//static.cnodejs.org/Frz8neRk38efUCCpIwRc5G_wB86b\" alt=\"image.png\"></p>\n<blockquote>\n<p>ç‹éŸ¬ <a href=\"/user/Wiredcraft\">@Wiredcraft</a> æ¶æ„å¸ˆ</p>\n</blockquote>\n<p>åœ¨è½¯ä»¶è¡Œä¸šï¼Œå¤§é‡ç³»ç»Ÿæ¶æ„è®¾è®¡å’Œå·¥ä½œæµç¨‹è®¾è®¡è¿˜æ˜¯åŸºäºç»éªŒæˆ–ç›´è§‰ï¼Œç‰¹å®šç¯å¢ƒä¸­ç‰¹å®šå†³ç­–çš„åæœéš¾ä»¥é¢„æµ‹ï¼Œå›¢é˜Ÿæˆå‘˜çš„å†³ç­–èƒ½åŠ›éš¾ä»¥é«˜æ•ˆæå‡ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æ›´åŠ å·¥ç¨‹åŒ–çš„æ–¹å¼ï¼Œåšå‡ºé«˜è´¨é‡çš„å†³ç­–ã€‚æœ¬æ¬¡åˆ†äº«ä»‹ç»ä¸€äº›å¤æ‚ç³»ç»Ÿé¢†åŸŸçš„åŸºæœ¬åŸç†ï¼Œä»¥åŠåœ¨ä½¿ç”¨ Node.js è¿›è¡Œå¼€å‘ä¸­çš„åº”ç”¨ã€‚</p>\n<h3>App Engineâ€”â€”ä¸€ä¸ªè½»é‡çº§çš„ Node.js æœåŠ¡æ‰˜ç®¡å’Œè°ƒåº¦å¹³å°</h3>\n<p><img src=\"//static.cnodejs.org/Fly7yNP2ISvn4dw_XlGXZjco36Xk\" alt=\"image.png\"></p>\n<blockquote>\n<p>ç‹å¹²ï¼ˆKKï¼‰ @æœ‰èµ æŠ€æœ¯ä¸“å®¶</p>\n</blockquote>\n<p>æœ‰èµ App Engineï¼ˆåº”ç”¨å¼•æ“ï¼‰æ˜¯ä¸€å¥—é¢å‘å‰ç«¯å¼€å‘åŠè¿ç»´çš„ä¸€ç«™å¼ Node.js æœåŠ¡å®¹å™¨åŒ–å¹³å°ï¼Œä¸ºå‰ç«¯å¼€å‘è€…æä¾›ç»Ÿä¸€å’Œè§„èŒƒåŒ–çš„ Node.js æœåŠ¡ç ”å‘æ¨¡å¼ã€‚æœ¬æ¬¡åˆ†äº«å°†ä¸ºå¤§å®¶ä»‹ç»æœ‰èµ App Engine çš„è®¾è®¡ç†å¿µã€å®è·µæ€»ç»“ä»¥åŠèƒŒåçš„æŠ€æœ¯åŸç†ã€‚</p>\n<h3>JavaScript å…¨æ ˆé«˜æ•ˆç ”å‘åœ¨è¯­é›€ä¸­çš„å®è·µ</h3>\n<p><img src=\"//static.cnodejs.org/FtCsHoEri9rSIVXYYEMy8mUmRZoT\" alt=\"image.png\"></p>\n<blockquote>\n<p>èµµçŠçŠï¼ˆè¥¿ä¸´ï¼‰ @èš‚èšé›†å›¢ å‰ç«¯ä¸“å®¶</p>\n</blockquote>\n<p>è¯­é›€ä½œä¸ºä¸€ä¸ªå¤æ‚çš„ Node.js åº”ç”¨ï¼Œå¦‚ä½•ä»¥å°è§„æ¨¡çš„ç ”å‘å›¢é˜Ÿæ”¯æ’‘ä¸šåŠ¡çš„å¿«é€Ÿå‘å±•æ˜¯æˆ‘ä»¬ä¸æ–­æ¢ç´¢çš„å‘½é¢˜ã€‚è¿™å‡ å¹´ï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡å®è·µä¸­æ€»ç»“å‡ºäº†ä¸€äº›èƒ½å¤Ÿæœ‰æ•ˆä¿éšœç ”å‘æ•ˆç‡çš„å…¨æ ˆå¼€å‘ç»éªŒï¼Œæœ¬æ¬¡åˆ†äº«å°†ä¸ºå¤§å®¶ä¸€ä¸€ä»‹ç»ã€‚</p>\n<p><img src=\"https://img.alicdn.com/imgextra/i3/O1CN01ayQ7Wh1SOafw66J2N_!!6000000002237-0-tps-750-2273.jpg\" alt></p>\n</div>",
      "title": "5 æœˆ 23 æ—¥Node åœ°ä¸‹é“æ­¦æ±‰çƒ­å¹²é¢ä¸“åœºPPT",
      "last_reply_at": "2021-07-20T13:41:23.521Z",
      "good": false,
      "top": true,
      "reply_count": 78,
      "visit_count": 74234,
      "create_at": "2021-04-20T09:51:51.711Z",
      "author": {
        "loginname": "XadillaX",
        "avatar_url": "https://avatars.githubusercontent.com/u/2842176?v=4&s=120"
      }
    },
    {
      "id": "60cc47ff248d044ba14add37",
      "author_id": "5d47c83b4f472f7fee152927",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p><a href=\"https://codepen.io/\">codepen</a> å¯ä»¥è¯´æ˜¯éå¸¸å®ç”¨äº†<br>\nä½†ç”±äºç½‘ç»œåŸå› ï¼Œå¾ˆå¤šç”¨æˆ·è®¿é—®ä¸åˆ°ï¼Œæˆ–è€…éå¸¸æ…¢<br>\nå¦å¤–ï¼Œå¦‚æœä½ çš„ä»£ç å¾ˆç®€å•ï¼Œç”¨ codepen æ˜¾å¾—æœ‰ç‚¹ä¸å¤Ÿç®€æ´</p>\n<p><a href=\"https://dagaiguanyu.github.io/showcode/index.html?html=%25u8FD9%25u91CC%25u5199%20html%20%25u4EE3%25u7801&amp;css=/*%20%25u8FD9%25u91CC%25u5199%20css%20%25u4EE3%25u7801%20*/&amp;js=console.log%28%27%25u8FD9%25u91CC%25u5199%20js%20%25u4EE3%25u7801%27%29\">ä»Šå¤©ï¼Œå‡ºäºå¥½ç©ï¼Œå†™äº†ä¸ªç®€é™‹ç‰ˆçš„ codepenï¼Œæ¬¢è¿å¤§å®¶æ¥çœ‹çœ‹</a><br>\nåªæ”¯æŒ htmlã€cssã€js ä»£ç ï¼Œä½†æ”¯æŒåˆ†äº«ä»£ç ï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼Œgithub ä¸å€’é—­ï¼Œæˆ‘ä¸å€’é—­ï¼‰<br>\n(ä¸æ”¯æŒ tsã€sassã€stylus ç­‰éœ€è¦ç¼–è¯‘çš„è¯­è¨€ï¼Œä¹Ÿæ²¡æœ‰æ‰“å¼€å°±èƒ½ç”¨çš„ vueã€react ç¯å¢ƒï¼Œæ¯•ç«Ÿåœ¨æ²¡æœ‰ä»»ä½•ä¾èµ–çš„æƒ…å†µä¸‹ï¼Œå‰åç«¯æ€»å…±åªä½¿ç”¨äº†ä¸åˆ° 200 è¡Œä»£ç ï¼‰</p>\n</div>",
      "title": "ä»Šå¤©å†™äº†ä¸ªæç®€ç‰ˆçš„ codepen",
      "last_reply_at": "2021-08-02T17:02:55.728Z",
      "good": false,
      "top": false,
      "reply_count": 5,
      "visit_count": 1577,
      "create_at": "2021-06-18T07:15:11.739Z",
      "author": {
        "loginname": "daGaiGuanYu",
        "avatar_url": "https://avatars.githubusercontent.com/u/27003009?v=4&s=120"
      }
    },
    {
      "id": "596eb7768f05de0819fdb301",
      "author_id": "538ebff9c3ee0b58208376c7",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>å¦‚é¢˜ã€‚çŸ¥é“å†…æƒ…çš„è¿›æ¥è¯´è¯´ï¼Ÿ<a href=\"/user/alsotang\">@alsotang</a> and <a href=\"/user/i5ting\">@i5ting</a>ï¼Ÿ</p>\n</div>",
      "title": "å¬è¯´æ˜å¹´2æœˆä¹‹å‰è¦ç¦æ­¢æ‰€æœ‰ä¸ªäººç”¨æˆ·ä½¿ç”¨VPNï¼Œæ˜¯çœŸçš„å—ï¼Ÿ",
      "last_reply_at": "2021-08-02T16:57:35.284Z",
      "good": false,
      "top": false,
      "reply_count": 55,
      "visit_count": 16074,
      "create_at": "2017-07-19T01:35:50.929Z",
      "author": {
        "loginname": "zhanzhenzhen",
        "avatar_url": "https://avatars3.githubusercontent.com/u/731796?v=4&s=120"
      }
    },
    {
      "id": "60e503bfba7460b2a0862a7e",
      "author_id": "60e50164ba74605814862a73",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>è¯ä¸å¤šè¯´ï¼Œå…ˆæ”¾ä¸Šæˆªå›¾å’Œä»“åº“åœ°å€ï¼š</p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4319bf92bf64975872cc34c25078cec~tplv-k3u1fbpfcp-watermark.image\" alt=\"QQ20210705-210753.gif\"></p>\n<p>ä»£ç ä»“åº“ï¼š<a href=\"https://github.com/clouDr-f2e/rubick\">github</a></p>\n<h2>æ•…äº‹èƒŒæ™¯</h2>\n<h3>ç½‘ç»œæŠ“åŒ…</h3>\n<p>ä¹‹å‰å…¬å¸å†…éƒ¨å› ä¸ºå¼€å‘éœ€è¦ï¼Œéœ€è¦å’Œåç«¯è¿›è¡Œæ¥å£è”è°ƒï¼Œæµ‹è¯•ç¯å¢ƒçš„æ—¶å€™ï¼Œç»å¸¸ä¼šæ¶‰åŠåˆ°ä¸€äº›çŠ¶æ€æ”¹å˜è¦çœ‹äº¤äº’æ ·å¼çš„é—®é¢˜ã€‚æ¯”å¦‚æµ‹è¯•éœ€è¦æµ‹å•†å“çš„å¾…æ”¯ä»˜ã€æ”¯ä»˜ä¸­ã€æ”¯ä»˜å®Œæˆç­‰å„ç§èŠ‚ç‚¹çš„äº¤äº’æ ·å¼æ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œè¿™ç§æƒ…å†µæµ‹è¯•ä¸€èˆ¬ä¼šå»é€ æ•°æ®æˆ–è€…è®©åç«¯æ”¹æ•°æ®åº“æ¥å£ã€‚\næœ‰çš„å°ä¼™ä¼´å¯èƒ½ä¼šç”¨<code>Charles</code>ä¿®æ”¹è¿”å›æ•°æ®è¿›è¡Œæµ‹è¯•ã€‚ä½†æ˜¯<code>Charles</code>çš„æŠ“åŒ…ä½“éªŒå’Œé…ç½®ä½“éªŒæ„Ÿè§‰æœ‰ç‚¹éº»çƒ¦ï¼Œä¸æ˜¯å¾ˆå‹å¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªå·±åšäº†ä¸ª<code>æŠ“åŒ…&amp;mock</code>å·¥å…·ï¼š</p>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fbe19cfe19ff4fb099202c7a87addc7f~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>å‚»ç“œå¼äº¤äº’ä¸€æ¬¡æ€§è§£å†³ï¼šæŠ“åŒ…ã€ä»£ç†ã€è¯·æ±‚è½¬å‘ã€æ¥å£æ•°æ®ç¯¡æ”¹mockã€è·¨åŸŸè®¿é—® ç­‰èƒ½åŠ›ï¼Œå¹¶å¾—åˆ°äº†å¹¿æ³›ä½¿ç”¨å’Œå¥½è¯„ã€‚</p>\n<h3>æ–‡ä»¶ä¸Šä¼ </h3>\n<p>éšç€é¡¹ç›®å¼€å‘çš„ç»§ç»­ï¼Œæœ‰äº›ç”¨æˆ·ç»™æˆ‘ä»¬åé¦ˆé¡µé¢åŠ è½½å›¾ç‰‡èµ„æºæ¯”è¾ƒæ…¢ï¼Œæˆ‘ä»¬çœ‹äº†ä¸€ä¸‹å¾ˆå¤šå›¾ç‰‡èµ„æºéƒ½æ²¡æœ‰ç»è¿‡å‹ç¼©å¤„ç†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>webpack</code> å†™äº†ä¸€äº› <code>loader</code> æ¥å¯¹å›¾ç‰‡èµ„æºè¿›è¡Œå‹ç¼©å¤„ç†ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬çš„å›¾ç‰‡èµ„æºå¤§éƒ¨åˆ†æ˜¯å­˜æ”¾åœ¨é¡¹ç›®ç›®å½•ä¸‹ã€‚è€Œæœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯éœ€è¦å°†å›¾ç‰‡å­˜æ”¾äº <code>cdn</code> ä¸Šçš„ï¼Œæ­¤æ—¶æˆ‘ä»¬åˆéœ€è¦ä¸€ä¸ªå›¾åºŠå·¥å…·ï¼Œå¯ä»¥åœ¨çº¿å­˜å‚¨å›¾ç‰‡èµ„æºã€‚äºæ˜¯ä¹ï¼Œæˆ‘ä»¬åˆæ•´åˆäº†å›¾ç‰‡å‹ç¼©å’Œä¸Šä¼ çš„åŠŸèƒ½ï¼Œåšäº†ä¸ªå›¾åºŠå·¥å…·ï¼š</p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/542fcabe595740e19665e8f07edb3e99~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<h3>æ€§èƒ½æµ‹è¯„</h3>\n<p>å¼€å‘è€…å¼€å‘é¡µé¢çš„æ—¶å€™ï¼Œéœ€è¦å¯¹é¡µé¢çš„æ€§èƒ½è¿›è¡Œè¯„ä¼°ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥æŠŠè¯„ä¼°æŠ¥å‘Šé€šçŸ¥ç»™æµ‹è¯•åŒå­¦ï¼Œå¯¹å…¶è¿›è¡Œæ€§èƒ½æµ‹è¯•ã€‚ä¹‹å‰å¤§å¤šé‡‡ç”¨çš„æ˜¯ <code>chrome</code> æ’ä»¶ <code>lighthouse</code> æ¥åšã€‚ä½†æ˜¯è¿™ä¸ªä¸œè¥¿å¯¹æœªç™»å½•ç”¨æˆ·æ— æ³•åšåˆ°æ€§èƒ½è¯„ä¼°ï¼Œå› ä¸ºç”¨æˆ·æœªç™»å½•ç›´æ¥æµ‹è¯„äº†ç™»å½•é¡µé¢ï¼Œæ˜¾ç„¶ä¸ç¬¦åˆé¢„æœŸï¼Œå…¶æ¬¡ï¼Œæ¯ä¸ªç”µè„‘ä¸Šéƒ½å¾—å®‰è£…æ’ä»¶ï¼Œå—é™äºè®¾å¤‡çš„ä¸åŒï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½æ²¡æœ‰åŒä¸€çš„å˜é‡ï¼ˆç½‘ç»œã€ç½‘é€Ÿã€åˆ†è¾¨ç‡ã€CUPç­‰ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬åŸºäº <code>pupeeteer-core</code>ä»¥åŠ<code>electron</code> åšäº†ä¸€ä¸ªå…ç™»çš„æµ‹è¯„å·¥å…·ï¼š</p>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2ce2d6baad343e49a2b589f1fc9f63a~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>ä½†æ˜¯è¿™äº›è¿˜è¿œè¿œä¸å¤Ÿï¼Œæˆ‘ä»¬éšç€ä¸šåŠ¡çš„å¢åŠ ï¼ŒåŠŸèƒ½æ„ˆå‘çš„å¤šäº†èµ·æ¥ï¼šæˆ‘ä»¬çš„åŸ‹ç‚¹æ£€æµ‹å·¥å…·ã€éœ€æ±‚ç®¡ç†å·¥å…·ã€å‰ç«¯å¤šç¯å¢ƒåˆ‡æ¢å·¥å…· ç­‰ç­‰ç­‰â€¦ä¸€æ–¹é¢å¯¼è‡´ <code>electron</code> ä½“ç§¯å˜å¾—è‡ƒè‚¿èµ·æ¥ï¼Œå¦ä¸€æ–¹é¢éšç€å‘å¸ƒé¢‘ç‡å¢åŠ ï¼Œå®‰è£…ä¸‹è½½çš„æˆæœ¬ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼Œå¾ˆå¤šç”¨æˆ·å°±ä¸æ„¿æ„å†æ¥ç€å®‰è£…ï¼Œå› ä¸ºç¡®å®å¾ˆéº»çƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ”¹å˜ï¼Œè®©åŠŸèƒ½ä¸ä¾èµ–ä¸å®¹å™¨ã€‚è¿™å°±éœ€è¦æŠŠæˆ‘ä»¬çš„åŠŸèƒ½å…¨éƒ¨ç‹¬ç«‹å‡ºå»ï¼Œåšæˆ<strong>æ’ä»¶åŒ–</strong>ã€‚æ‰€ä»¥æˆ‘æ³¨æ„åˆ°äº† <a href=\"https://u.tools/\">utools</a></p>\n<h2>æ’ä»¶åŒ–ä¹‹æ—…</h2>\n<p>ä¸€å¼€å§‹æƒ³åˆ°åšæ’ä»¶åŒ–ï¼Œæ— éå°±æ˜¯ä½¿ç”¨ <code>electron</code> çš„ <code>webview</code> èƒ½åŠ›ï¼Œå®ç°ç±»ä¼¼äºåŸç”Ÿå†…åµŒ<code>h5</code>é‚£æ ·çš„æ–¹å¼ï¼Œ<code>h5</code> é¡µé¢å¯ä»¥åšç‹¬ç«‹å‘å¸ƒï¼ŒåŸç”Ÿæä¾› <code>nativaAPI</code> ä¹‹é—´é€šè¿‡ <code>jsBridge</code> æ¥æ¡¥æ¥è°ƒç”¨åŸç”Ÿçš„æ–¹æ³•ã€‚è¿™æ ·å®ç°å¹¶æ— é—®é¢˜ï¼Œæˆ‘ä»¬ä¹Ÿå°è¯•äº†åšäº†ä¸€æ¬¡ã€‚æœ€ç»ˆæ€è·¯å¤§æ¦‚æ˜¯ï¼š</p>\n<h3>electron webview æ–¹å¼</h3>\n<h4>1. electron ä¸­ä½¿ç”¨ webview</h4>\n<pre class=\"prettyprint language-html\"><code>&lt;webview src=&quot;https:&#x2F;&#x2F;xxx.xx.com&#x2F;index.html&quot; preload=&quot;preload.js&quot; &#x2F;&gt;\n</code></pre><h4>2. å®ç° <code>bridge</code></h4>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; preload.js\nwindow.rubickBridge = {\n  sayHello() {\n    console.log(&#x27;hello world&#x27;)\n  }\n}\n</code></pre><h4>3. æ’ä»¶å€ŸåŠ© <code>bridge</code> è°ƒç”¨ <code>electron</code> çš„èƒ½åŠ›</h4>\n<pre class=\"prettyprint language-html\"><code>&lt;html&gt;\n &lt;body&gt;\n     &lt;div&gt;è¿™æ˜¯ä¸€ä¸ªæ’ä»¶&lt;div&gt;\n &lt;&#x2F;body&gt;\n &lt;script&gt;\n  window.rubickBridge.sayHello()\n&lt;&#x2F;script&gt;\n&lt;&#x2F;html&gt;\n</code></pre><h4>4. é€šä¿¡</h4>\n<p>å› ä¸º <code>proload.js</code> æ˜¯ <code>electron</code> çš„ <code>renderer</code> è¿›ç¨‹çš„ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦ä½¿ç”¨éƒ¨åˆ† <code>main</code> è¿›ç¨‹çš„èƒ½åŠ›ï¼Œåˆ™éœ€è¦ä½¿ç”¨é€šä¿¡æœºåˆ¶ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; main process\nipcMain.on(&#x27;msg-trigger&#x27;, async (event, arg) =&gt; {\n    const window = arg.winId ? BrowserWindow.fromId(arg.winId) : mainWindow\n    const operators = arg.type.split(&#x27;.&#x27;);\n    let fn = Api;\n    operators.forEach((op) =&gt; {\n      fn = fn[op];\n    });\n    const data = await fn(arg, window);\n    event.sender.send(&#96;msg-back-${arg.type}&#96;, data);\n});\n  \n&#x2F;&#x2F; renderer process\nipcRenderer.send(&#x27;msg-trigger&#x27;, {\n  type: &#x27;getPath&#x27;,\n  name,\n});\nipcRenderer.on(&#96;msg-back-getPath&#96;, (e, result) =&gt; {\n  console.log(result)\n});\n</code></pre><h3>ä¸ºä»€ä¹ˆåæ¥æˆ‘ä»¬åˆæ”¾å¼ƒäº†è¿™æ¡è·¯ğŸ¤” ï¼Ÿ</h3>\n<p>å…¶å®ä¸Šé¢çš„æ€è·¯å¤§è‡´æ˜¯æ²¡å•¥é—®é¢˜çš„ï¼Œæˆ‘ä»¬ä¹ŸåŸºäºä¸Šé¢çš„æ€è·¯æˆåŠŸæŠŠåŠŸèƒ½æŠ½æˆäº†æ’ä»¶ï¼ŒæŒ‰ç…§æ’ä»¶çš„æ–¹å¼è¿›è¡Œå®‰è£…åŠ è½½ã€‚ç›´åˆ°æˆ‘ä»¬æ³¨æ„åˆ° <code>utools</code> çš„å¼ºå¤§ï¼Œæ„Ÿè§‰ <code>utools</code> çš„ç”Ÿæ€éå¸¸ä¸°å¯Œï¼Œæˆ‘ä»¬è¦æ˜¯èƒ½é›†æˆ <code>utools</code> çš„ç”Ÿæˆé‚£è¯¥å¤šå¥½å‘€ï¼æ‰€ä»¥æˆ‘ä»¬ç§‰æŒç€å¹²ä¸è¿‡ä»–å°±æˆä¸ºä»–çš„åŸåˆ™ï¼Œæˆ‘ä»¬å°è¯•ç€æˆä¸ºä»–ã€‚ä½†æ˜¯ <code>utools</code> æœ¬èº«å¹¶æ²¡æœ‰å¼€æºï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•å»å¸å–ä¸€äº›ä¼˜ç§€çš„ä»£ç å®ç°ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹ä»–çš„å®˜æ–¹æ–‡æ¡£ã€‚</p>\n<p>æˆ‘ä»¬å‘ç°å…¶å® <code>utools</code> å¤§å¤šæ•°æ’ä»¶éƒ½æ˜¯å’Œ <code>container</code> å±‚åˆ†ç¦»çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>utools</code> åªæ˜¯ä¸€ä¸ªæ’ä»¶çš„å®¹å™¨ï¼Œä¸ºæ’ä»¶æä¾›äº†ä¸€äº› <code>api</code> èƒ½åŠ›å’Œæ–¹æ³•ã€‚æ‰€ä»¥ä¸€æ—¦æˆ‘ä»¬å®ç°äº†<code>utools</code>åŠ è½½æ’ä»¶çš„èƒ½åŠ›ï¼Œå®ç° <code>utools</code> çš„æ‰€æœ‰ <code>API</code> å‡½æ•°ï¼Œæ˜¯ä¸æ˜¯å°±çº¦ç­‰äºå®ç°äº† <code>utools</code> ! æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ <code>utools</code> çš„æ’ä»¶ï¼Ÿ</p>\n<h3>utools æ–¹å¼</h3>\n<p>æŒ‰ç…§ utools çš„ æ–‡æ¡£ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªæ’ä»¶ï¼Œå¿…é¡»è¦æœ‰ä¸ª <code>plugin.json</code>ï¼Œè¿™ç©æ„å°±æ˜¯ç”¨æ¥å‘Šè¯‰ <code>utools</code> æ’ä»¶çš„ä¿¡æ¯ã€‚æˆ‘ä»¬ä¹ŸæŒ‰ç…§æ–‡æ¡£æ¥å†™ï¼š</p>\n<pre class=\"prettyprint language-json\"><code>{\n    &quot;pluginName&quot;: &quot;helloWorld&quot;,\n    &quot;description&quot;: &quot;æˆ‘çš„ç¬¬ä¸€ä¸ªuToolsæ’ä»¶&quot;,\n    &quot;main&quot;: &quot;index.html&quot;,\n    &quot;version&quot;: &quot;0.0.1&quot;,\n    &quot;logo&quot;: &quot;logo.png&quot;,\n    &quot;features&quot;: [\n        {\n          &quot;code&quot;: &quot;hello&quot;,\n          &quot;explain&quot;: &quot;hello world&quot;,\n          &quot;cmds&quot;:[&quot;hello&quot;, &quot;ä½ å¥½&quot;]\n        }\n    ]\n}\n</code></pre><p>æ¥ä¸‹æ¥æ˜¯å°†å†™å¥½çš„æ’ä»¶ç”¨ <code>utools</code> è·‘èµ·æ¥ï¼ŒæŒ‰ç…§ <code>utools</code>çš„äº¤äº’æ˜¯å¤åˆ¶ <code>plugin.json</code> åˆ°<code>utools</code>æœç´¢æ¡†å³å¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®ç°ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; ç›‘å¬ input change\n&#x2F;&#x2F; è¯»å–å‰ªåˆ‡æ¿å†…å®¹\nconst fileUrl = clipboard.read(&#x27;public.file-url&#x27;).replace(&#x27;file:&#x2F;&#x2F;&#x27;, &#x27;&#x27;);\n&#x2F;&#x2F; å¤åˆ¶æ–‡ä»¶\nif (fileUrl &amp;&amp; value === &#x27;plugin.json&#x27;) {\n  &#x2F;&#x2F; è¯»å– plugin.json é…ç½®\n  const config = JSON.parse(fs.readFileSync(fileUrl, &#x27;utf-8&#x27;));\n  const pluginConfig = {\n    ...config,\n    &#x2F;&#x2F; index.html æ–‡ä»¶ä½ç½®ï¼Œç”¨äºwebviewåŠ è½½\n    sourceFile: path.join(fileUrl, &#96;..&#x2F;${config.main || &#x27;index.html&#x27;}&#96;),\n    id: uuidv4(),\n    type: &#x27;dev&#x27;,\n    icon: &#x27;image:&#x2F;&#x2F;&#x27; + path.join(fileUrl, &#96;..&#x2F;${config.logo}&#96;),\n    subType: (() =&gt; {\n      if (config.main) {\n        return &#x27;&#x27;\n      }\n      return &#x27;template&#x27;;\n    })()\n  };\n}\n</code></pre><p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b40162dd4c774a3ca6db2aa63c3606eb~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>æ¥ä¸‹æ¥å°±æ˜¯è¿›è¡Œå‘½ä»¤æœç´¢æ’ä»¶:</p>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/236e9308fa324a3bac266ff7332cd1ab~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>å®ç°è¿™ä¸ªåŠŸèƒ½å…¶å®ä¹Ÿå°±æ˜¯å¯¹ä¹‹å‰å­˜å‚¨çš„<code>pluginConfig</code>çš„é‡Œé¢çš„ <code>features</code> è¿›è¡Œéå†ï¼Œæ‰¾åˆ°ç›¸åº”çš„ <code>cmd</code> åè¿›è¡Œä¸‹æ‹‰æ¡†å±•ç¤ºå³å¯ã€‚</p>\n<p>ç„¶åæˆ‘ä»¬è¦å»å®ç°é€‰æ‹©åŠŸèƒ½ï¼Œç”¨ <code>webview</code> åŠ è½½é¡µé¢çš„èƒ½åŠ›ï¼š</p>\n<pre class=\"prettyprint language-html\"><code>&lt;template&gt;\n  &lt;div&gt;\n    &lt;webview id=&quot;webview&quot; :src=&quot;path&quot; :preload=&quot;preload&quot;&#x2F;&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n&lt;script&gt;\nexport default {\n  data() {\n    return {\n      path: &#96;File:&#x2F;&#x2F;${this.$route.query.sourceFile}&#96;,\n      preload: &#96;File:&#x2F;&#x2F;${path.join(__static, &#x27;.&#x2F;preload.js&#x27;)}&#96;,\n      webview: null,\n      query: this.$route.query,\n      config: {}\n    }\n  }\n}\n&lt;&#x2F;script&gt;\n</code></pre><p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/37cf1909b1374606bdd1fbae657433c7~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>åˆ°æ­¤ç»“æŸäº†ï¼Ÿå¹¶æ²¡æœ‰ï¼ï¼ï¼ç”±äºç¯‡å¹…çš„åŸå› ï¼Œæˆ‘ä»¬åç»­å†è¯´ã€‚æœ¬å‡ºå†™çš„æ’ä»¶demoå·²ä¸Šä¼ github: <a href=\"https://github.com/clouDr-f2e/rubick-plugin-demo\">https://github.com/clouDr-f2e/rubick-plugin-demo</a></p>\n<h2>Far from enough è¿™åªæ˜¯å¼€å§‹</h2>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å‚è€ƒ <code>utools</code> äº¤äº’ä¸€å£æ°”å®ç°å…¶å¤§éƒ¨åˆ†åŠŸèƒ½ï¼š</p>\n<h3>è¶…çº§é¢æ¿</h3>\n<p><img src=\"//static.cnodejs.org/Fl-gy-iyc8sjhe0s9eOhJJRab8_M\" alt=\"image.png\"></p>\n<h3>åŠ è½½utoolsç”Ÿæ€æ’ä»¶</h3>\n<p>æ–—å›¾ï¼š<a href=\"https://github.com/vst93/doutu-uToolsPlugin\">https://github.com/vst93/doutu-uToolsPlugin</a></p>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cba1eb758180433294c93b59724adefd~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<h3>çª—å£åˆ†ç¦»</h3>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e4de3a72c7244db898b2106b96c48416~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<h3>utools doc æ¨¡æ¿</h3>\n<p>uTools çš„æ’ä»¶å¼€å‘ç»™äºˆäº†å¼€å‘è€…æœ€å¤§çš„è‡ªç”±åº¦ï¼Œä½ å¯ä»¥éšå¿ƒæ‰€æ¬²çš„è®¾è®¡é¡µé¢ç»“æ„ã€æ ·å¼ã€äº¤äº’ï¼Œå¯¹äºç‰¹åˆ«æ“…é•¿å‰ç«¯å¼€å‘çš„åŒå­¦ï¼Œè¿™æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†å¯¹äºéå‰ç«¯å¼€å‘è€…ï¼Œè¦åšå‡ºæ¼‚äº®çš„ã€é«˜è´¨é‡çš„å‰ç«¯ UI æ˜¯ä¸€ä»¶å›°éš¾çš„äº‹æƒ…ã€‚</p>\n<p>æ‰€ä»¥ Rubick ä¹Ÿå®ç°äº†æ¨¡æ¿èƒ½åŠ›ï¼š</p>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e1acf7f300d2490d99aa208080e00dad~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<h3>utools è‡ªå¸¦çš„ç³»ç»Ÿå‘½ä»¤</h3>\n<h4>å–è‰²</h4>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8c3e00e5f08545bcb96613689649b337~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<h4>æˆªå±</h4>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/18023dab52e1420c9e87362cefddb2a1~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<h2>æœ€å</h2>\n<p>ç›®å‰ <code>rubick</code> å·²ç»å®ç° <code>utools</code> å¤§å¤šæ•°æ ¸å¿ƒèƒ½åŠ›ï¼Œ<strong>æœ€é‡è¦çš„æ˜¯å¯ä»¥ä½¿ç”¨ utools æ‰€æœ‰ç”Ÿæ€ ï¼</strong> æ›´å¤šèƒ½åŠ›å¯ä»¥å‰å¾€ github ä½“éªŒã€‚å¦‚æœæ„Ÿè§‰æœ‰ç”¨ï¼Œå¯ä»¥å¸®å¿™åæ‰‹ä¸€ä¸ª star âœ¨</p>\n<p><a href=\"https://github.com/clouDr-f2e/rubick\">Rubick github</a></p>\n</div>",
      "title": "åŸºäº Electron æˆ‘å®ç°å¹¶å¼€æºäº†ä¸€ä¸ª uTools",
      "last_reply_at": "2021-08-02T16:56:49.020Z",
      "good": true,
      "top": false,
      "reply_count": 6,
      "visit_count": 2903,
      "create_at": "2021-07-07T01:30:39.811Z",
      "author": {
        "loginname": "muwoo",
        "avatar_url": "https://avatars.githubusercontent.com/u/21073039?v=4&s=120"
      }
    },
    {
      "id": "610016aae3e671439758fc52",
      "author_id": "5f322c8a2799ce64a0aabac9",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p><a href=\"https://hackertalk.net/post/207480410191056896\">é˜¿é‡Œäº‘è¿˜æ˜¯ AWSï¼Ÿ</a></p>\n</div>",
      "title": "é˜¿é‡Œäº‘è¿˜æ˜¯ AWSï¼Ÿ",
      "last_reply_at": "2021-08-02T16:51:47.168Z",
      "good": false,
      "top": false,
      "reply_count": 3,
      "visit_count": 356,
      "create_at": "2021-07-27T14:22:34.604Z",
      "author": {
        "loginname": "Q-Qplus1s",
        "avatar_url": "https://avatars.githubusercontent.com/u/50064165?v=4&s=120"
      }
    },
    {
      "id": "5b45c66a35342ab06906145a",
      "author_id": "57bbcb58b32043f532d40e6f",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><ul>\n<li><strong>Node Version</strong>: 8.11.3</li>\n<li><strong>Egg Version</strong>: 2.9.1</li>\n<li><strong>Plugin Name</strong>: egg-passport-local</li>\n<li><strong>Plugin Version</strong>: ^1.2.1</li>\n<li><strong>Platform</strong>:mac os</li>\n<li><strong>Mini Showcase Repository</strong>:</li>\n</ul>\n<hr>\n<p>å› ä¸ºå†™çš„æ˜¯ api æ¥å£ï¼Œæ‰€ä»¥æ²¡æœ‰ä½¿ç”¨ <code>egg-passport-local</code> è¿›è¡Œç”¨æˆ·è´¦å·å¯†ç çš„æ ¡éªŒï¼Œä¹Ÿæ²¡æœ‰ä½¿ç”¨å®ƒæ¥è¿›è¡Œé‰´æƒã€‚</p>\n<p>ç›®å‰çš„é—®é¢˜æ˜¯ï¼š</p>\n<ul>\n<li>å¦‚æœä½¿ç”¨äº† <code>egg-passport-local</code> è¿›è¡Œé‰´æƒçš„è¯ï¼Œç›®å‰æ— æ³•è¿”å›æ­£ç¡®çš„é”™è¯¯ä¿¡æ¯ç»™å‰ç«¯ã€‚</li>\n<li>å¦‚æœä¸ä½¿ç”¨è¯¥æ’ä»¶ï¼Œæ— æ³•æ“ä½œ <code>ctx.user</code><pre class=\"prettyprint language-bash\"><code>Cannot set property user of #&lt;Object&gt; which has only a getter\n</code></pre></li>\n</ul>\n<p>é’ˆå¯¹è¿™ä¿©é—®é¢˜ï¼š</p>\n<ul>\n<li>èƒ½å¦ä½¿ç”¨ <code>egg-passport-local</code> è¿›è¡Œé‰´æƒï¼Œå¹¶ä¸”å¯ä»¥æ‰‹åŠ¨å¤„ç†å…·ä½“çš„é”™è¯¯ä¿¡æ¯ï¼Ÿ</li>\n<li>èƒ½å¦ä¸ä½¿ç”¨ <code>egg-passport-local</code> é‰´æƒï¼Œä½†æ˜¯ä¾æ—§å¯ä»¥å¾€ <code>ctx.user</code> ä¸­å†™æ•°æ®ï¼Ÿ</li>\n</ul>\n</div>",
      "title": "ä¸ä½¿ç”¨ passport-local å¦‚ä½•è¿›è¡Œé‰´æƒï¼Ÿ",
      "last_reply_at": "2021-08-02T16:47:10.592Z",
      "good": false,
      "top": false,
      "reply_count": 20,
      "visit_count": 3644,
      "create_at": "2018-07-11T08:57:14.934Z",
      "author": {
        "loginname": "JZLeung",
        "avatar_url": "https://avatars.githubusercontent.com/u/7995232?v=4&s=120"
      }
    },
    {
      "id": "61058e37a5d29d4c6c2d3c29",
      "author_id": "5a051be2ee9b35da75a869f7",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><blockquote>\n<p>æœ¬ç¯‡ä¸º <a href=\"https://cnodejs.org/topic/60f58c8ae3e67138bc58eacc\">æ·±å…¥å­¦ä¹  NodeJs ç³»åˆ—</a> æœ€æ–°å‘å¸ƒçš„ <a href=\"https://github.com/xiaoxiaojx/blog/issues/14\">c++ æ’ä»¶è¿è¡Œ</a>, å› ä¸ºåŒ…å«äº†åŸºç¡€ä»‹ç»ã€å¦‚ä½•ä½¿ç”¨ã€æºç å®ç°ä»¥åŠæœ€åçš„å®è·µä¾‹å­, è‡ªæˆ‘æ„Ÿè§‰è¿˜ç®—è®²æ˜ç™½äº† ğŸ‘€ æ‰€ä»¥å•ç‹¬åˆ†äº«äº†å‡ºæ¥ï¼Œæ›´å¤šå¯ä»¥æŒç»­å…³æ³¨ ğŸŒŸ <a href=\"https://github.com/xiaoxiaojx/blog\">github | blog</a> ğŸŒŸ</p>\n</blockquote>\n<p><img src=\"https://nodejs.org/static/images/logo.svg\" alt=\"https://nodejs.org/static/images/logo.svg\"></p>\n<h2>å‰è¨€</h2>\n<p>node ä¸­ä¸»è¦æœ‰ c++ æ¨¡å—ï¼Œlib ç›®å½•ä¸‹çš„ js æ¨¡å—ï¼Œç”¨æˆ·çš„ js æ¨¡å—ä»¥åŠç”¨æˆ·çš„ c++ æ’ä»¶æ¨¡å—ã€‚å…¶æ³¨å†Œï¼Œè¿è¡Œï¼ŒåŠ è½½çš„æœºåˆ¶éƒ½æœ‰æ‰€ä¸åŒï¼Œä¸‹é¢è®©æˆ‘ä»¬é€ä¸€è®²è§£å®ƒä»¬çš„å®ç°</p>\n<p>æ¶‰åŠçš„çŸ¥è¯†ç‚¹</p>\n<ul>\n<li><a href=\"http://nodejs.cn/latest-api/policy.html\">policy | Node.js API æ–‡æ¡£</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/106781089\">Cè¯­è¨€çš„é™æ€é“¾æ¥ä¸åŠ¨æ€é“¾æ¥</a></li>\n<li><a href=\"https://www.cnblogs.com/anker/p/3746802.html\">é‡‡ç”¨dlopenã€dlsymã€dlcloseåŠ è½½åŠ¨æ€é“¾æ¥åº“</a></li>\n</ul>\n<h2>ç®€å•ä»‹ç»</h2>\n<blockquote>\n<p>æ’ä»¶æ˜¯ç”¨ C++ ç¼–å†™çš„åŠ¨æ€é“¾æ¥å…±äº«å¯¹è±¡ã€‚ require() å‡½æ•°å¯ä»¥å°†æ’ä»¶åŠ è½½ä¸ºæ™®é€šçš„ Node.js æ¨¡å—ã€‚ æ’ä»¶æä¾›äº† JavaScript å’Œ C/C++ åº“ä¹‹é—´çš„æ¥å£ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å®ç°æ’ä»¶æœ‰ä¸‰ç§é€‰æ‹©ï¼šNode-APIã€nan æˆ–ç›´æ¥ä½¿ç”¨å†…éƒ¨ V8ã€libuv å’Œ Node.js åº“ã€‚ é™¤ééœ€è¦ç›´æ¥è®¿é—® Node-API æœªæš´éœ²çš„åŠŸèƒ½ï¼Œå¦åˆ™è¯·ä½¿ç”¨ Node-APIã€‚ æœ‰å…³ Node-API çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ä½¿ç”¨ <a href=\"http://nodejs.cn/api/n-api.html\">Node-API çš„ C/C++ æ’ä»¶</a>ã€‚</p>\n</blockquote>\n<p>å…¶å®æ— è®ºæ˜¯ <a href=\"http://nodejs.cn/api/n-api.html\">Node-API</a> è¿˜æ˜¯ <a href=\"https://github.com/nodejs/node-addon-api\">node-addon-api</a>ï¼Œéƒ½æ˜¯æœ€åŸºæœ¬çš„ c++ æ’ä»¶å†™æ³•çš„å°è£…ï¼Œæœ¬ç¯‡è®©æˆ‘ä»¬å»äº†è§£ä¸€ä¸‹ åŸºæœ¬çš„ c++ æ’ä»¶å®ç°</p>\n<h2>ä¾‹å­</h2>\n<ul>\n<li>ä¾‹å­ä»£ç æ”¾åœ¨äº†è¯¥ <a href=\"https://github.com/xiaoxiaojx/blog/tree/master/addons\">git ä»“åº“ addons ç›®å½•</a></li>\n<li>è¿è¡Œæ—¶çš„ node ç‰ˆæœ¬ä¸º: 16.5.0</li>\n<li>è¿è¡Œçš„ç³»ç»Ÿä¸º: MacOS</li>\n</ul>\n<p>å¦‚ä¸‹å°±æ˜¯ä¸€ä¸ª c++ æ’ä»¶çš„å†™æ³•ï¼Œmodule.exports ä¸Šå¯¼å‡ºäº†ä¸€ä¸ª hello æ–¹æ³•ï¼Œå…¶ä¸­ NODE_MODULE å®ä¸»è¦æ˜¯æŠŠè¯¥æ’ä»¶æ¨¡å—ç»™æ³¨å†Œåˆ°äº†å†…éƒ¨çš„ modlist_internal é“¾è¡¨ä¸­ï¼Œä»¥ä¾¿ç”¨æˆ· require çš„æ—¶å€™æ‰¾åˆ°è¯¥æ¨¡å—</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; hello.cc\n\n#include &lt;node.h&gt;\n\nnamespace demo\n{\n\n  using v8::FunctionCallbackInfo;\n  using v8::Isolate;\n  using v8::Local;\n  using v8::Object;\n  using v8::String;\n  using v8::Value;\n\n  void Method(const FunctionCallbackInfo&lt;Value&gt; &amp;args)\n  {\n    Isolate *isolate = args.GetIsolate();\n    args.GetReturnValue().Set(String::NewFromUtf8(\n                                  isolate, &quot;world&quot;)\n                                  .ToLocalChecked());\n  }\n\n  void Initialize(Local&lt;Object&gt; exports)\n  {\n    NODE_SET_METHOD(exports, &quot;hello&quot;, Method);\n  }\n\n  NODE_MODULE(NODE_GYP_MODULE_NAME, Initialize)\n\n}\n</code></pre><h3>æ„å»º</h3>\n<p>æ„å»ºè¿è¡Œ <a href=\"http://hello.cc\">hello.cc</a> ä¸»è¦éœ€è¦å¦‚ä¸‹å‡ æ­¥</p>\n<h4>ä¸‹è½½ node-gyp</h4>\n<pre class=\"prettyprint\"><code>npm install -g node-gyp\n</code></pre><blockquote>\n<p>node-gyp æ˜¯ä¸€ä¸ªç”¨ Node.js ç¼–å†™çš„è·¨å¹³å°å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºä¸º Node.js ç¼–è¯‘æœ¬æœºæ’ä»¶æ¨¡å—ã€‚å®ƒåŒ…å« Chromium å›¢é˜Ÿä»¥å‰ä½¿ç”¨çš„ gyp-next é¡¹ç›®çš„ä¾›åº”å•†å‰¯æœ¬ï¼Œæ‰©å±•ä¸ºæ”¯æŒ Node.js åŸç”Ÿæ’ä»¶çš„å¼€å‘ã€‚</p>\n</blockquote>\n<h4>æ–°å¢ binding.gyp æ–‡ä»¶</h4>\n<p>æ–‡ä»¶å†…å®¹å¦‚ä¸‹</p>\n<pre class=\"prettyprint\"><code>{\n  &quot;targets&quot;: [\n    {\n      &quot;target_name&quot;: &quot;addon&quot;,\n      &quot;sources&quot;: [ &quot;hello.cc&quot; ]\n    }\n  ]\n}\n</code></pre><blockquote>\n<p>ç¼–å†™æºä»£ç åï¼Œå¿…é¡»å°†å…¶ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶ addon.node æ–‡ä»¶ã€‚ ä¸ºæ­¤ï¼Œè¯·åœ¨é¡¹ç›®çš„é¡¶å±‚åˆ›å»ºåä¸º binding.gyp çš„æ–‡ä»¶ï¼Œä½¿ç”¨ç±»ä¼¼ JSON çš„æ ¼å¼æè¿°æ¨¡å—çš„æ„å»ºé…ç½®ã€‚ è¯¥æ–‡ä»¶ç”± node-gyp ä½¿ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºç¼–è¯‘ Node.js æ’ä»¶è€Œç¼–å†™çš„å·¥å…·ã€‚</p>\n</blockquote>\n<h4>è¿è¡Œ node-gyp configure å‘½ä»¤</h4>\n<pre class=\"prettyprint\"><code>node-gyp configure\n</code></pre><blockquote>\n<p>åˆ›å»º binding.gyp æ–‡ä»¶åï¼Œä½¿ç”¨ node-gyp configure ä¸ºå½“å‰å¹³å°ç”Ÿæˆé€‚å½“çš„é¡¹ç›®æ„å»ºæ–‡ä»¶ã€‚ è¿™å°†åœ¨ build/ ç›®å½•ä¸­ç”Ÿæˆ Makefileï¼ˆåœ¨ Unix å¹³å°ä¸Šï¼‰æˆ– vcxproj æ–‡ä»¶ï¼ˆåœ¨ Windows ä¸Šï¼‰ã€‚</p>\n</blockquote>\n<h4>è¿è¡Œ node-gyp build å‘½ä»¤</h4>\n<pre class=\"prettyprint\"><code>node-gyp build\n</code></pre><blockquote>\n<p>æ¥ä¸‹æ¥ï¼Œè°ƒç”¨ node-gyp build å‘½ä»¤ç”Ÿæˆç¼–è¯‘åçš„ addon.node æ–‡ä»¶ã€‚ è¿™å°†è¢«æ”¾å…¥ build/Release/ ç›®å½•ã€‚</p>\n</blockquote>\n<h3>ä½¿ç”¨</h3>\n<blockquote>\n<p>æ„å»ºå®Œæˆåï¼Œå¯ä»¥é€šè¿‡å°† require() æŒ‡å‘æ„å»ºçš„ addon.node æ¨¡å—åœ¨ Node.js ä¸­ä½¿ç”¨äºŒè¿›åˆ¶æ’ä»¶</p>\n</blockquote>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; main.js\n\nconst addon = require(&#x27;.&#x2F;build&#x2F;Release&#x2F;addon&#x27;);\n\nconsole.log(addon.hello());\n&#x2F;&#x2F; æ‰“å°: &#x27;world&#x27;\n</code></pre><h2>å®ç°</h2>\n<p>å½“ä»£ç ä¸­ require çš„æ˜¯ç¼–è¯‘åçš„ c++ æ’ä»¶ .node æ–‡ä»¶æ—¶çš„å¤„ç†å‡½æ•°å¦‚ä¸‹</p>\n<ul>\n<li>å…¶ä¸»è¦çš„å®ç°ä¸º process.dlopen å‡½æ•°</li>\n<li>ä»£ç å¼€å§‹çš„ policy ä¸º Node.js åŒ…å«å¯¹åˆ›å»ºåŠ è½½ä»£ç çš„ç­–ç•¥çš„å®éªŒæ€§æ”¯æŒ, æ¯”å¦‚è¿è¡Œ node --experimental-policy=policy.json app.js, å…¶å…·ä½“ç”¨å¤„å¯ä»¥å‚è€ƒ <a href=\"http://nodejs.cn/latest-api/policy.html\">policy | Node.js API æ–‡æ¡£</a></li>\n</ul>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; lib&#x2F;internal&#x2F;modules&#x2F;cjs&#x2F;loader.js\n\nModule._extensions[&#x27;.node&#x27;] = function(module, filename) {\n  if (policy?.manifest) {\n    const content = fs.readFileSync(filename);\n    const moduleURL = pathToFileURL(filename);\n    policy.manifest.assertIntegrity(moduleURL, content);\n  }\n  &#x2F;&#x2F; Be aware this doesn&#x27;t use &#96;content&#96;\n  return process.dlopen(module, path.toNamespacedPath(filename));\n};\n</code></pre><h3>åŠ¨æ€é“¾æ¥</h3>\n<p>dlopen ä¸»è¦ç”¨äºåŠ¨æ€æ‰“å¼€ä¸€ä¸ª c++ æ’ä»¶æ–‡ä»¶ï¼Œè¿è¡Œå…¶ä»£ç , è¯´ dlopen ä¹‹å‰æˆ‘ä»¬å…ˆè¯´ä¸€ä¸‹åŠ¨æ€é“¾æ¥ã€‚</p>\n<h4>js é‡Œé¢çš„åŠ¨æ€</h4>\n<p>å¦‚æœæ‹¿ js æ¥ä¸¾ä¾‹çš„è¯, æ­£å¸¸è¿è¡Œä¸€ä¸ª js æ–‡ä»¶ç›´æ¥é€šè¿‡ script ç›´æ¥å¼•ç”¨äº¤ç»™æµè§ˆå™¨è¿è¡Œå³å¯ï¼Œä¸éœ€è¦é¢å¤–çš„å¹²é¢„ã€‚æ¯”å¦‚ä½ æƒ³åŠ¨æ€åŠ è½½è¿è¡Œä¸€ä¸ª js, å°±éœ€è¦å°è£…ä¸€ä¸ª dynamicImport æ–¹æ³•ï¼Œç­‰åˆ°å®é™…ä¼šè°ƒç”¨çš„æ—¶å€™æ‰å»åŠ¨æ€åŠ è½½è¿è¡Œï¼Œè¿™ä¸ª dynamicImport ç¨‹åºå¯èƒ½å°±æ˜¯é€šè¿‡ document.createElement(â€˜scriptâ€™) å»å®ç°</p>\n<h4>Cè¯­è¨€çš„é™æ€é“¾æ¥ä¸åŠ¨æ€é“¾æ¥</h4>\n<blockquote>\n<p>å†…å®¹æ¥è‡ª <a href=\"https://zhuanlan.zhihu.com/p/106781089\">Cè¯­è¨€çš„é™æ€é“¾æ¥ä¸åŠ¨æ€é“¾æ¥</a></p>\n</blockquote>\n<p>ä»€ä¹ˆæ˜¯é“¾æ¥ï¼Ÿ</p>\n<blockquote>\n<p>å¯¹äºåˆå­¦Cè¯­è¨€çš„æœ‹å‹ï¼Œå¯èƒ½å¯¹é“¾æ¥è¿™ä¸ªæ¦‚å¿µæœ‰ç‚¹é™Œç”Ÿï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ã€‚æˆ‘ä»¬çš„Cä»£ç ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºä¼šç»è¿‡å¦‚ä¸‹è¿‡ç¨‹ï¼š</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/23253540/127743223-40c7f667-7e07-4398-8c44-f5694fb387f8.png\" alt=\"image\"></p>\n<p>1ã€ä»€ä¹ˆæ˜¯é™æ€é“¾æ¥ï¼Ÿ</p>\n<blockquote>\n<p>é™æ€é“¾æ¥æ˜¯ç”±é“¾æ¥å™¨åœ¨é“¾æ¥æ—¶å°†åº“çš„å†…å®¹åŠ å…¥åˆ°å¯æ‰§è¡Œç¨‹åºä¸­çš„åšæ³•ã€‚é“¾æ¥å™¨æ˜¯ä¸€ä¸ªç‹¬ç«‹ç¨‹åºï¼Œå°†ä¸€ä¸ªæˆ–å¤šä¸ªåº“æˆ–ç›®æ ‡æ–‡ä»¶ï¼ˆå…ˆå‰ç”±ç¼–è¯‘å™¨æˆ–æ±‡ç¼–å™¨ç”Ÿæˆï¼‰é“¾æ¥åˆ°ä¸€å—ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºã€‚è¿™é‡Œçš„åº“æŒ‡çš„æ˜¯é™æ€é“¾æ¥åº“ï¼ŒWindowsä¸‹ä»¥.libä¸ºåç¼€ï¼ŒLinuxä¸‹ä»¥.aä¸ºåç¼€ã€‚</p>\n</blockquote>\n<p>2ã€ä»€ä¹ˆæ˜¯åŠ¨æ€é“¾æ¥ï¼Ÿ</p>\n<blockquote>\n<p>åŠ¨æ€é“¾æ¥ï¼ˆDynamic Linkingï¼‰ï¼ŒæŠŠé“¾æ¥è¿™ä¸ªè¿‡ç¨‹æ¨è¿Ÿåˆ°äº†è¿è¡Œæ—¶å†è¿›è¡Œï¼Œåœ¨å¯æ‰§è¡Œæ–‡ä»¶è£…è½½æ—¶æˆ–è¿è¡Œæ—¶ï¼Œç”±æ“ä½œç³»ç»Ÿçš„è£…è½½ç¨‹åºåŠ è½½åº“ã€‚è¿™é‡Œçš„åº“æŒ‡çš„æ˜¯åŠ¨æ€é“¾æ¥åº“ï¼ŒWindowsä¸‹ä»¥.dllä¸ºåç¼€ï¼ŒLinuxä¸‹ä»¥.soä¸ºåç¼€ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨Windowsä¸‹çš„åŠ¨æ€é“¾æ¥ä¹Ÿå¯ä»¥ç”¨åˆ°.libä¸ºåç¼€çš„æ–‡ä»¶ï¼Œä½†è¿™é‡Œçš„.libæ–‡ä»¶å«åšå¯¼å…¥åº“ï¼Œæ˜¯ç”±.dllæ–‡ä»¶ç”Ÿæˆçš„ã€‚</p>\n</blockquote>\n<h3>DLOpen</h3>\n<p>DLOpen çš„å®ç°è¿‡ç¨‹ä¸»è¦ä¸ºå¦‚ä¸‹å‡ æ­¥ï¼Œåé¢æˆ‘ä»¬åœ¨è¯¦ç»†åˆ†æä¸€ä¸‹å…¶ä¸­é‡è¦çš„æ­¥éª¤</p>\n<ol>\n<li>å¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡Œäº†ä¸€äº›æ ¡éªŒï¼Œä¿å­˜ js ä¼ å…¥çš„ module å¯¹è±¡ï¼Œå¹¶æ£€æŸ¥éœ€è¦å­˜åœ¨ exports å±æ€§</li>\n<li>è°ƒç”¨ env-&gt;TryLoadAddon æ–¹æ³•æ¥è¯•å›¾åŠ è½½æ’ä»¶, TryLoadAddon å‡½æ•°ä¸»è¦æ˜¯è°ƒç”¨äº†ä¼ å…¥çš„å›è°ƒå‡½æ•°</li>\n<li>å›è°ƒå‡½æ•°ä¸€å¼€å§‹å°±è¿›è¡Œäº†ä¸Šé”æ“ä½œ Mutex::ScopedLock lock(dlib_load_mutex);</li>\n<li>ç„¶åè°ƒç”¨ dlib-&gt;Open() æ–¹æ³•è·å–åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶çš„å¥æŸ„</li>\n<li>ä¸Šä¸€æ­¥éª¤çš„ dlib-&gt;Open() ä¸€è¿è¡Œï¼Œc++ æ’ä»¶çš„ä»£ç å…¶å®å°±å·²ç»è¿è¡Œå®Œæ¯•ï¼Œå›é¡¾æˆ‘ä»¬ä¸Šé¢ä¾‹å­çš„ c++ æ’ä»¶ä»£ç ï¼Œå…¶ NODE_MODULE å®å°±ä¼šæ³¨å†Œè¯¥æ¨¡å—åˆ°å†…å­˜ä¸­äº†</li>\n<li>if (mp != nullptr) åˆ¤æ–­æ˜¯å¦å·²ç»é€šè¿‡ NODE_MODULE ä¸»åŠ¨æ³¨å†Œï¼Œè¿™æ ·ä¸€è¯´å…¶å®å¯ä»¥è‡ªåŠ¨åŠ¨æ³¨å†Œ</li>\n<li>å¦‚æœæ³¨å†ŒæˆåŠŸè°ƒç”¨ dlib-&gt;SaveInGlobalHandleMap ä¿å­˜ dlib-&gt;Open() è¿”å›çš„å¥æŸ„åˆ°å†…å­˜ä¸­</li>\n<li>å¦åˆ™é€šè¿‡ auto callback = GetInitializerCallback(dlib) è¿”å›å€¼æŸ¥çœ‹æ˜¯å¦å¯ä»¥è‡ªåŠ¨å¸®åŠ©ç”¨æˆ·æ³¨å†Œ</li>\n<li>dlib-&gt;Open() æ‰“å¼€è¿‡ç¨‹ç»“æŸï¼Œé€šè¿‡ Mutex::ScopedUnlock unlock(lock) è§£é”</li>\n<li>è°ƒç”¨ mp-&gt;nm_register_func å‡½æ•°å…¶å®æ˜¯ä¸Šé¢ c++ æ’ä»¶ä¾‹å­ä¸­ç”¨æˆ·ä¼ å…¥çš„ Initialize å‡½æ•°</li>\n</ol>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; src&#x2F;node_binding.cc\n\nvoid DLOpen(const FunctionCallbackInfo&lt;Value&gt;&amp; args) {\n  Environment* env = Environment::GetCurrent(args);\n  auto context = env-&gt;context();\n\n  CHECK_NULL(thread_local_modpending);\n\n  if (args.Length() &lt; 2) {\n    return THROW_ERR_MISSING_ARGS(\n        env, &quot;process.dlopen needs at least 2 arguments&quot;);\n  }\n\n  int32_t flags = DLib::kDefaultFlags;\n  if (args.Length() &gt; 2 &amp;&amp; !args[2]-&gt;Int32Value(context).To(&amp;flags)) {\n    return THROW_ERR_INVALID_ARG_TYPE(env, &quot;flag argument must be an integer.&quot;);\n  }\n\n  Local&lt;Object&gt; module;\n  Local&lt;Object&gt; exports;\n  Local&lt;Value&gt; exports_v;\n  if (!args[0]-&gt;ToObject(context).ToLocal(&amp;module) ||\n      !module-&gt;Get(context, env-&gt;exports_string()).ToLocal(&amp;exports_v) ||\n      !exports_v-&gt;ToObject(context).ToLocal(&amp;exports)) {\n    return;  &#x2F;&#x2F; Exception pending.\n  }\n\n  node::Utf8Value filename(env-&gt;isolate(), args[1]);  &#x2F;&#x2F; Cast\n  env-&gt;TryLoadAddon(*filename, flags, [&amp;](DLib* dlib) {\n    static Mutex dlib_load_mutex;\n    Mutex::ScopedLock lock(dlib_load_mutex);\n\n    const bool is_opened = dlib-&gt;Open();\n\n    &#x2F;&#x2F; Objects containing v14 or later modules will have registered themselves\n    &#x2F;&#x2F; on the pending list.  Activate all of them now.  At present, only one\n    &#x2F;&#x2F; module per object is supported.\n    node_module* mp = thread_local_modpending;\n    thread_local_modpending = nullptr;\n\n    if (!is_opened) {\n      std::string errmsg = dlib-&gt;errmsg_.c_str();\n      dlib-&gt;Close();\n#ifdef _WIN32\n      &#x2F;&#x2F; Windows needs to add the filename into the error message\n      errmsg += *filename;\n#endif  &#x2F;&#x2F; _WIN32\n      THROW_ERR_DLOPEN_FAILED(env, errmsg.c_str());\n      return false;\n    }\n\n    if (mp != nullptr) {\n      if (mp-&gt;nm_context_register_func == nullptr) {\n        if (env-&gt;force_context_aware()) {\n          dlib-&gt;Close();\n          THROW_ERR_NON_CONTEXT_AWARE_DISABLED(env);\n          return false;\n        }\n      }\n      mp-&gt;nm_dso_handle = dlib-&gt;handle_;\n      dlib-&gt;SaveInGlobalHandleMap(mp);\n    } else {\n      if (auto callback = GetInitializerCallback(dlib)) {\n        callback(exports, module, context);\n        return true;\n      } else if (auto napi_callback = GetNapiInitializerCallback(dlib)) {\n        napi_module_register_by_symbol(exports, module, context, napi_callback);\n        return true;\n      } else {\n        mp = dlib-&gt;GetSavedModuleFromGlobalHandleMap();\n        if (mp == nullptr || mp-&gt;nm_context_register_func == nullptr) {\n          dlib-&gt;Close();\n          char errmsg[1024];\n          snprintf(errmsg,\n                   sizeof(errmsg),\n                   &quot;Module did not self-register: &#x27;%s&#x27;.&quot;,\n                   *filename);\n          THROW_ERR_DLOPEN_FAILED(env, errmsg);\n          return false;\n        }\n      }\n    }\n\n    &#x2F;&#x2F; -1 is used for N-API modules\n    if ((mp-&gt;nm_version != -1) &amp;&amp; (mp-&gt;nm_version != NODE_MODULE_VERSION)) {\n      &#x2F;&#x2F; Even if the module did self-register, it may have done so with the\n      &#x2F;&#x2F; wrong version. We must only give up after having checked to see if it\n      &#x2F;&#x2F; has an appropriate initializer callback.\n      if (auto callback = GetInitializerCallback(dlib)) {\n        callback(exports, module, context);\n        return true;\n      }\n      char errmsg[1024];\n      snprintf(errmsg,\n               sizeof(errmsg),\n               &quot;The module &#x27;%s&#x27;&quot;\n               &quot;\\nwas compiled against a different Node.js version using&quot;\n               &quot;\\nNODE_MODULE_VERSION %d. This version of Node.js requires&quot;\n               &quot;\\nNODE_MODULE_VERSION %d. Please try re-compiling or &quot;\n               &quot;re-installing\\nthe module (for instance, using &#96;npm rebuild&#96; &quot;\n               &quot;or &#96;npm install&#96;).&quot;,\n               *filename,\n               mp-&gt;nm_version,\n               NODE_MODULE_VERSION);\n\n      &#x2F;&#x2F; NOTE: &#96;mp&#96; is allocated inside of the shared library&#x27;s memory, calling\n      &#x2F;&#x2F; &#96;dlclose&#96; will deallocate it\n      dlib-&gt;Close();\n      THROW_ERR_DLOPEN_FAILED(env, errmsg);\n      return false;\n    }\n    CHECK_EQ(mp-&gt;nm_flags &amp; NM_F_BUILTIN, 0);\n\n    &#x2F;&#x2F; Do not keep the lock while running userland addon loading code.\n    Mutex::ScopedUnlock unlock(lock);\n    if (mp-&gt;nm_context_register_func != nullptr) {\n      mp-&gt;nm_context_register_func(exports, module, context, mp-&gt;nm_priv);\n    } else if (mp-&gt;nm_register_func != nullptr) {\n      mp-&gt;nm_register_func(exports, module, mp-&gt;nm_priv);\n    } else {\n      dlib-&gt;Close();\n      THROW_ERR_DLOPEN_FAILED(env, &quot;Module has no declared entry point.&quot;);\n      return false;\n    }\n\n    return true;\n  });\n\n  &#x2F;&#x2F; Tell coverity that &#x27;handle&#x27; should not be freed when we return.\n  &#x2F;&#x2F; coverity[leaked_storage]\n}\n</code></pre><h3>env-&gt;TryLoadAddon</h3>\n<ol>\n<li>loaded_addons_.emplace_back å‘ loaded_addons_ é˜Ÿåˆ—å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´ </li>\n<li>è°ƒç”¨ä¼ å…¥çš„å›è°ƒå‡½æ•° was_loaded</li>\n<li>å¦‚æœ was_loaded å¤±è´¥åˆ™ loaded_addons_.pop_back ç§»é™¤å°¾éƒ¨çš„ä¸€ä¸ªå…ƒç´ </li>\n</ol>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; src&#x2F;env-inl.h\n\ninline void Environment::TryLoadAddon(\n    const char* filename,\n    int flags,\n    const std::function&lt;bool(binding::DLib*)&gt;&amp; was_loaded) {\n  loaded_addons_.emplace_back(filename, flags);\n  if (!was_loaded(&amp;loaded_addons_.back())) {\n    loaded_addons_.pop_back();\n  }\n}\n</code></pre><h3>dlib-&gt;Open</h3>\n<ol>\n<li>dlopen ä»¥æŒ‡å®šæ¨¡å¼æ‰“å¼€æŒ‡å®šçš„åŠ¨æ€è¿æ¥åº“æ–‡ä»¶ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¥æŸ„ç»™è°ƒç”¨è¿›ç¨‹</li>\n<li>dlerror è·å–å¯èƒ½ä¼šå‡ºç°çš„é”™è¯¯</li>\n</ol>\n<pre class=\"prettyprint\"><code>bool DLib::Open() {\n  handle_ = dlopen(filename_.c_str(), flags_);\n  if (handle_ != nullptr) return true;\n  errmsg_ = dlerror();\n  return false;\n}\n</code></pre><h3>æ’ä»¶çš„æ³¨å†Œ</h3>\n<p>è¿è¡Œå®Œä¸Šé¢çš„ dlib-&gt;Open å‡½æ•°ï¼Œç”¨æˆ·çš„ä»£ç ä¹Ÿè¢«åŠ è½½ä¸”è¿è¡Œäº†ï¼Œå¦‚åŒä¸Šé¢çš„ c++ æ’ä»¶ä¾‹å­ä¸­è°ƒç”¨ NODE_MODULE å®ä¸»è¦ç”¨äºæ³¨å†Œæ¨¡å—</p>\n<p>æ’ä»¶çš„æ³¨å†Œçš„å®ç°ä¸»è¦æ˜¯ node_module_register å‡½æ•°ï¼Œå…¶å®å°±æ˜¯å‘é“¾è¡¨ modlist_internal ä¸­æ’å…¥äº†ä¸€é¡¹æ•°æ®ï¼Œä½†æ˜¯ä¸‹é¢ NODE_C_CTOR å®èƒ½è®©æˆ‘ä»¬å­¦åˆ°ä¸å°‘çŸ¥è¯†</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; src&#x2F;node.h\n\n#define NODE_MODULE(modname, regfunc)                                 \\\n  NODE_MODULE_X(modname, regfunc, NULL, 0)  &#x2F;&#x2F; NOLINT (readability&#x2F;null_usage)\n  \n#define NODE_MODULE_X(modname, regfunc, priv, flags)                  \\\n  extern &quot;C&quot; {                                                        \\\n    static node::node_module _module =                                \\\n    {                                                                 \\\n      NODE_MODULE_VERSION,                                            \\\n      flags,                                                          \\\n      NULL,  &#x2F;* NOLINT (readability&#x2F;null_usage) *&#x2F;                    \\\n      __FILE__,                                                       \\\n      (node::addon_register_func) (regfunc),                          \\\n      NULL,  &#x2F;* NOLINT (readability&#x2F;null_usage) *&#x2F;                    \\\n      NODE_STRINGIFY(modname),                                        \\\n      priv,                                                           \\\n      NULL   &#x2F;* NOLINT (readability&#x2F;null_usage) *&#x2F;                    \\\n    };                                                                \\\n    NODE_C_CTOR(_register_ ## modname) {                              \\\n      node_module_register(&amp;_module);                                 \\\n    }                                                                 \\\n  }\n  \n#define NODE_C_CTOR(fn)                                               \\\n  NODE_CTOR_PREFIX void fn(void) __attribute__((constructor));        \\\n  NODE_CTOR_PREFIX void fn(void)\n  \n# define NODE_CTOR_PREFIX static\n</code></pre><h4>NODE_C_CTOR</h4>\n<p>NODE_C_CTOR å®è¿™æ®µå®ç°å¯æœ‰ç‚¹ä¼˜ç§€ï¼Œå…¶ä¸»è¦æ˜¯å£°æ˜äº†ä¸€ä¸ªåŠ¨æ€å‡½æ•° <em>register</em> ## modnameï¼Œå¹¶ä¸”ç«‹é©¬è°ƒç”¨äº† <em>register</em> ## modname å‡½æ•°ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºä¸‹é¢çš„ä¾‹å­, ä¾‹å­æ”¾åœ¨äº†è¯¥ git ä»“åº“ <a href=\"https://github.com/xiaoxiaojx/blog/blob/master/demo_NODE_C_CTOR.cpp\">demo_NODE_C_CTOR.cpp</a></p>\n<p>é€šè¿‡ NODE_C_CTOR å®å£°æ˜äº† <em>register</em> å‡½æ•°ï¼Œä¸”é€šè¿‡ <strong>attribute</strong>((constructor)) ä½¿å¾— <em>register</em> å‡½æ•° è¿è¡Œä¼šåœ¨ main å‡½æ•°ä¹‹å‰</p>\n<pre class=\"prettyprint\"><code>#include &lt;iostream&gt;\n\n# define NODE_CTOR_PREFIX static\n\n#define NODE_C_CTOR(fn)                                               \\\n  NODE_CTOR_PREFIX void fn(void) __attribute__((constructor));        \\\n  NODE_CTOR_PREFIX void fn(void)\n\nusing namespace std;\n\nNODE_C_CTOR(_register_) {                              \\\n    std::cout &lt;&lt; &quot;before main function&quot; &lt;&lt; std::endl;                               \\\n}\n\nint main()\n{\n  char site[] = &quot;Hello, world!&quot;;\n  cout &lt;&lt; site &lt;&lt; endl;\n  return 0;\n}\n</code></pre><h3>å¦‚æœä¸æ³¨å†Œ</h3>\n<h4>GetInitializerCallback</h4>\n<p>å¦‚æœç”¨æˆ·æ²¡æœ‰è°ƒç”¨ NODE_MODULE å®æ³¨å†Œ, å‘ç°ä¼šè¿›å…¥ auto callback = GetInitializerCallback(dlib) è¿™ä¸ªä»£ç é€»è¾‘</p>\n<ul>\n<li>ä¸‹é¢çš„ä»£ç  â€œnode_register_module_vâ€ STRINGIFY(NODE_MODULE_VERSION) åœ¨ c ä¸­å…¶å®æ˜¯ç›¸å½“äºä¸¤ä¸ªå­—ç¬¦ä¸²æ‹¼æ¥çš„æ„æ€, å¦‚æœ NODE_MODULE_VERSION çš„å€¼æ˜¯ 95ï¼Œ å˜é‡ name å³ç­‰äº node_register_module_v95</li>\n<li>dlsym å‡½æ•°ç›¸å½“äºè·å– c++ æ’ä»¶ä¸­çš„æŒ‡å®š name çš„åœ°å€å¼•ç”¨ï¼Œå³é€šè¿‡å¥æŸ„å’Œè¿æ¥ç¬¦åç§°è·å–å‡½æ•°åæˆ–è€…å˜é‡åã€‚</li>\n</ul>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; src&#x2F;node_binding.cc\n\ninline InitializerCallback GetInitializerCallback(DLib* dlib) {\n  const char* name = &quot;node_register_module_v&quot; STRINGIFY(NODE_MODULE_VERSION);\n  return reinterpret_cast&lt;InitializerCallback&gt;(dlib-&gt;GetSymbolAddress(name));\n}\n\nvoid* DLib::GetSymbolAddress(const char* name) {\n  return dlsym(handle_, name);\n}\n</code></pre><p>æ‰€ä»¥è¯´å¦‚æœç”¨æˆ·æ²¡æœ‰æ˜¾ç¤ºè°ƒç”¨ NODE_MODULE å®æ³¨å†Œï¼Œä¼šæŸ¥çœ‹ c++ æ’ä»¶ä¸­æ˜¯å¦æœ‰ node_register_module_v95 å‡½æ•°ï¼Œå¦‚æœæœ‰çš„è¯åˆ™ä¸»åŠ¨è°ƒç”¨è¯¥å‡½æ•°ï¼Œåé¢æ‰¾åˆ°äº†è¿™ä¸ª node å®ç°çš„ commit <a href=\"https://github.com/nodejs/node/commit/3828fc62\">3828fc62</a></p>\n<p>å¦‚æœä¸ç”¨ NODE_MODULE å®æ³¨å†Œåˆ™å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä¾‹å­å»å®ç°, ä¾‹å­æ”¾åœ¨äº†è¯¥ git ä»“åº“ <a href=\"https://github.com/xiaoxiaojx/blog/blob/master/demo_NODE_MODULE_INITIALIZER.cc\">demo_NODE_MODULE_INITIALIZER.cc</a></p>\n<pre class=\"prettyprint\"><code>#include &lt;node.h&gt;\n#include &lt;v8.h&gt;\n\nstatic void Method(const v8::FunctionCallbackInfo&lt;v8::Value&gt;&amp; args) {\n  v8::Isolate* isolate = args.GetIsolate();\n  args.GetReturnValue().Set(v8::String::NewFromUtf8(\n        isolate, &quot;world&quot;).ToLocalChecked());\n}\n\n&#x2F;&#x2F; NODE_MODULE_EXPORT å®ç­‰åŒäº __attribute__((visibility(&quot;default&quot;)))\n&#x2F;&#x2F; NODE_MODULE_INITIALIZER å®ç­‰åŒäº &quot;node_register_module_v&quot; STRINGIFY(NODE_MODULE_VERSION)\n\nextern &quot;C&quot; NODE_MODULE_EXPORT void\nNODE_MODULE_INITIALIZER(v8::Local&lt;v8::Object&gt; exports,\n                        v8::Local&lt;v8::Value&gt; module,\n                        v8::Local&lt;v8::Context&gt; context) {\n  NODE_SET_METHOD(exports, &quot;hello&quot;, Method);\n}\n</code></pre><p>å…¶å‡ºç°è¿™ç§æƒ…å†µçš„åŸå› ä¸º dlopen å¤šæ¬¡è¿è¡Œåé¢å°±ä¸ä¼šå†è¿è¡Œ c++ æ’ä»¶é‡Œé¢çš„ä»£ç ï¼Œç±»æ¯”äº node çš„ require æœºåˆ¶ï¼Œæ‰€ä»¥ NODE_MODULE å®ç¬¬äºŒæ¬¡ç›´æ¥å°±æ²¡æœ‰æ³¨å†Œï¼Œè€Œé€šè¿‡ NODE_MODULE_INITIALIZER å£°æ˜äº†ä¸€ä¸ªå‡½æ•°ï¼Œåé¢æ¯æ¬¡é€šè¿‡ dlsym è·å–åˆ°è¯¥å‡½æ•°å¼•ç”¨åœ°å€å»ä¸»åŠ¨è°ƒç”¨ä¸€æ¬¡è¯¥å‡½æ•°å°±å¥½äº†ï¼Œä¸‹é¢æ˜¯<a href=\"http://nodejs.cn/api/addons.html#addons_context_aware_addons\">å®˜ç½‘ | ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„æ’ä»¶</a> çš„è§£é‡Š</p>\n<blockquote>\n<p>åœ¨æŸäº›ç¯å¢ƒä¸­ï¼Œå¯èƒ½éœ€è¦åœ¨å¤šä¸ªä¸Šä¸‹æ–‡ä¸­å¤šæ¬¡åŠ è½½ Node.js æ’ä»¶ã€‚ ä¾‹å¦‚ï¼ŒElectron è¿è¡Œæ—¶åœ¨å•ä¸ªè¿›ç¨‹ä¸­è¿è¡Œå¤šä¸ª Node.js å®ä¾‹ã€‚ æ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„ require() ç¼“å­˜ï¼Œå› æ­¤å½“é€šè¿‡ require() åŠ è½½æ—¶ï¼Œæ¯ä¸ªå®ä¾‹éƒ½éœ€è¦åŸç”Ÿæ’ä»¶æ‰èƒ½æ­£ç¡®è¿è¡Œã€‚ è¿™æ„å‘³ç€æ’ä»¶å¿…é¡»æ”¯æŒå¤šä¸ªåˆå§‹åŒ–ã€‚\nå¯ä»¥ä½¿ç”¨å® NODE_MODULE_INITIALIZER æ„å»ºä¸Šä¸‹æ–‡æ„ŸçŸ¥æ’ä»¶ï¼Œè¯¥å®æ‰©å±•ä¸º Node.js åœ¨åŠ è½½æ’ä»¶æ—¶æœŸæœ›æ‰¾åˆ°çš„å‡½æ•°çš„åç§°ã€‚</p>\n</blockquote>\n<h4>GetNapiInitializerCallback</h4>\n<p>åœ¨ DLOpen å‡½æ•°ä¸­ GetInitializerCallback åè¿˜æœ‰å¦ä¸€ä¸ªåˆ†æ”¯é€»è¾‘ GetNapiInitializerCallback å‡½æ•°çš„è°ƒç”¨ï¼Œå…¶å®ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ç±»ä¼¼çš„, è¿™é‡Œçš„çœ‹å‡½æ•°åå­—åº”è¯¥æ˜¯ä¸º napi ç•™ä¸‹çš„å£å­</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; src&#x2F;node_binding.cc\n\ninline napi_addon_register_func GetNapiInitializerCallback(DLib* dlib) {\n  const char* name =\n      STRINGIFY(NAPI_MODULE_INITIALIZER_BASE) STRINGIFY(NAPI_MODULE_VERSION);\n  return reinterpret_cast&lt;napi_addon_register_func&gt;(\n      dlib-&gt;GetSymbolAddress(name));\n}\n</code></pre><p>napi æ’ä»¶çš„ä¾‹å­, ä»£ç æ”¾åœ¨äº†è¯¥ git ä»“åº“ <a href=\"https://github.com/xiaoxiaojx/blog/blob/master/demo_NAPI_MODULE_INIT.cc\">demo_NAPI_MODULE_INIT.cc</a></p>\n<pre class=\"prettyprint\"><code>#include &lt;assert.h&gt;\n#include &lt;node_api.h&gt;\n\n&#x2F;&#x2F; è°ƒç”¨ NAPI_MODULE_INIT æ³¨å†Œæ’ä»¶çš„ä¾‹å­\n\nstatic int32_t increment = 0;\n\nstatic napi_value Hello(napi_env env, napi_callback_info info) {\n  napi_value result;\n  napi_status status = napi_create_int32(env, increment++, &amp;result);\n  assert(status == napi_ok);\n  return result;\n}\n\nNAPI_MODULE_INIT() {\n  napi_value hello;\n  napi_status status =\n      napi_create_function(env,\n                           &quot;hello&quot;,\n                           NAPI_AUTO_LENGTH,\n                           Hello,\n                           NULL,\n                           &amp;hello);\n  assert(status == napi_ok);\n  status = napi_set_named_property(env, exports, &quot;hello&quot;, hello);\n  assert(status == napi_ok);\n  return exports;\n}\n</code></pre><h2>ä¼˜ç§€çš„æ’ä»¶æ¨è</h2>\n<p>èµ·å› æ˜¯è‡ªå·±å†™çš„ä¸€ä¸ª FaaS æ¥å£ï¼Œå½“å‰ qps åœ¨ 30 å·¦å³ï¼Œåœ¨ç›‘æ§ä¸Šå‘ç°ç³»ç»Ÿå†…å­˜æ˜¯éšç€æ—¶é—´ç¼“æ…¢ä¸Šå‡ ğŸ“ˆ, è¿™ä¸ªæ¥å£ \tqps é¢„æœŸå…¨é‡ä¼šè¾¾åˆ° 1000 å·¦å³ï¼Œç°åœ¨å°±æœ‰å†…å­˜æ³„æ¼å¯è¦èµ¶ç´§æ’æŸ¥å‡ºæ¥ !</p>\n<p>ä¸€å¼€å§‹æˆ‘çš„æƒ³æ³•æ˜¯åœ¨æ¥å£ä¸Šå¼€ä¸ªå£å­ï¼Œæ¯”å¦‚æŸ¥è¯¢çš„æ—¶å€™ url æ‹¼ä¸Šå‚æ•° get_v8_heapSnapshot å°±è¿”å›å½“å‰è¿›ç¨‹ v8 å †çš„å¿«ç…§ï¼Œéš”ä¸€æ®µæ—¶é—´æ‹‰å–å‡ æ¬¡æ¥å»åˆ†æ</p>\n<p>åé¢å‘ç°è‡ªåŠ¨æ¥å…¥äº† Easy-Monitor é‡Œé¢å°±èƒ½éå¸¸å¿«é€Ÿçš„æ»¡è¶³è¿™ä¸ªéœ€æ±‚, å¯ä»¥ç›´æ¥ç‚¹å‡» devtools åœ¨çº¿åˆ†æä¹Ÿèƒ½ä¸‹è½½åˆ°æœ¬åœ°åˆ†æå¿«ç…§\n<img src=\"https://user-images.githubusercontent.com/23253540/127746359-7b19f755-911f-41c6-a477-8f927e4ecaa2.png\" alt=\"image\"></p>\n<p>åé¢å¯¹æ¯”äº†å‡ ä¸ªä¸åŒæ—¶é—´çš„å¿«ç…§å‘ç°æ— æ˜æ˜¾å˜åŒ–ï¼Œçœ‹å †ç©ºé—´è¶‹åŠ¿å›¾ä¹Ÿæ— æ˜æ˜¾æ³¢åŠ¨ï¼Œç¡®è®¤ä¸ºç‰©ç†æœºå…¶ä»–è¿›ç¨‹ç¨‹åºæ‰€è‡´æ˜¯é¢„æœŸå†…çš„ï¼Œæˆ‘ä»¬çš„ node è¿›ç¨‹æ²¡æœ‰å†…å­˜æ³„æ¼\n<img src=\"https://user-images.githubusercontent.com/23253540/127746477-8ea2b3ef-935f-4339-9399-bd7427d1874e.png\" alt=\"image\"></p>\n<p>è¯¥ c++ æ’ä»¶çš„å®ç°åœ¨ <a href=\"https://github.com/X-Profiler/xprofiler\">X-Profiler/xprofiler</a> ä»“åº“, æ›´å¤šä»‹ç»è§æ–‡ç«  <a href=\"https://cnodejs.org/topic/5ee1ee83b703280f0bcb922a\">Easy-Monitor 3.0 å¼€æº - åŸºäº Addon çš„ Node.js æ€§èƒ½ç›‘æ§è§£å†³æ–¹æ¡ˆ</a>, ç®—æ˜¯æœ€ä½³å®è·µäº†, ç»™å¤§ä½¬ä»¬æ‰“ call ğŸ‘</p>\n<h2>å°ç»“</h2>\n<p>node ä¸­è¿è¡Œä¸€ä¸ª c++ æ’ä»¶çš„å®ç°ä¸»è¦æ˜¯åœ¨ DLOpen å‡½æ•°ä¸­ï¼ŒDLOpen æ ¸å¿ƒæ˜¯è°ƒç”¨äº†ä¸‹é¢å‡ ä¸ªå‡½æ•°</p>\n<blockquote>\n<p>å‡½æ•°ä»‹ç»æ¥è‡ªäºæ–‡ç«  <a href=\"https://www.cnblogs.com/anker/p/3746802.html\">é‡‡ç”¨dlopenã€dlsymã€dlcloseåŠ è½½åŠ¨æ€é“¾æ¥åº“</a></p>\n</blockquote>\n<pre class=\"prettyprint\"><code>#include &lt;dlfcn.h&gt;\n\n&#x2F;&#x2F; dlopenä»¥æŒ‡å®šæ¨¡å¼æ‰“å¼€æŒ‡å®šçš„åŠ¨æ€è¿æ¥åº“æ–‡ä»¶\nvoid *dlopen(const char *filename, int flag);\n\n&#x2F;&#x2F; dlerrorè¿”å›å‡ºç°çš„é”™è¯¯\nchar *dlerror(void);\n\n&#x2F;&#x2F; dlsymé€šè¿‡å¥æŸ„å’Œè¿æ¥ç¬¦åç§°è·å–å‡½æ•°åæˆ–è€…å˜é‡å\nvoid *dlsym(void *handle, const char *symbol);\n\n&#x2F;&#x2F; dlcloseæ¥å¸è½½æ‰“å¼€çš„åº“\nint dlclose(void *handle);\n</code></pre></div>",
      "title": "NodeJs C++ æ’ä»¶çš„å®ç°",
      "last_reply_at": "2021-08-02T16:46:19.093Z",
      "good": false,
      "top": false,
      "reply_count": 6,
      "visit_count": 457,
      "create_at": "2021-07-31T17:53:59.705Z",
      "author": {
        "loginname": "xiaoxiaojx",
        "avatar_url": "https://avatars.githubusercontent.com/u/23253540?v=4&s=120"
      }
    },
    {
      "id": "60e2e45aba7460ad8d862567",
      "author_id": "60e2e2ccba7460203986255b",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p><a href=\"https://www.bilibili.com/video/BV1hM4y1u7B4\"><img src=\"//static.cnodejs.org/Fh6glLHJh9_kScZjSM0LPj3UpxAC\" alt=\"image.png\"></a>\n<strong>â†‘â†‘â†‘ å…¨ç¨‹ 110 åˆ†é’Ÿå¹²è´§åˆ†äº«è§†é¢‘ â†‘â†‘â†‘</strong></p>\n<h2>TSRPC æ˜¯ä»€ä¹ˆ</h2>\n<p>TSRPC æ˜¯ä¸€ä¸ª TypeScript çš„ RPC æ¡†æ¶ï¼Œé€‚ç”¨äºæµè§ˆå™¨ Web åº”ç”¨ã€WebSocket å®æ—¶åº”ç”¨ã€NodeJS å¾®æœåŠ¡ç­‰åœºæ™¯ã€‚\næ˜¯ç›®å‰ä¸–ç•Œä¸Šå”¯ä¸€æ”¯æŒ TypeScript å¤æ‚ç±»å‹è¿è¡Œæ—¶æ£€æµ‹å’ŒäºŒè¿›åˆ¶åºåˆ—åŒ–çš„ RPC æ¡†æ¶</p>\n<p>ä¸­æ–‡æ–‡æ¡£ï¼š<a href=\"https://tsrpc.cn\">https://tsrpc.cn</a>\nGitHubï¼š<a href=\"https://github.com/k8w/tsrpc\">https://github.com/k8w/tsrpc</a>\nè§†é¢‘æ•™ç¨‹ï¼š<a href=\"https://www.bilibili.com/video/BV1hM4y1u7B4\">https://www.bilibili.com/video/BV1hM4y1u7B4</a></p>\n<p>ç›®å‰ï¼Œå¤§å¤šæ•°é¡¹ç›®ä»åœ¨ä½¿ç”¨ä¼ ç»Ÿçš„ Restful API è¿›è¡Œå‰åç«¯é€šä¿¡ï¼Œè¿™å­˜åœ¨ä¸€äº›ç—›ç‚¹ã€‚</p>\n<ol>\n<li>ä¾èµ–æ–‡æ¡£è¿›è¡Œåè®®å®šä¹‰ï¼Œå‰åç«¯è”è°ƒå¸¸è¢«ä½çº§é”™è¯¯å›°æ‰°ï¼ˆå¦‚å­—æ®µåå¤§å°å†™é”™è¯¯ï¼Œå­—æ®µç±»å‹é”™è¯¯ç­‰ï¼‰ã€‚</li>\n<li>ä¸€äº›æ¡†æ¶è™½ç„¶å®ç°äº†åè®®å®šä¹‰è§„èŒƒï¼Œä½†éœ€è¦å¼•å…¥ <a href=\"https://www.typescriptlang.org/docs/handbook/decorators.html#decorators\">Decorator</a> æˆ–ç¬¬ä¸‰æ–¹ IDL è¯­è¨€ã€‚</li>\n<li>ä¸€äº›æ¡†æ¶è™½ç„¶å®ç°äº†ç±»å‹æ ¡éªŒï¼Œä½†æ— æ³•æ”¯æŒ TypeScript çš„é«˜çº§ç±»å‹ï¼Œä¾‹å¦‚ä¸šåŠ¡ä¸­å¸¸è§çš„ <a href=\"https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types\">Union Type</a>ï¼š</li>\n</ol>\n<pre class=\"prettyprint language-ts\"><code>&#x2F;&#x2F; ç”¨æˆ·ä¿¡æ¯\ninterface UserInfo {\n  &#x2F;&#x2F; æ¥æºæ¸ é“\n  from: { type: &#x27;è€ç”¨æˆ·é‚€è¯·&#x27;, fromUserId: string }\n    | { type: &#x27;æ¨å¹¿é“¾æ¥&#x27;, url: string }\n    | { type: &#x27;ç›´æ¥è¿›å…¥&#x27; },\n  &#x2F;&#x2F; æ³¨å†Œæ—¶é—´\n  createTime: Date\n}\n</code></pre><ol>\n<li>JSON æ”¯æŒçš„ç±»å‹æœ‰é™ï¼Œä¾‹å¦‚ä¸æ”¯æŒ <code>ArrayBuffer</code>ï¼Œå®ç°æ–‡ä»¶ä¸Šä¼ ä¼šéå¸¸éº»çƒ¦ã€‚</li>\n<li>è¯·æ±‚å’Œå“åº”éƒ½æ˜¯æ˜æ–‡ï¼Œç ´è§£é—¨æ§›å¤ªä½ï¼Œå­—ç¬¦ä¸²åŠ å¯†æ–¹å¼æœ‰é™ä¸”å¼ºåº¦ä¸å¤Ÿã€‚</li>\n<li>ç­‰ç­‰â€¦</li>\n</ol>\n<p>æˆ‘ä»¬æ— æ³•æ‰¾åˆ°ä¸€ä¸ªèƒ½å®Œç¾è§£å†³è¿™äº›é—®é¢˜çš„ç°æˆæ¡†æ¶ï¼Œäºæ˜¯æˆ‘ä»¬å…¨æ–°è®¾è®¡å’Œåˆ›é€ äº† <strong>TSRPC</strong> ã€‚</p>\n<h2>æ¦‚è§ˆ</h2>\n<p>ä¸€ä¸ªåä¸º <code>Hello</code> çš„åè®®ï¼Œä»å®šä¹‰ã€å®ç°åˆ°æµè§ˆå™¨è°ƒç”¨ã€‚</p>\n<h3>åè®®å®šä¹‰</h3>\n<p>ç›´æ¥ä½¿ç”¨ <code>type</code> æˆ– <code>interface</code> å®šä¹‰åè®®ï¼Œæ— éœ€ Decorator å’Œç¬¬ä¸‰æ–¹ IDL è¯­è¨€ã€‚</p>\n<pre class=\"prettyprint language-ts\"><code>export interface ReqHello {\n  name: string;\n}\n\nexport interface ResHello {\n  reply: string;\n}\n</code></pre><h3>æœåŠ¡ç«¯å®ç°</h3>\n<p>è¿è¡Œæ—¶è‡ªåŠ¨æ ¡éªŒç±»å‹ï¼Œè¯·æ±‚å‚æ•°ä¸€å®šç±»å‹å®‰å…¨ã€‚</p>\n<pre class=\"prettyprint language-ts\"><code>import { ApiCall } from &quot;tsrpc&quot;;\n\nexport async function ApiHello(call: ApiCall&lt;ReqHello, ResHello&gt;) {\n  call.succ({\n    reply: &#x27;Hello, &#x27; + call.req.name\n  });\n}\n</code></pre><h3>å®¢æˆ·ç«¯è°ƒç”¨</h3>\n<p>è·¨é¡¹ç›®å¤ç”¨åè®®å®šä¹‰ï¼Œå…¨ç¨‹ä»£ç æç¤ºï¼Œä¸éœ€è¦æ¥å£æ–‡æ¡£ã€‚</p>\n<pre class=\"prettyprint language-ts\"><code>let ret = await client.callApi(&#x27;Hello&#x27;, {\n    name: &#x27;World&#x27;\n});\nconsole.log(ret); &#x2F;&#x2F; { isSucc: true, res: { reply: &#x27;Hello, World&#x27; } }\n</code></pre><p><img src=\"//static.cnodejs.org/FlCzOaoeVOyuFpf5G14FtEw09s7X\" alt=\"code-hint.gif\"></p>\n<h2>ç‰¹æ€§</h2>\n<p>TSRPC å…·æœ‰ä¸€äº›å‰æ‰€æœªæœ‰çš„å¼ºå¤§ç‰¹æ€§ï¼Œç»™æ‚¨å¸¦æ¥æè‡´çš„å¼€å‘ä½“éªŒã€‚</p>\n<ul>\n<li>ğŸ¥¤ <strong>åŸæ±åŸå‘³ TypeScript</strong>\n<ul>\n<li>ç›´æ¥åŸºäº TypeScript <code>type</code> å’Œ <code>interface</code> å®šä¹‰åè®®</li>\n<li>æ— éœ€é¢å¤–æ³¨é‡Šï¼Œæ— éœ€ Decoratorï¼Œæ— éœ€ç¬¬ä¸‰æ–¹ IDL è¯­è¨€</li>\n</ul>\n</li>\n<li>ğŸ‘“ <strong>è‡ªåŠ¨ç±»å‹æ£€æŸ¥</strong>\n<ul>\n<li>åœ¨ç¼–è¯‘æ—¶åˆ»å’Œè¿è¡Œæ—¶åˆ»ï¼Œè‡ªåŠ¨è¿›è¡Œè¾“å…¥è¾“å‡ºçš„ç±»å‹æ£€æŸ¥</li>\n<li>æ€»æ˜¯ç±»å‹å®‰å…¨ï¼Œæ”¾å¿ƒç¼–å†™ä¸šåŠ¡ä»£ç </li>\n</ul>\n</li>\n<li>ğŸ’¾ <strong>äºŒè¿›åˆ¶åºåˆ—åŒ–</strong>\n<ul>\n<li>æ¯” JSON æ›´å°çš„ä¼ è¾“ä½“ç§¯</li>\n<li>æ¯” JSON æ›´å¤šçš„æ•°æ®ç±»å‹ï¼šå¦‚ <code>Date</code>, <code>ArrayBuffer</code>, <code>Uint8Array</code> ç­‰</li>\n<li>æ–¹ä¾¿åœ°å®ç°äºŒè¿›åˆ¶åŠ å¯†</li>\n</ul>\n</li>\n<li>ğŸ”¥ <strong>å²ä¸Šæœ€å¼ºå¤§çš„ TypeScript åºåˆ—åŒ–ç®—æ³•</strong>\n<ul>\n<li>æ— éœ€ä»»ä½•æ³¨è§£ï¼Œç›´æ¥å®ç°å°† TypeScript æºç ä¸­çš„ç±»å‹å®šä¹‰åºåˆ—åŒ–</li>\n<li>é¦–ä¸ªä¹Ÿæ˜¯ç›®å‰å”¯ä¸€æ”¯æŒ TypeScript é«˜çº§ç±»å‹çš„äºŒè¿›åˆ¶åºåˆ—åŒ–ç®—æ³•ï¼ŒåŒ…æ‹¬ï¼š\n<ul>\n<li><a href=\"https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types\">Union Type</a></li>\n<li><a href=\"https://www.typescriptlang.org/docs/handbook/2/objects.html#intersection-types\">Intersection Type</a></li>\n<li><a href=\"https://www.typescriptlang.org/docs/handbook/utility-types.html#picktype-keys\">Pick Type</a></li>\n<li><a href=\"https://www.typescriptlang.org/docs/handbook/utility-types.html#partialtype\">Partial Type</a></li>\n<li><a href=\"https://www.typescriptlang.org/docs/handbook/2/indexed-access-types.html\">Indexed Access Types</a></li>\n<li>ç­‰ç­‰</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>â˜ <strong>å¤šåè®®</strong>\n<ul>\n<li>åŒæ—¶æ”¯æŒ HTTP / WebSocket</li>\n</ul>\n</li>\n<li>ğŸ’» <strong>å¤šå¹³å°</strong>\n<ul>\n<li>NodeJS / æµè§ˆå™¨ / App / å°ç¨‹åº</li>\n</ul>\n</li>\n<li>âš¡ï¸ <strong>é«˜æ€§èƒ½</strong>\n<ul>\n<li>å•æ ¸å•è¿›ç¨‹ 5000+ QPS ååé‡ï¼ˆæµ‹è¯•äº Macbook Air M1, 2020)</li>\n<li>å•å…ƒæµ‹è¯•ã€å‹åŠ›æµ‹è¯•ã€DevOps æ–¹æ¡ˆé½å¤‡</li>\n<li>ç»è¿‡æ•°ä¸ªåƒä¸‡ç”¨æˆ·çº§é¡¹ç›®éªŒè¯</li>\n</ul>\n</li>\n</ul>\n<h2>å…¼å®¹æ€§</h2>\n<p>å®Œå…¨å¯ä»¥åœ¨ Server ç«¯ä½¿ç”¨ TSRPCï¼ŒåŒæ—¶å…¼å®¹ä¼ ç»Ÿå‰ç«¯ã€‚</p>\n<ul>\n<li><strong>å…¼å®¹ JSON å½¢å¼çš„ Restful API è°ƒç”¨</strong>\n<ul>\n<li>å¯è‡ªè¡Œä½¿ç”¨ <code>XMLHttpRequest</code>ã€<code>fetch</code> æˆ–å…¶å®ƒ AJAX æ¡†æ¶ä»¥ JSON æ–¹å¼è°ƒç”¨æ¥å£</li>\n</ul>\n</li>\n<li><strong>å…¼å®¹çº¯ JavaScript çš„é¡¹ç›®ä½¿ç”¨</strong>\n<ul>\n<li>å¯åœ¨çº¯ JavaScript é¡¹ç›®ä¸­ä½¿ç”¨ TSRPC Clientï¼Œä¹Ÿèƒ½äº«å—ç±»å‹æ£€æŸ¥å’Œåºåˆ—åŒ–ç‰¹æ€§</li>\n</ul>\n</li>\n<li><strong>å…¼å®¹ Internet Explorer 10 æµè§ˆå™¨</strong>\n<ul>\n<li>æµè§ˆå™¨ç«¯å…¼å®¹è‡³ IE 10 ï¼ŒChrome 30</li>\n</ul>\n</li>\n</ul>\n<h2>è¿è¡Œæ—¶ç±»å‹æ£€æµ‹çš„å®ç°åŸç†</h2>\n<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒTypeScript çš„ç±»å‹æ£€æµ‹ä»…å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶åˆ»ï¼Œè¿™æ˜¯å› ä¸ºç±»å‹ä¿¡æ¯ï¼ˆå¦‚ <code>type</code>ã€<code>interface</code>ï¼‰ä¼šåœ¨ç¼–è¯‘æ—¶åˆ»è¢«æŠ¹é™¤ã€‚è€Œ TSRPC ç«Ÿç„¶èƒ½åœ¨è¿è¡Œæ—¶åˆ»ä¹Ÿæ£€æµ‹è¿™äº›è¢«æŠ¹é™¤çš„ç±»å‹ä¿¡æ¯ï¼Ÿ\nå†µä¸” TypeScript ç¼–è¯‘å™¨æœ‰å¤§å‡  MBï¼Œè€Œ TSRPC æ‰å‡ å KBâ€¦â€¦</p>\n<p>å…¶å®ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬éµå¾ª TypeScript ç±»å‹ç³»ç»Ÿï¼Œç‹¬ç«‹å®ç°äº†ä¸€å¥—è½»é‡çš„ç±»å‹ç³»ç»Ÿï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶å®Œæˆç±»å‹æ£€æµ‹ï¼Œç”šè‡³æ˜¯äºŒè¿›åˆ¶åºåˆ—åŒ–ã€‚å®ƒæ”¯æŒäº†ç»å¤§å¤šæ•°å¸¸ç”¨çš„ TypeScript ç±»å‹ã€‚</p>\n<p><a href=\"https://tsrpc.cn/docs/tsrpc-inside/supported-types\">æ”¯æŒçš„ç±»å‹æ¸…å•</a></p>\n<h2>ä¸Šæ‰‹è¯•è¯•</h2>\n<p>ä½¿ç”¨ <code>create-tsrpc-app</code> å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿåˆ›å»º TSRPC é¡¹ç›®ã€‚</p>\n<pre class=\"prettyprint language-shell\"><code>npx create-tsrpc-app@latest\n</code></pre><p>åˆ›å»ºè¿‡ç¨‹æ˜¯äº¤äº’å¼çš„ï¼Œåœ¨èœå•ä¸Šé€‰æ‹©ç›¸åº”çš„é…ç½®ï¼Œå³å¯è½»æ¾åˆ›å»ºåŒ…å«å‰åç«¯çš„ TSRPC å…¨æ ˆåº”ç”¨é¡¹ç›®ã€‚</p>\n<p><img src=\"//static.cnodejs.org/Fs3Tg6Fa-wBoVRjowCUojIDxd42P\" alt=\"create-tsrpc-app.gif\"></p>\n<p>å¦‚æœä½ é€‰æ‹©åˆ›å»º <strong>HTTP çŸ­è¿æ¥æœåŠ¡</strong>ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªç•™è¨€æ¿çš„æ¼”ç¤ºé¡¹ç›®ï¼›å¦‚æœé€‰æ‹© <strong>WebSocket é•¿è¿æ¥æœåŠ¡</strong>ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªå®æ—¶èŠå¤©å®¤çš„æ¼”ç¤ºé¡¹ç›®ã€‚</p>\n<h2>å‚è€ƒèµ„æ–™</h2>\n<p>GitHubï¼š<a href=\"https://github.com/k8w/tsrpc\">https://github.com/k8w/tsrpc</a>\nä¸­æ–‡æ–‡æ¡£ï¼š<a href=\"https://tsrpc.cn\">https://tsrpc.cn</a>\nè§†é¢‘æ•™ç¨‹ï¼š<a href=\"https://www.bilibili.com/video/BV1hM4y1u7B4\">https://www.bilibili.com/video/BV1hM4y1u7B4</a></p>\n</div>",
      "title": "[å…¨ç¨‹å¹²è´§] TSRPC å’Œ TypeScript å…¨æ ˆå¼€å‘å®è·µï¼šå‰åç«¯å…±äº«ä»£ç  / è¿è¡Œæ—¶ç±»å‹æ£€æµ‹ / äºŒè¿›åˆ¶åºåˆ—åŒ–",
      "last_reply_at": "2021-08-02T16:27:48.793Z",
      "good": false,
      "top": false,
      "reply_count": 16,
      "visit_count": 4125,
      "create_at": "2021-07-05T10:52:10.504Z",
      "author": {
        "loginname": "k8w",
        "avatar_url": "https://avatars.githubusercontent.com/u/1681689?v=4&s=120"
      }
    },
    {
      "id": "6103633da5d29d1d9f2d372b",
      "author_id": "5cab188c7edd13064e05363f",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>åœ¨nå°æœºå™¨çš„æƒ…å†µä¸‹è²Œä¼¼å¤šè¿›ç¨‹æ•ˆæœæ›´ä½³ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æ˜¯å•çº¿ç¨‹ï¼Œä¸ç”¨è€ƒè™‘é”ï¼Œè¿›ç¨‹é—´å…±äº«çš„é”åæ­£éƒ½å¾—ç¬¬ä¸‰æ–¹ã€‚ã€‚è¿˜ä½•å¿…å¼€å¤šä¸ªçº¿ç¨‹è¿˜å¾—åœ¨è¿›ç¨‹å†…å¤„ç†çº¿ç¨‹é”å‘¢ã€‚ã€‚\nå¤šè¿›ç¨‹ä»£è¡¨ï¼šnginx nodejs php\nå¤šçº¿ç¨‹ä»£è¡¨ï¼šjava go</p>\n</div>",
      "title": "å¤šçº¿ç¨‹orå¤šè¿›ç¨‹",
      "last_reply_at": "2021-08-02T15:52:00.691Z",
      "good": false,
      "top": false,
      "reply_count": 7,
      "visit_count": 402,
      "create_at": "2021-07-30T02:26:05.989Z",
      "author": {
        "loginname": "ganshiqingyuan",
        "avatar_url": "https://avatars.githubusercontent.com/u/33950951?v=4&s=120"
      }
    },
    {
      "id": "6103ac7aa5d29d44e72d39d5",
      "author_id": "6103ac21a5d29d57b82d39ca",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>Blocking is when the execution of additional JavaScript in the Node.js process must wait until a non-JavaScript operation completes. This happens because the event loop is unable to continue running JavaScript while a blocking operation is occurring.</p>\n</div>",
      "title": "Node.js å®˜æ–¹å…³äºéé˜»å¡çš„æ–‡æ¡£ä¸­ï¼Œaddtional javascript æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Œæœ‰æ²¡æœ‰å®ä¾‹ï¼Ÿ",
      "last_reply_at": "2021-08-02T09:24:22.505Z",
      "good": false,
      "top": false,
      "reply_count": 2,
      "visit_count": 330,
      "create_at": "2021-07-30T07:38:34.196Z",
      "author": {
        "loginname": "sdutwsl",
        "avatar_url": "https://avatars.githubusercontent.com/u/28350570?v=4&s=120"
      }
    },
    {
      "id": "607799714d20cbc44d68c484",
      "author_id": "5c81f15090c14711cc8cb87e",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><h3>ä¸€ã€Serverlessç›¸å…³çš„æ¦‚å¿µ</h3>\n<p>Serverlessåˆåæ— æœåŠ¡å™¨,æ‰€è°“æ— æœåŠ¡å™¨å¹¶éæ˜¯è¯´ä¸éœ€è¦ä¾èµ–å’Œä¾é æœåŠ¡å™¨ç­‰èµ„æº,è€Œæ˜¯å¼€å‘è€…å†ä¹Ÿä¸ç”¨è¿‡å¤šè€ƒè™‘æœåŠ¡å™¨çš„é—®é¢˜,å¯ä»¥æ›´ä¸“æ³¨åœ¨äº§å“ä»£ç ä¸Šã€‚</p>\n<p><strong>Serverlessç›¸å…³è§†é¢‘æ•™ç¨‹</strong>ï¼š<a href=\"https://www.bilibili.com/video/BV12h411Q7wz?p=2\">https://www.bilibili.com/video/BV12h411Q7wz?p=2</a></p>\n<p>Serverlessæ˜¯ä¸€ç§è½¯ä»¶ç³»ç»Ÿæ¶æ„çš„æ€æƒ³å’Œæ–¹æ³•ï¼Œå®ƒä¸æ˜¯è½¯ä»¶æ¡†æ¶ã€ç±»åº“æˆ–è€…å·¥å…·ã€‚å®ƒä¸ä¼ ç»Ÿæ¶æ„çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®Œå…¨ç”±ç¬¬ä¸‰æ–¹ç®¡ç†ï¼Œç”±äº‹ä»¶è§¦å‘ï¼Œå­˜åœ¨äºæ— çŠ¶æ€ï¼ˆStatelessï¼‰ã€æš‚å­˜ï¼ˆå¯èƒ½åªå­˜åœ¨äºä¸€æ¬¡è°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼‰è®¡ç®—å®¹å™¨å†…ã€‚æ„å»ºæ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºæ„å‘³ç€å¼€å‘è€…å¯ä»¥ä¸“æ³¨åœ¨äº§å“ä»£ç ä¸Šï¼Œè€Œæ— é¡»ç®¡ç†å’Œæ“ä½œäº‘ç«¯æˆ–æœ¬åœ°çš„æœåŠ¡å™¨æˆ–è¿è¡Œæ—¶ï¼ˆè¿è¡Œæ—¶é€šä¿—çš„è®²å°±æ˜¯è¿è¡Œç¯å¢ƒï¼Œæ¯”å¦‚nodejsç¯å¢ƒï¼Œjavaç¯å¢ƒï¼Œphpç¯å¢ƒï¼‰ã€‚ServerlessçœŸæ­£åšåˆ°äº†éƒ¨ç½²åº”ç”¨æ— éœ€æ¶‰åŠåŸºç¡€è®¾æ–½çš„å»ºè®¾ï¼Œè‡ªåŠ¨æ„å»ºã€éƒ¨ç½²å’Œå¯åŠ¨æœåŠ¡ã€‚</p>\n<p><strong>é€šä¿—çš„è®²ï¼š</strong>  Serverless æ˜¯æ„å»ºå’Œè¿è¡Œè½¯ä»¶æ—¶ä¸éœ€è¦å…³å¿ƒæœåŠ¡å™¨çš„ä¸€ç§æ¶æ„æ€æƒ³ã€‚è€ç¨‹åºå‘˜éƒ½ç”¨è¿‡è™šæ‹Ÿä¸»æœºï¼Œåˆšå¼€å§‹å­¦Serverless ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºè™šæ‹Ÿä¸»æœºçš„å‡çº§ç‰ˆæœ¬ã€‚\n<img src=\"//static.cnodejs.org/FrQYaZ4ed16DDtoKnmfMeyAR6cay\" alt=\"å›¾ç‰‡1.png\"></p>\n<p>è™šæ‹Ÿä¸»æœºå·²ç»æ˜¯å¿«è¢«æ·˜æ±°æ‰çš„ä¸Šä¸€ä»£äº§ç‰©äº†ã€‚äº‘è®¡ç®—æ¶Œç°å‡ºå¾ˆå¤šæ”¹å˜ä¼ ç»ŸITæ¶æ„å’Œè¿ç»´æ–¹å¼çš„æ–°æŠ€æœ¯ï¼Œæ¯”å¦‚è™šæ‹Ÿæœºã€å®¹å™¨ã€å¾®æœåŠ¡ï¼Œæ— è®ºè¿™äº›æŠ€æœ¯åº”ç”¨åœ¨å“ªäº›åœºæ™¯ï¼Œé™ä½æˆæœ¬ã€æå‡æ•ˆç‡æ˜¯äº‘æœåŠ¡æ°¸æ’çš„ä¸»é¢˜ã€‚Serverlessçš„å‡ºç°çœŸæ­£çš„è§£å†³äº†é™ä½æˆæœ¬ã€æå‡æ•ˆç‡çš„é—®é¢˜ã€‚å®ƒçœŸæ­£åšåˆ°äº†å¼¹æ€§ä¼¸ç¼©ã€é«˜å¹¶å‘ã€æŒ‰éœ€æ”¶è´¹ã€å¤‡ä»½å®¹ç¾ã€æ—¥å¿—ç›‘æ§ç­‰ã€‚</p>\n<h3>äºŒã€ä¼ ç»Ÿæ¨¡å¼å’ŒServerLessæ¨¡å¼ä¸‹é¡¹ç›®å¼€å‘ä¸Šçº¿æµç¨‹</h3>\n<p><strong>ä¼ ç»Ÿæ¨¡å¼</strong></p>\n<p><img src=\"//static.cnodejs.org/FkAKf0N_-FFBJeLkfHAIRIGRaHWB\" alt=\"å›¾ç‰‡2.png\"></p>\n<p><strong>Serverlessæ¨¡å¼</strong></p>\n<p><img src=\"//static.cnodejs.org/FujjnTbCFWxsoRWvYvswpvsjvIYQ\" alt=\"å›¾ç‰‡3.png\"></p>\n<p>Serverless æ­£åœ¨æ”¹å˜æœªæ¥è½¯ä»¶å¼€å‘çš„æ¨¡å¼å’Œæµç¨‹\n<img src=\"//static.cnodejs.org/Fo0An9-HSBIKZzNJSYGnPVFmRD4A\" alt=\"å›¾ç‰‡4.png\"></p>\n<h3>ä¸‰ã€Serverless å’ŒServerFulæ¶æ„çš„åŒºåˆ«</h3>\n<p><strong>1ã€ä¼ ç»Ÿçš„ServerFul æ¶æ„æ¨¡å¼</strong>\nServerFul æ¶æ„å°±æ˜¯ n å° Server é€šè¿‡ ç½‘ç»œé€šä¿¡ çš„ æ–¹å¼ åä½œåœ¨ä¸€èµ·ï¼Œä¹Ÿå¯ä»¥è¯´ ServerFul æ¶æ„æ˜¯åŸºäº Serverå’Œ ç½‘ç»œé€šä¿¡ï¼ˆåˆ†å¸ƒå¼è®¡ç®—ï¼‰ çš„ è½¯ä»¶å®ç°æ¶æ„ ï¼Œ Server å¯ä»¥æ˜¯ è™šæ‹Ÿæœº ç‰©ç†æœº ï¼Œä»¥åŠåŸºäºç¡¬ä»¶å®ç°çš„äº‘çš„äº‘æœåŠ¡å™¨ã€‚\n<img src=\"//static.cnodejs.org/FtT0j6_rKqbHrH016dakycYIanzS\" alt=\"å›¾ç‰‡5.png\"></p>\n<p><strong>2ã€Serverless  æ¶æ„æ¨¡å¼</strong></p>\n<p>Serverless çš„æ ¸å¿ƒç‰¹ç‚¹å°±æ˜¯å®ç°è‡ªåŠ¨å¼¹æ€§ä¼¸ç¼©å’ŒæŒ‰é‡ä»˜è´¹ã€‚\n<img src=\"//static.cnodejs.org/FnQRSZtlryaZQzuzlosJ0FDO2WxH\" alt=\"å›¾ç‰‡6.png\"></p>\n<p><strong>ç›¸æ¯”ServerLesç›¸æ¯”ServerFul æœ‰ä¸‹é¢ä¸€äº›ç‰¹ç‚¹ï¼š</strong></p>\n<p><strong>èµ„æºåˆ†é…ï¼š</strong> åœ¨ Serverless æ¶æ„ä¸­ï¼Œä½ ä¸ç”¨å…³å¿ƒåº”ç”¨è¿è¡Œçš„èµ„æºï¼ˆæ¯”å¦‚æœåŠ¡é…ç½®ã€ç£ç›˜å¤§å°ï¼‰åªæä¾›ä¸€ä»½ä»£ç å°±è¡Œã€‚</p>\n<p><strong>è®¡è´¹æ–¹å¼ï¼š</strong> åœ¨ Serverless æ¶æ„ä¸­ï¼Œè®¡è´¹æ–¹å¼æŒ‰å®é™…ä½¿ç”¨é‡è®¡è´¹ï¼ˆæ¯”å¦‚å‡½æ•°è°ƒç”¨æ¬¡æ•°ã€è¿è¡Œæ—¶é•¿ï¼‰ï¼Œä¸æŒ‰ä¼ ç»Ÿçš„æ‰§è¡Œä»£ç æ‰€éœ€çš„èµ„æºè®¡è´¹ï¼ˆæ¯”å¦‚å›ºå®š CPUï¼‰ã€‚è®¡è´¹ç²’åº¦ä¹Ÿç²¾ç¡®åˆ°äº†æ¯«ç§’çº§ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„å°æ—¶çº§åˆ«ã€‚ä¸ªåˆ«äº‘å‚å•†æ¨å‡ºäº†æ¯ä¸ªæœˆçš„å…è´¹é¢åº¦ï¼Œæ¯”å¦‚è…¾è®¯äº‘æä¾›äº†æ¯ä¸ªæœˆ40ä¸‡GBsçš„èµ„æºä½¿ç”¨é¢åº¦å’Œ100ä¸‡æ¬¡è°ƒç”¨æ¬¡æ•°çš„å…è´¹é¢åº¦ã€‚ä¸­å°ä¼ä¸šçš„ç½‘ç«™è®¿é—®é‡ä¸æ˜¯ç‰¹åˆ«å¤§çš„è¯å®Œå…¨å¯ä»¥å…è´¹ä½¿ç”¨ã€‚</p>\n<p><strong>å¼¹æ€§ä¼¸ç¼©</strong>ï¼š Serverless æ¶æ„çš„å¼¹æ€§ä¼¸ç¼©æ›´è‡ªåŠ¨åŒ–ã€æ›´ç²¾ç¡®ï¼Œå¯ä»¥å¿«é€Ÿæ ¹æ®ä¸šåŠ¡å¹¶å‘æ‰©å®¹æ›´å¤šçš„å®ä¾‹ï¼Œç”šè‡³å…è®¸ç¼©å®¹åˆ°é›¶å®ä¾‹çŠ¶æ€æ¥å®ç°é›¶è´¹ç”¨ï¼Œå¯¹ç”¨æˆ·æ¥è¯´æ˜¯å®Œå…¨æ— æ„ŸçŸ¥çš„ã€‚è€Œä¼ ç»Ÿæ¶æ„å¯¹æœåŠ¡å™¨ï¼ˆè™šæ‹Ÿæœºï¼‰è¿›è¡Œæ‰©å®¹ï¼Œè™šæ‹Ÿæœºçš„å¯åŠ¨é€Ÿåº¦ä¹Ÿæ¯”è¾ƒæ…¢ï¼Œéœ€è¦å‡ åˆ†é’Ÿç”šè‡³æ›´ä¹…ã€‚</p>\n<p>Serverlessç›¸å…³è§†é¢‘æ•™ç¨‹ï¼š<a href=\"https://www.bilibili.com/video/BV12h411Q7wz?p=2\">https://www.bilibili.com/video/BV12h411Q7wz?p=2</a></p>\n</div>",
      "title": "Serverlessä»Šå¹´ä¼šç«å—ï¼Ÿ",
      "last_reply_at": "2021-08-01T23:32:24.457Z",
      "good": false,
      "top": false,
      "reply_count": 35,
      "visit_count": 7081,
      "create_at": "2021-04-15T01:40:01.543Z",
      "author": {
        "loginname": "phonegap100",
        "avatar_url": "https://avatars.githubusercontent.com/u/5773766?v=4&s=120"
      }
    },
    {
      "id": "60f58c8ae3e67138bc58eacc",
      "author_id": "5a051be2ee9b35da75a869f7",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><blockquote>\n<p>hi, all ğŸ™‹â€â™‚ï¸  æœ¬ç¯‡ä¸»è¦æ˜¯åœ¨ä¸Šä¸€ç¯‡ <a href=\"https://cnodejs.org/topic/60c909ba248d047d8f4ad419\">NodeJs æºç å­¦ä¹ ç¬”è®°</a> çš„åŸºç¡€ä¸Š<s>æ¢äº†ä¸€ä¸ªå¸…æ°”çš„æ’ç‰ˆä¸æ¸…æ™°çš„ç›®å½•ç»“æ„</s> <strong>å¢åŠ äº†ä¸€å€çš„æ–‡ç« </strong> ğŸ¶ æ¥ä¸‹æ¥ä¼šä¿æŒå‘¨æ›´çš„èŠ‚å¥ï¼Œç»§ç»­æ·±å…¥å­¦ä¹ ä¸è®²è§£ NodeJs æ ¸å¿ƒæ¨¡å—çš„å®ç°ï¼Œæ„Ÿå…´è¶£çš„å¤§ä½¬ä»¬å¯ä»¥ star ğŸŒŸ <a href=\"https://github.com/xiaoxiaojx/blog\">github</a> ğŸŒŸæ”¯æŒ, è°¢è°¢é˜…è¯» ã€‚</p>\n</blockquote>\n<p><img src=\"https://nodejs.org/static/images/logo-light.svg\" alt></p>\n<p>è®°å½•ä¸€äº› Node.js ç›¸å…³çš„å­¦ä¹ ç¬”è®° ğŸ“ , To be continued ğŸš€</p>\n<h3>Node.js ç›®å½•</h3>\n<blockquote>\n<p>Node.js ç›¸å…³ä»‹ç»åŠåŸºç¡€å¯å…ˆé˜…è¯» <a href=\"http://nodejs.cn/learn\">å®˜ç½‘ Node.js å…¥é—¨æ•™ç¨‹</a>, æ ¸å¿ƒæ¨¡å—çš„ä½¿ç”¨åŠæ–‡æ¡£å¯å…ˆé˜…è¯» <a href=\"http://nodejs.cn/api/\">API æ–‡æ¡£ | Node.js ä¸­æ–‡ç½‘</a></p>\n</blockquote>\n<ol>\n<li>\n<p>è¿è¡Œæµç¨‹ ( c++, js æºç å®ç°éƒ¨åˆ† )</p>\n<ol>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/13\">lib æ¨¡å—è¿è¡Œ</a></li>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/14\">c++ æ’ä»¶è¿è¡Œ</a></li>\n</ol>\n</li>\n<li>\n<p>lib æ¨¡å— ( js æºç å®ç°éƒ¨åˆ† )</p>\n<ol>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/8\">buffer ç¼“å­˜åŒº</a></li>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/7\">cluster é›†ç¾¤</a></li>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/10\">stream å¯è¯»æµ</a></li>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/11\">stream å¯å†™æµ</a></li>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/12\">stream åŒå·¥æµã€è½¬æ¢æµã€é€ä¼ æµç­‰</a></li>\n</ol>\n</li>\n<li>\n<p>æ ¸å¿ƒæ¨¡å— ( c, c++, js æºç å®ç°éƒ¨åˆ† )</p>\n<ol>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/4\">å¾®ä»»åŠ¡</a></li>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/9\">llhttp æŠ¥æ–‡è§£æ</a></li>\n</ol>\n</li>\n<li>\n<p>libuv ( c æºç å®ç°éƒ¨åˆ† )</p>\n<ol>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/1\">äº‹ä»¶å¾ªç¯</a></li>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/2\">çº¿ç¨‹æ± ä¸i/o</a></li>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/3\">å­è¿›ç¨‹ä¸ipc</a></li>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/5\">ä¿¡å·</a></li>\n<li><a href=\"https://github.com/xiaoxiaojx/blog/issues/6\">ç½‘ç»œä¸æµ</a></li>\n</ol>\n</li>\n</ol>\n</div>",
      "title": "æ·±å…¥å­¦ä¹  NodeJs ç³»åˆ—",
      "last_reply_at": "2021-07-31T17:41:14.603Z",
      "good": false,
      "top": false,
      "reply_count": 9,
      "visit_count": 1416,
      "create_at": "2021-07-19T14:30:34.846Z",
      "author": {
        "loginname": "xiaoxiaojx",
        "avatar_url": "https://avatars.githubusercontent.com/u/23253540?v=4&s=120"
      }
    },
    {
      "id": "545249abd0c2f0fe2f533ad6",
      "author_id": "544475344ca29a4d4c08c331",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>rt</p>\n</div>",
      "title": "è¯·æ•™å¤§ç¥ä»¬ï¼Œéƒ½æ€ä¹ˆå®ç°â€˜ç§‘å­¦ä¸Šç½‘â€™æ’’",
      "last_reply_at": "2021-07-30T08:46:22.538Z",
      "good": false,
      "top": false,
      "reply_count": 27,
      "visit_count": 11096,
      "create_at": "2014-10-30T14:22:35.923Z",
      "author": {
        "loginname": "iamnotblank",
        "avatar_url": "https://avatars1.githubusercontent.com/u/6949176?v=4&s=120"
      }
    },
    {
      "id": "5433d5e4e737cbe96dcef312",
      "author_id": "504c28a2e2b845157708cb61",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>GitHub repo åœ°å€ï¼š<a href=\"https://github.com/alsotang/node-lessons\">https://github.com/alsotang/node-lessons</a></p>\n<p>å¦‚æœå¤§å®¶è®¤ä¸ºæ¼äº†å“ªäº›åˆå­¦è€…åº”ä¼šçš„å†…å®¹ï¼Œå¯ä»¥åœ¨æ­¤ç•™è¨€ï¼Œæˆ–è€…å¼€ä¸ª issue ç»™æˆ‘ï¼ˆ!!æ¨èï¼‰ã€‚</p>\n<hr>\n<h1>ã€ŠNode.js åŒ…æ•™ä¸åŒ…ä¼šã€‹ â€“ by alsotang</h1>\n<h1>ä¸ºä½•å†™ä½œæ­¤è¯¾ç¨‹</h1>\n<p>åœ¨ CNode(<a href=\"https://cnodejs.org/\">https://cnodejs.org/</a>) æ··äº†é‚£ä¹ˆä¹…ï¼Œè§£ç­”äº†ä¸å°‘ Node.js åˆå­¦è€…ä»¬çš„é—®é¢˜ã€‚å›å¤´æƒ³æƒ³ï¼Œé‚£äº›é—®é¢˜æ‰€éœ€è¦çš„æ€è·¯éƒ½ä¸éš¾ï¼Œä½†å¤§éƒ¨åˆ†äººç”±äºç»ƒæ‰‹æœºä¼šå°‘ï¼Œæ‰€ä»¥åœ¨é‡åˆ°é—®é¢˜çš„æ—¶å€™å¾ˆæ— æªã€‚å›½å†…å”¯ä¸€ä¸€æœ¬æ’çš„ä¸Šå·çš„ Node.js ä¹¦æ˜¯ @æœ´çµ(<a href=\"https://github.com/JacksonTian\">https://github.com/JacksonTian</a>) çš„ ã€Šæ·±å…¥æµ…å‡ºNode.jsã€‹(<a href=\"http://book.douban.com/subject/25768396/\">http://book.douban.com/subject/25768396/</a> )ï¼Œä½†è¿™æœ¬ä¹¦ç¦»å®æˆ˜è¿˜æ˜¯æ¯”è¾ƒè¿œçš„ã€‚</p>\n<p>è¿™ä¸ªè¯¾ç¨‹æ˜¯å¸Œæœ›æä¾›æ›´å¤šçš„ Node.js å®æˆ˜æœºä¼šï¼Œé€šè¿‡æ¯ä¸€èŠ‚ç²¾å¿ƒå®‰æ’çš„è¯¾ç¨‹ç›®æ ‡ï¼Œè®© Node.js çš„åˆå­¦è€…ä»¬å¯ä»¥å¾ªåºæ¸è¿›åœ°ï¼Œæœ‰ç›®çš„æœ‰æŒ‘æˆ˜åœ°å¼€å±• Node.js çš„å­¦ä¹ ã€‚</p>\n<p>æ›´å¤š Node.js å…¥é—¨èµ„æ–™è¯·å‰å¾€ï¼š<a href=\"https://cnodejs.org/getstart\">https://cnodejs.org/getstart</a></p>\n<h1>è¯¾ç¨‹åˆ—è¡¨</h1>\n<ul>\n<li>Lesson 0: <a href=\"https://github.com/alsotang/node-lessons/tree/master/lesson0\">ã€Šæ­å»º Node.js å¼€å‘ç¯å¢ƒã€‹</a></li>\n<li>Lesson 1: <a href=\"https://github.com/alsotang/node-lessons/tree/master/lesson1\">ã€Šä¸€ä¸ªæœ€ç®€å•çš„ express åº”ç”¨ã€‹</a></li>\n<li>Lesson 2: <a href=\"https://github.com/alsotang/node-lessons/tree/master/lesson2\">ã€Šå­¦ä¹ ä½¿ç”¨å¤–éƒ¨æ¨¡å—ã€‹</a></li>\n<li>Lesson 3: <a href=\"https://github.com/alsotang/node-lessons/tree/master/lesson3\">ã€Šä½¿ç”¨ superagent ä¸ cheerio å®Œæˆç®€å•çˆ¬è™«ã€‹</a></li>\n<li>Lesson 4: <a href=\"https://github.com/alsotang/node-lessons/tree/master/lesson4\">ã€Šä½¿ç”¨ eventproxy æ§åˆ¶å¹¶å‘ã€‹</a></li>\n<li>Lesson 5: <a href=\"https://github.com/alsotang/node-lessons/tree/master/lesson5\">ã€Šä½¿ç”¨ async æ§åˆ¶å¹¶å‘ã€‹</a></li>\n<li>Lesson 6: <a href=\"https://github.com/alsotang/node-lessons/tree/master/lesson6\">ã€Šæµ‹è¯•ç”¨ä¾‹ï¼šmochaï¼Œshouldï¼Œistanbulã€‹</a></li>\n<li>Lesson 7: ã€Šæµ‹è¯•ç”¨ä¾‹ï¼šsupertestã€‹</li>\n<li>Lesson 8: ã€ŠMongodb ä¸ Mongoose çš„ä½¿ç”¨ã€‹</li>\n<li>Lesson 9: ã€Šä¸€ä¸ªç®€å•çš„ blogã€‹</li>\n</ul>\n<h1>License</h1>\n<p>MIT</p>\n</div>",
      "title": "ä¸€ä¸ªé¢å‘ Node.js åˆå­¦è€…çš„ç³»åˆ—è¯¾ç¨‹ï¼šnode-lessons",
      "last_reply_at": "2021-07-29T07:59:46.155Z",
      "good": true,
      "top": false,
      "reply_count": 102,
      "visit_count": 166967,
      "create_at": "2014-10-07T12:00:36.270Z",
      "author": {
        "loginname": "alsotang",
        "avatar_url": "https://avatars.githubusercontent.com/u/1147375?v=4&s=120"
      }
    },
    {
      "id": "60fa8b50e3e671f5de58f30e",
      "author_id": "5a607b3d9288dc8153287f54",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>æ‰¾ä¸åˆ°å¹´ä»½æ¯”è¾ƒæ–°çš„ä¹¦ç±ï¼Œæœ‰äº›ä¹¦æ˜¯ä»¥phpä¸ºä¸»çš„ï¼Œæ‰€ä»¥å‰æ¥æé—®ã€‚</p>\n</div>",
      "title": "è¯·é—®å¤§å®¶å¼€å‘nodejså¾®ä¿¡å…¬ä¼—å·å’Œå‰ç«¯å¾®ä¿¡å…¬ä¼—å·æ—¶ï¼Œå¦‚ä½•å»å…¥æ‰‹æŒæ¡è¿™äº›çŸ¥è¯†çš„å‘¢",
      "last_reply_at": "2021-07-29T05:34:34.396Z",
      "good": false,
      "top": false,
      "reply_count": 5,
      "visit_count": 1035,
      "create_at": "2021-07-23T09:26:40.918Z",
      "author": {
        "loginname": "Choicelin",
        "avatar_url": "https://avatars.githubusercontent.com/u/10152588?v=4&s=120"
      }
    },
    {
      "id": "61023047a5d29d863c2d31dc",
      "author_id": "60e50164ba74605814862a73",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><h2>å‰è¨€</h2>\n<p>ä¸ºäº†è¿›ä¸€æ­¥æé«˜å¼€å‘å·¥ä½œæ•ˆç‡ï¼Œæœ€è¿‘æˆ‘ä»¬åŸºäº <code>electron</code> å¼€å‘äº†ä¸€æ¬¾åª²ç¾ <code>uTools</code> çš„å¼€æºå·¥å…·ç®± <a href=\"https://github.com/clouDr-f2e/rubick\">rubick</a>ã€‚è¯¥å·¥å…·ç®±ä¸ä»…ä»…å¼€æºï¼Œæœ€é‡è¦çš„æ˜¯å¯ä»¥ä½¿ç”¨ <code>uTools</code> ç”Ÿæ€å†…æ‰€æœ‰å¼€æºæ’ä»¶ï¼è¿™å°†æ˜¯å·¨å¤§çš„èƒ½åŠ›ï¼Œæ„å‘³ç€ <code>uTools</code> ç”Ÿæ€å†…æ‰€æœ‰æ’ä»¶å¯ä»¥æ— å·®å¼‚åŒ–ä½¿ç”¨åˆ°  <a href=\"https://github.com/clouDr-f2e/rubick\">rubick</a> ä¸­ã€‚</p>\n<p>è®¾è®¡äº¤äº’ä¸Šä¸ºäº†æ›´èƒ½æé«˜ç”¨æˆ·çš„ä½¿ç”¨æ•ˆç‡ï¼Œæˆ‘ä»¬åˆå°è¯•å»å®ç°äº† <code>uTools</code> ä¸­éå¸¸ä¼˜ç§€çš„ä¸€äº›è®¾è®¡ï¼Œæ¯”å¦‚ï¼š<strong>è¶…çº§é¢æ¿</strong>ã€‚è¯¥åŠŸèƒ½å¯ä»¥é€šè¿‡é¼ æ ‡å¿«é€Ÿå”¤èµ·<code>uTools</code> æ’ä»¶èƒ½åŠ›ï¼Œè€Œä¸ç”¨å†æ‰“å¼€åº”ç”¨ã€‚æ¯”å¦‚ä¸Šä¼ å›¾ç‰‡ï¼Œåªè¦æˆ‘ä»¬å®‰è£…äº†å›¾åºŠæ’ä»¶ï¼Œé‚£ä¹ˆå½“é¼ æ ‡é€‰æ‹©æ¡Œé¢ä¸ŠæŸå¼ å›¾ç‰‡æ—¶ï¼Œå³å¯å¿«é€Ÿå‘¼å‡ºä¸Šä¼ å›¾ç‰‡çš„èœå•é€‰é¡¹ï¼Œæ–¹ä¾¿çœäº‹ã€‚æ¥ä¸‹æ¥ä¸€èµ·çœ‹çœ‹å®ç°æ–¹å¼å§ï¼</p>\n<h3>ä»£ç ä»“åº“</h3>\n<p><a href=\"https://github.com/clouDr-f2e/rubick\">Rubick github</a></p>\n<h3>åŠŸèƒ½æˆªå›¾ï¼š</h3>\n<h4>æ–‡ä»¶å¤¹ä¸‹é•¿æŒ‰å³å»º</h4>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b3d6ea7a25b4b908acc471471628979~tplv-k3u1fbpfcp-watermark.image\" alt></p>\n<h4>é€‰æ‹©æ–‡ä»¶åé•¿æŒ‰å³é”®</h4>\n<p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8e220166cb464328b432f42d14ba9ab2~tplv-k3u1fbpfcp-watermark.image\" alt></p>\n<h4>é€‰æ‹©æ–‡å­—åé•¿æŒ‰å³é”®</h4>\n<p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f9f909d08a8441e8a506831796908ef9~tplv-k3u1fbpfcp-watermark.image\" alt></p>\n<h2>å®ç°åŸç†</h2>\n<h3>è·å–é€‰ä¸­æ–‡æ¡ˆ</h3>\n<p>è¦å®ç°æ”¹åŠŸèƒ½æ ¸å¿ƒæ˜¯è¦è¯»å–å½“å‰ç”¨æˆ·é€‰ä¸­çš„æ–‡æ¡ˆæˆ–è€…æ–‡ä»¶ï¼Œæ ¹æ®å½“å‰é€‰æ‹©å†…å®¹è¿›è¡Œä¸åŒåŠŸèƒ½å±•ç¤ºã€‚ä½†æ˜¯æ ¸å¿ƒæœ‰ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚ä½•æ¥å®ç°è·å–å½“å‰é€‰ä¸­çš„å†…å®¹ã€‚è¿™ä¸ªé—®é¢˜æ€è€ƒäº†å¾ˆä¹…å¾ˆä¹…ï¼Œè¦æƒ³è·å–é€‰ä¸­çš„æ–‡æ¡ˆï¼Œæ„Ÿè§‰å”¯ä¸€çš„åŠæ³•æ˜¯ä½¿ç”¨ <code>ctrl + c</code> æˆ–è€… <code>command + c</code> æ¥å…ˆå¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼Œå†é€šè¿‡ <code>electron clipboard</code> æ¥è·å–å½“å‰å‰ªåˆ‡æ¿å†…å®¹ã€‚ä½†æ˜¯ <code>utools</code> å¯ä¸æ˜¯é€šè¿‡å…ˆå¤åˆ¶å†é•¿æŒ‰è¿™æ ·çš„æ“ä½œæ¥å®ç°çš„ï¼Œè€Œæ˜¯ç›´æ¥é€‰ä¸­æ–‡æœ¬æˆ–è€…æ–‡ä»¶é•¿æŒ‰åå‘¼èµ·è¶…çº§é¢æ¿ã€‚<strong>æ‰€ä»¥ä¸€å®šè¦åœ¨å³å‡»é•¿æŒ‰å‰è·å–åˆ°å½“å‰é€‰ä¸­çš„å†…å®¹ã€‚</strong></p>\n<p>å¦‚æœè¦è¿™ä¹ˆå¹²ï¼Œå¯èƒ½çœŸçš„æ— è§£äº†ï¼Œä¹‹å‰å°±å› ä¸ºè¿™ä¹ˆæƒ³ï¼Œæ‰è¢«æ— è§£äº†ã€‚æ­£ç¡®çš„æ€è·¯åº”è¯¥æ˜¯å…ˆé•¿æŒ‰å†è·å–é€‰ä¸­çš„å†…å®¹ã€‚åˆ«çœ‹åªæ˜¯æ‰äº†ä¸ªä¸ªï¼Œä½†å®ç°ç¡®å®å¤©å£¤ä¹‹åˆ«ï¼š</p>\n<ol>\n<li>å…ˆè·å–é€‰ä¸­å†…å®¹ï¼šè¿™å°±è¦æ±‚æˆ‘ä»¬å¿…é¡»ç›‘å¬åŸç”Ÿç³»ç»Ÿé€‰ä¸­äº‹ä»¶ï¼Œä½†æ˜¯ <code>electron</code> å¹¶æ²¡æœ‰æä¾›èƒ½åŠ›ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•ç›‘å¬ç³»ç»Ÿé€‰æ‹©äº‹ä»¶ã€‚</li>\n<li>å…ˆå³å‡»ï¼Œåè·å–å†…å®¹ï¼Œè¿™æ ·çš„å¥½å¤„åœ¨äºå…ˆå³å‡»å¯ä»¥é€šè¿‡ç›‘å¬é¼ æ ‡å³å‡»äº‹ä»¶ï¼Œç›¸æ¯”é€‰æ‹©äº‹ä»¶æ›´åŠ å®¹æ˜“ã€‚</li>\n</ol>\n<p>æ‰€ä»¥æ€è·¯å°±æœ‰äº†ï¼Œå…ˆç›‘å¬é•¿æŒ‰å³å‡»äº‹ä»¶ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; macos\nconst mouseEvents = require(&quot;osx-mouse&quot;);\n\nconst mouseTrack = mouseEvents();\n&#x2F;&#x2F; æŒ‰ä¸‹å»çš„ time\nlet down_time = 0;\n\n&#x2F;&#x2F; æ˜¯å¦å¼¹èµ·\nlet isPress = false;\n\n&#x2F;&#x2F; ç›‘å¬å³å‡»\nmouseTrack.on(&#x27;right-down&#x27;, () =&gt; {\n    isPress = true;\n    down_time = Date.now();\n    &#x2F;&#x2F; é•¿æŒ‰ 500ms åè§¦å‘\n    setTimeout(async () =&gt; {\n      if (isPress) {\n        &#x2F;&#x2F; è·å–é€‰ä¸­å†…å®¹\n        const copyResult = await getSelectedText();\n    }, 500);\n})\nmouseTrack.on(&#x27;right-up&#x27;, () =&gt; {\n    isPress = false;\n});\n\n</code></pre><p>æ¥ä¸‹æ¥ä¸€æ­¥å°±æ˜¯è¦å»å®ç°è·å–é€‰ä¸­å†…å®¹ï¼Œè¦è·å–é€‰ä¸­å†…å®¹æœ‰ä¸ªæ¯”è¾ƒéªšçš„æ“ä½œï¼Œå°±æ˜¯ï¼š</p>\n<ol>\n<li>é€šè¿‡ <code>clipboard</code> å…ˆè·å–å½“å‰å‰ªåˆ‡æ¿å†…å®¹ï¼Œå¹¶å­˜ä¸‹ A</li>\n<li>é€šè¿‡ <code>robot.js</code> æ¥è°ƒç”¨ç³»ç»Ÿ <code>command + c</code> æˆ–è€… <code>ctrl + c</code></li>\n<li>å†é€šè¿‡ <code>clipboard</code> å…ˆè·å–å½“å‰å‰ªåˆ‡æ¿å†…å®¹ï¼Œå¹¶å­˜ä¸‹ B</li>\n<li>å†å°† A å†™åˆ°å‰ªåˆ‡æ¿ä¸­ï¼Œè¿”å› B</li>\n</ol>\n<p>å…ˆå­˜å‰ªåˆ‡æ¿å†…å®¹çš„ç›®çš„åœ¨äºæˆ‘ä»¬æ˜¯å·å·å¸®ç”¨æˆ·æ‰§è¡Œäº†å¤åˆ¶åŠ¨ä½œï¼Œå½“è¯»å–å®Œç”¨æˆ·é€‰æ‹©å†…å®¹åï¼Œéœ€è¦å›å¤ç”¨æˆ·ä¹‹å‰çš„å‰ªåˆ‡æ¿å†…å®¹ã€‚æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ç®€å•çš„å®ç°ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>const getSelected = () =&gt; {\n  return new Promise((resolve) =&gt; {\n    &#x2F;&#x2F; ç¼“å­˜ä¹‹å‰çš„æ–‡æ¡ˆ\n    const lastText = clipboard.readText(&#x27;clipboard&#x27;);\n\n    const platform = process.platform;\n    \n    &#x2F;&#x2F; æ‰§è¡Œå¤åˆ¶åŠ¨ä½œ\n    if (platform === &#x27;darwin&#x27;) {\n      robot.keyTap(&#x27;c&#x27;, &#x27;command&#x27;);\n    } else {\n      robot.keyTap(&#x27;c&#x27;, &#x27;control&#x27;);\n    }\n\n    setTimeout(() =&gt; {\n      &#x2F;&#x2F; è¯»å–å‰ªåˆ‡æ¿å†…å®¹\n      const text = clipboard.readText(&#x27;clipboard&#x27;) || &#x27;&#x27;\n      const fileUrl = clipboard.read(&#x27;public.file-url&#x27;);\n      \n      &#x2F;&#x2F; æ¢å¤å‰ªåˆ‡æ¿å†…å®¹\n      clipboard.writeText(lastText);\n\n      resolve({\n        text,\n        fileUrl\n      })\n    }, 300);\n  })\n}\n</code></pre><h3>é€šçŸ¥è¶…çº§é¢æ¿çª—å£å½“å‰é€‰ä¸­å†…å®¹</h3>\n<p>å½“è·å–åˆ°äº†é€‰ä¸­å†…å®¹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯éœ€è¦åˆ›å»ºè¶…çº§é¢æ¿çš„ <code>BrowserWindow</code>:</p>\n<pre class=\"prettyprint language-js\"><code>const { BrowserWindow, ipcMain, app } = require(&quot;electron&quot;);\n\nmodule.exports = () =&gt; {\n  let win;\n\n  let init = (mainWindow) =&gt; {\n    if (win === null || win === undefined) {\n      createWindow();\n    }\n  };\n\n  let createWindow = () =&gt; {\n    win = new BrowserWindow({\n      frame: false,\n      autoHideMenuBar: true,\n      width: 250,\n      height: 50,\n      show: false,\n      alwaysOnTop: true,\n      webPreferences: {\n        webSecurity: false,\n        enableRemoteModule: true,\n        backgroundThrottling: false,\n        nodeIntegration: true,\n        devTools: false,\n      },\n    });\n    win.loadURL(&#96;file:&#x2F;&#x2F;${__static}&#x2F;plugins&#x2F;superPanel&#x2F;index.html&#96;);\n    win.once(&#x27;ready-to-show&#x27;, () =&gt; win.show());\n    win.on(&quot;closed&quot;, () =&gt; {\n      win = undefined;\n    });\n  };\n\n  let getWindow = () =&gt; win;\n\n  return {\n    init: init,\n    getWindow: getWindow,\n  };\n};\n</code></pre><p>ç„¶åå†é€šçŸ¥ <code>superPanel</code> è¿›è¡Œå†…å®¹å±•ç¤ºï¼š</p>\n<pre class=\"prettyprint language-js\"><code> win.webContents.send(&#x27;trigger-super-panel&#x27;, {\n  ...copyResult,\n  optionPlugin: optionPlugin.plugins,\n});\n</code></pre><h3>è¶…çº§é¢æ¿ç‚¹å‡»æ“ä½œ</h3>\n<p>æ¥ä¸‹æ¥è¦å®ç°è¶…çº§é¢æ¿ç‚¹å‡»æ“ä½œï¼Œè¿™å—ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„äº†ï¼Œç›´æ¥ä¸Šä»£ç å¥½äº†ï¼š</p>\n<h4>1. æ‰“å¼€ Terminal</h4>\n<pre class=\"prettyprint language-js\"><code>const { spawn } = require (&#x27;child_process&#x27;);\n\nspawn(&#x27;open&#x27;, [ &#x27;-a&#x27;, &#x27;Terminal&#x27;, fileUrl ]);\n</code></pre><h4>2. æ–°å»ºæ–‡ä»¶</h4>\n<pre class=\"prettyprint language-js\"><code>remote.dialog.showSaveDialog({\n  title: &quot;è¯·é€‰æ‹©è¦ä¿å­˜çš„æ–‡ä»¶å&quot;,\n  buttonLabel: &quot;ä¿å­˜&quot;,\n  defaultPath: fileUrl.replace(&#x27;file:&#x2F;&#x2F;&#x27;, &#x27;&#x27;),\n  showsTagField: false,\n  nameFieldLabel: &#x27;&#x27;,\n}).then(result =&gt; {\n  fs.writeFileSync(result.filePath, &#x27;&#x27;);\n});\n</code></pre><h4>3. å¤åˆ¶è·¯å¾„</h4>\n<pre class=\"prettyprint language-js\"><code>clipboard.writeText(fileUrl.replace(&#x27;file:&#x2F;&#x2F;&#x27;, &#x27;&#x27;))\n</code></pre><h2>æœ€å</h2>\n<p>æœ¬ç¯‡ä¸»è¦ä»‹ç»å¦‚ä½•å®ç°ä¸€ä¸ªç±»ä¼¼äº utools çš„è¶…çº§é¢æ¿åŠŸèƒ½ï¼Œå½“ç„¶è¿™è¿œè¿œä¸æ˜¯ utools çš„å…¨éƒ¨ï¼Œä¸‹æœŸæˆ‘ä»¬å†ç»§ç»­ä»‹ç»å¦‚ä½•å®ç° utools å…¶ä»–èƒ½åŠ›ã€‚æ¬¢è¿å¤§å®¶å‰å¾€ä½“éªŒ <a href=\"https://github.com/clouDr-f2e/rubick\">Rubick</a> æœ‰é—®é¢˜å¯ä»¥éšæ—¶æ issue æˆ‘ä»¬ä¼šåŠæ—¶åé¦ˆã€‚</p>\n<p>å¦å¤–ï¼Œå¦‚æœè§‰å¾—è®¾è®¡å®ç°æ€è·¯å¯¹ä½ æœ‰ç”¨ï¼Œä¹Ÿæ¬¢è¿ç»™ä¸ª Starï¼š<a href=\"https://github.com/clouDr-f2e/rubick\">https://github.com/clouDr-f2e/rubick</a></p>\n</div>",
      "title": "åŸºäº Electron å®ç° uTools çš„è¶…çº§é¢æ¿",
      "last_reply_at": "2021-07-29T04:36:23.593Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 369,
      "create_at": "2021-07-29T04:36:23.593Z",
      "author": {
        "loginname": "muwoo",
        "avatar_url": "https://avatars.githubusercontent.com/u/21073039?v=4&s=120"
      }
    },
    {
      "id": "61000aaae3e671fbda58fc24",
      "author_id": "5b0bef9657137f22415c46de",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>åˆ†æè¿‡ç¨‹ï¼š</p>\n<ol>\n<li>æœåŠ¡å‹æµ‹çš„QPSä¸Šä¸å»ï¼Œé€šè¿‡å¯åŠ¨åŠ â€“profï¼Œæ‹¿åˆ°CPUprofileï¼Œ80%æ˜¯/lib/x86_64-linux-gnu/libc-2.19.so\tå¯¼è‡´çš„ï¼Œä½†æ˜¯ï¼Œå±•å¼€ååªæœ‰0.62æ˜¯/usr/local/nvm/versions/node/v12.13.1/bin/node\tå¯¼è‡´çš„ï¼Œæ²¡æœ‰å±•ç¤ºå‡ºå…¶ä»–å æ¯”æ¯”è¾ƒé«˜çš„åº“ã€‚</li>\n<li>é€šè¿‡Linux çš„perfå‘½ä»¤åˆ†æï¼Œæ‹¿åˆ°çš„ç«ç„°å›¾æ²¡æœ‰ä¸šåŠ¡ä»£ç ï¼Œéƒ½æ˜¯åº•å±‚ä»£ç </li>\n</ol>\n<p>æ˜¯æˆ‘åˆ†æçš„å§¿åŠ¿ä¸å¯¹å—ï¼Ÿå¤§å®¶æœ‰åˆ†æè¿‡ç«ç„°å›¾å—ï¼Ÿæ˜¯æ€ä¹ˆåˆ†æçš„ï¼Ÿ</p>\n</div>",
      "title": "å¤§å®¶æœ‰perfæ‹¿åˆ°çš„ç«ç„°å›¾åˆ†æç»éªŒå—",
      "last_reply_at": "2021-07-28T06:07:05.406Z",
      "good": false,
      "top": false,
      "reply_count": 1,
      "visit_count": 478,
      "create_at": "2021-07-27T13:31:22.211Z",
      "author": {
        "loginname": "LiuWeiMr",
        "avatar_url": "https://avatars.githubusercontent.com/u/17976666?v=4&s=120"
      }
    },
    {
      "id": "6100219ce3e6713f8e58fc77",
      "author_id": "60fce0cae3e671270858f5a9",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>åˆšçœ‹å®ŒReactçš„åŸºç¡€è§†é¢‘ï¼Œå®ç°äº†PCç‰ˆçš„ cNode</p>\n<p>æ¨¡ä»¿çš„æ˜¯çŸ¥ä¹çš„UI</p>\n<p>æ¬¢è¿ç‚¹å‡»ï¼Œæ¬¢è¿è®¨è®º~</p>\n<p><a href=\"https://kongkk.gitee.io\">https://kongkk.gitee.io</a></p>\n<p><a href=\"https://kongkk.gitee.io/\">PCç‰ˆ cNode</a>\n<img src=\"//static.cnodejs.org/FqNdH3bELle4u1obSXCD8XD-g_JT\" alt=\"image.png\"></p>\n</div>",
      "title": "åˆšå­¦äº†Reactï¼Œå®ç°äº†PCç‰ˆçš„ cNode ï¼Œæ¬¢è¿ç‚¹å‡»ï¼Œæ¬¢è¿è®¨è®º ~",
      "last_reply_at": "2021-07-28T04:02:32.866Z",
      "good": false,
      "top": false,
      "reply_count": 2,
      "visit_count": 507,
      "create_at": "2021-07-27T15:09:16.563Z",
      "author": {
        "loginname": "kaykong",
        "avatar_url": "https://avatars.githubusercontent.com/u/18086437?v=4&s=120"
      }
    },
    {
      "id": "575c0f3a2ad3c06f1aa3d5ed",
      "author_id": "56cd160ac045c3743304beec",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><ul>\n<li>åˆ«ç”¨å›½å†…ä»˜è´¹VPNæœåŠ¡ï¼Œ<strong>Greenå°±æ˜¯æ•™è®­</strong>ã€‚</li>\n<li>åˆ«æƒ³ç€â€œå…è´¹â€ï¼Œèƒ½ç”¨çš„ä»˜è´¹vpnå¾—èŠ±é’±ï¼Œä¸ä¾¿å®œï¼Œ<strong>ä¾¿å®œçš„æ ¹æœ¬æ²¡æ³•ç”¨</strong>ï¼Œå‡ åå—ä¸€å¹´çš„ç­‰äºæ™ºå•†ç¨ã€‚</li>\n<li><strong>æ²¡æœ‰100%ç¨³å®šé«˜é€Ÿçš„æœåŠ¡</strong>ï¼Œç‰¹æ®Šæ—¶æ®µï¼Œå³ä½¿ä»˜è´¹vpnä¹Ÿä¸èƒ½æ€»æ˜¯â€œé«˜é€Ÿç¨³å®šâ€ï¼Œåˆ«æŒ‡æœ›ä¸€å¹´365å¤©ä¸€å¤©24å°æ—¶éšæ—¶1080pæ²¹ç®¡ã€‚</li>\n<li>ä¸€çº¿å›½å¤–ä»˜è´¹VPNèƒ½ä¿è¯çš„æ˜¯â€œ<strong>è¾ƒå¥½</strong>â€çš„è¿é€šç‡å’Œé€Ÿåº¦ï¼Œä¸å®Œç¾ï¼Œä½†è‡³å°‘èƒ½ç”¨googleï¼Œgmailå’Œå¯æ¥å—çš„æ²¹ç®¡é€Ÿåº¦ï¼Œè¿™ä»æ˜¯ç›®å‰æœ€å¥½çš„æ–¹æ¡ˆã€‚</li>\n</ul>\n<p><strong>å›½å†…è¿˜èƒ½ç”¨æ”¯ä»˜å®ä¹°åˆ°</strong>çš„å›½å¤–ä»˜è´¹vpnæ¨èï¼š</p>\n<h2><a href=\"https://indx.cc/exp\">ExpressVPN</a></h2>\n<p>å…¨çƒ148+æœåŠ¡å™¨æ‰€åœ¨åœ° / æ— é™æµé‡ / å¤šåè®®ï¼ŒåŒ…æ‹¬openVPN / ä¸€é”®è¿æ¥ / åŒæ—¶3å°è®¾å¤‡ / 256-bit AESåŠ å¯† / æ”¯ä»˜å®æ”¯ä»˜ / æ”¯æŒè·¯ç”±å™¨è¿æ¥ / å®Œå…¨IPéšè— / é›¶æ—¥å¿— / å…¨ç»ˆç«¯è¦†ç›– / 30å¤©æ— æ¡ä»¶é€€æ¬¾ / Split tunnelingæŠ€æœ¯ + æµè§ˆå™¨æ’ä»¶ï¼ŒåŒæ—¶è®¿é—®å†…å¤–ç½‘ / <strong>é€Ÿåº¦ç›¸å¯¹æœ€å¿«</strong></p>\n<h2><a href=\"https://indx.cc/pandavpn\">ç†ŠçŒ«VPN</a></h2>\n<p><code>ç¼ºç‚¹ï¼šè¿è¥æ—¶é—´è¿˜æ¯”è¾ƒçŸ­ï¼Œåªæ”¯æŒåŒæ—¶3ä¸ªè¿æ¥ï¼Œä¸”ä¸æ”¯æŒè·¯ç”±å™¨å’ŒLinuxï¼Œç¼ºä¹è‡ªåŠ¨é‡è¿ç­‰èŒèƒ½åŠŸèƒ½ã€‚</code></p>\n<p>VPNçš„åèµ·ä¹‹ç§€ï¼Œæ­£åœ¨ä¿ƒé”€ï¼Œ<strong>ä¹°ä¸€å¹´é€ä¸€å¹´</strong>ï¼ŒæœåŠ¡å™¨äº²æµ‹å¯ç”¨ï¼Œè€Œä¸”å¾ˆå¿«ã€‚äº§å“è¿è¥æ—¶é—´è¿˜ä¸é•¿ï¼Œå¤„äºæ¨å¹¿é˜¶æ®µï¼Œä»·æ ¼ä¼˜æƒ å¹…åº¦å¾ˆå¤§ã€‚</p>\n<p>æ”¯æŒWindowsï¼ŒMacï¼ŒiOSï¼ŒAndroidå®¢æˆ·ç«¯ã€‚è¿æ¥VPNåªéœ€è¦ä¸€ä¸ªå¼€å…³å³å¯ã€‚ç•Œé¢æå…¶ç®€æ´ï¼ŒåŒæ—¶3å°è®¾å¤‡ï¼Œè¿™æ˜¯ä¸€ä¸ªè®©äººæƒŠå–œçš„å‘ç°ï¼Œæ”¯æŒæ™ºèƒ½åˆ†æµã€‚</p>\n<p><strong>è™½ç„¶ç†ŠçŒ«VPNè¿œæ²¡æœ‰ExpressVPNå¼ºå¤§ï¼Œå¦‚å®¢æˆ·ç«¯æ”¯æŒè¿œæ²¡æœ‰ExpressVPNä¸°å¯Œï¼ŒåŒæ—¶ä¹Ÿåªæ”¯æŒ3ä¸ªè¿æ¥ï¼Œå®˜æ–¹ä¹Ÿä¸æŠ«éœ²æ—¥å¿—æ”¿ç­–</strong>ï¼Œä½†å¯¹ä¸å°‘äººä¹Ÿåº”è¯¥æ—¥å¸¸å¤Ÿç”¨ã€‚ä»å®¢æˆ·ç«¯æ¥çœ‹ï¼Œç†ŠçŒ«VPNèƒŒåå¯èƒ½ä¸æ˜¯VPNç¿»å¢™æŠ€æœ¯ï¼Œè€Œæ˜¯ç”¨äº†ç±»ä¼¼SSRçš„æŸç§åŠ å¯†ä»£ç†ï¼Œè¿™æ— æ³•ç¡®å®šï¼Œä½†æ˜¯èƒ½ç”¨æœ€é‡è¦ã€‚</p>\n<h2><a href=\"https://indx.cc/vyr\">VyprVPN</a></h2>\n<p>70+è‡ªæœ‰æœåŠ¡å™¨æ‰€åœ¨åœ°ï¼Œ200,000+IPåœ°å€ / æ— é™æµé‡ / å¤šåè®®ï¼Œç‹¬å®¶æ··æ·†åè®® / ä¸€é”®è¿æ¥ / åŒæ—¶5å°è®¾å¤‡ / æ”¯æŒP2P / å˜è‰²é¾™åŠ å¯†ï¼Œ<strong>è¿æ¥ç›¸å¯¹æœ€ç¨³å®š</strong> / æ”¯ä»˜å®æ”¯ä»˜ / æ”¯æŒè·¯ç”±å™¨è¿æ¥ / NATå®‰å…¨æœºåˆ¶ / DNSåŠ å¯† / å…¨ç»ˆç«¯è¦†ç›– / 2å¹´æ¬¾æœ€å¤§ä¼˜æƒ  / 30å¤©æ— æ¡ä»¶é€€æ¬¾ / æŒ‰ç¨‹åºæ§åˆ¶ç½‘ç»œæŠ€æœ¯ï¼ŒåŒæ—¶è®¿é—®å†…å¤–ç½‘</p>\n</div>",
      "title": "ç¨³å®šçš„ä»˜è´¹vpnæ¨è",
      "last_reply_at": "2021-07-28T03:25:13.101Z",
      "good": false,
      "top": false,
      "reply_count": 18,
      "visit_count": 17795,
      "create_at": "2016-06-11T13:16:42.992Z",
      "author": {
        "loginname": "flamingtop",
        "avatar_url": "https://avatars3.githubusercontent.com/u/132677?v=4&s=120"
      }
    },
    {
      "id": "605da2e85ac88c2dd115b429",
      "author_id": "5c81f15090c14711cc8cb87e",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>0åŸºç¡€å°±å¯ä»¥å­¦çš„nodejsæ•™ç¨‹ï¼Œæ•™ç¨‹åŒ…æ‹¬NodejsåŸºç¡€ï¼ŒNodejsæ‰‹å†™ä¸€ä¸ªexpressæ¡†æ¶ ï¼ŒExpressä½¿ç”¨ï¼ŒMongodbä½¿ç”¨ï¼ŒMongooseç­‰ã€‚</p>\n<p>Bç«™åœ°å€ï¼š<a href=\"https://www.bilibili.com/video/av38925557/?p=1\">https://www.bilibili.com/video/av38925557/?p=1</a></p>\n<p>è§†é¢‘æºç ä¸‹è½½åœ°å€ï¼š <a href=\"https://pan.baidu.com/s/1L5SAAj0sRiX80xBPwMXmxA\">https://pan.baidu.com/s/1L5SAAj0sRiX80xBPwMXmxA</a>    æå–ç ï¼šabcd</p>\n<p>è°è¯´Nodejsæ¯äººå­¦æˆ‘å’Œè°æ€¥çœ¼</p>\n<p><strong>æ•™ç¨‹åŒ…æ‹¬ï¼š</strong></p>\n<p>å…¶ä¸­åŒ…æ‹¬Nodejså®‰è£…é…ç½®ã€Nodejså†…ç½®æ¨¡å—ã€Nodejsè‡ªå®šä¹‰æ¨¡å—ã€Nodejsç¬¬ä¸‰æ–¹æ¨¡å—ã€npmåŒ…ç®¡ç†ã€Nodejsæ–°ç‰¹æ€§ async await ã€ä»¥åŠNodejsåˆ›å»ºwebæœåŠ¡ã€æ¨¡æ¿å¼•æ“ã€NodeJså°è£…ä¸€ä¸ªè‡ªå·±çš„Expressæ¡†æ¶ã€MongoDBå®‰è£…ã€MongoDBå¢åˆ æ”¹æŸ¥ã€MongoDBç´¢å¼•ã€MongoDBæƒé™ç®¡ç†ã€MongoDBèšåˆç®¡é“ã€MongoDB aggregateèšåˆç®¡é“ å¤šè¡¨å…³è”æŸ¥è¯¢ã€Nodejsæ“ä½œmongodbæ•°æ®åº“ã€Expressä»‹ç»ã€Expressè·¯ç”±ã€Express Ejs ã€Express Cookieã€Express Sessionã€Express Restfull APiã€Express ä¸Šä¼ å›¾ç‰‡ã€ Mongooseçš„å®‰è£…ã€mongooseå¢åˆ æ”¹æŸ¥ã€mongooseé»˜è®¤å‚æ•° ã€mongooseæ¨¡å—åŒ–ã€Mongoose é¢„å®šä¹‰æ¨¡å¼ä¿®é¥°ç¬¦ã€è‡ªå®šä¹‰ä¿®é¥°ç¬¦ã€Mongooseç´¢å¼•ã€æ‰©å±•Mongooseå†…ç½®æŸ¥è¯¢æ–¹æ³•ã€Mongoose æ•°æ®æ ¡éªŒã€Mongooseä¸¤ä¸ªè¡¨å…³è”æŸ¥è¯¢aggregateã€MongooseNä¸ªè¡¨å…³è”æŸ¥è¯¢aggregateã€Mongooseã€ DBRef  Populateã€ä»¥åŠExpress+Mongooseå®æˆ˜</p>\n</div>",
      "title": "20ä¸‡äººåœ¨å­¦çš„Nodejs+Express+mongooseæ•™ç¨‹-Bç«™å…è´¹çœ‹ æºç å…è´¹ä¸‹ è°è¯´Nodeä¸ç«",
      "last_reply_at": "2021-07-28T00:56:01.407Z",
      "good": false,
      "top": false,
      "reply_count": 4,
      "visit_count": 5600,
      "create_at": "2021-03-26T09:01:28.364Z",
      "author": {
        "loginname": "phonegap100",
        "avatar_url": "https://avatars.githubusercontent.com/u/5773766?v=4&s=120"
      }
    },
    {
      "id": "60e3d580ba746017a3862726",
      "author_id": "5ea15a200275394e76882cdd",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>Dart Flutterç›®å‰å¾ˆç«å—? Bç«™ä¸Šçœ‹è§ä¸€ä¸ªFlutterçš„æ•™ç¨‹éƒ½æœ‰60å¤šä¸‡æ’­æ”¾é‡äº†ã€‚</p>\n<p><a href=\"https://www.bilibili.com/video/BV1S4411E7LY?p=1\">https://www.bilibili.com/video/BV1S4411E7LY?p=1</a></p>\n<p><a href=\"https://www.bilibili.com/video/BV1S4411E7LY?p=16\">https://www.bilibili.com/video/BV1S4411E7LY?p=16</a></p>\n<p>æˆ‘å°±æƒ³çŸ¥é“ å‰ç«¯æœ‰æ²¡æœ‰å¿…è¦å­¦Flutter?</p>\n</div>",
      "title": "Dart Flutterç›®å‰å¾ˆç«å—? --å‰ç«¯æœ‰æ²¡æœ‰å¿…è¦å­¦Flutter",
      "last_reply_at": "2021-07-28T00:47:43.735Z",
      "good": false,
      "top": false,
      "reply_count": 12,
      "visit_count": 2770,
      "create_at": "2021-07-06T04:01:04.803Z",
      "author": {
        "loginname": "wuwangju0",
        "avatar_url": "https://avatars.githubusercontent.com/u/64194964?v=4&s=120"
      }
    },
    {
      "id": "6100141ce3e671787158fc3f",
      "author_id": "610013c7e3e671064a58fc3a",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>ä»¥å‰ç¢°åˆ°è¿‡è¿™é—®é¢˜ï¼Œå½“æ—¶è¿˜æ²¡æ¥è¿™ä¸ªè®ºå›ï¼Œä¸€ç›´åœ¨ç”¨expressï¼Œç°åœ¨æƒ³ææ¸…è¿™ä¸ªé—®é¢˜</p>\n</div>",
      "title": "Node.js Koa sessionå¯¹åº”çš„Cookieå¯ä»¥è¢«è§£å¯†çš„é—®é¢˜",
      "last_reply_at": "2021-07-27T14:11:40.028Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 326,
      "create_at": "2021-07-27T14:11:40.028Z",
      "author": {
        "loginname": "Codexiaowu",
        "avatar_url": "https://avatars.githubusercontent.com/u/53120871?v=4&s=120"
      }
    },
    {
      "id": "60e25b8cba74602248862373",
      "author_id": "5ea15a200275394e76882cdd",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>åŒä¸Š,å„ä½è€é“ Nestjså¾ˆç«å—?ä¸ºä»€ä¹ˆStaré‡ä»¥åŠæ¯å‘¨ä¸‹è½½é‡å¦‚æ­¤ä¹‹é«˜,è¿™ä¸ªæ¡†æ¶å›½å†…ç”¨çš„å¤šå—?</p>\n<p><img src=\"//static.cnodejs.org/FlKGhyRfHXLrr6bUlreNJUEF6U65\" alt=\"nestjs.jpg\"></p>\n<p><img src=\"//static.cnodejs.org/FoYcKcGW5iRUnxoPryjmqyrzRWcI\" alt=\"nest1.jpg\"></p>\n<p>åŒä¸Š,å„ä½è€é“ Nestjså¾ˆç«å—?ä¸ºä»€ä¹ˆStaré‡ä»¥åŠæ¯å‘¨ä¸‹è½½é‡å¦‚æ­¤ä¹‹é«˜,è¿™ä¸ªæ¡†æ¶å›½å†…ç”¨çš„å¤šå—?</p>\n</div>",
      "title": "Nestjså¾ˆç«å—?ä¸ºä»€ä¹ˆStaré‡ä»¥åŠæ¯å‘¨ä¸‹è½½é‡å¦‚æ­¤ä¹‹é«˜",
      "last_reply_at": "2021-07-27T11:50:53.846Z",
      "good": false,
      "top": false,
      "reply_count": 16,
      "visit_count": 4583,
      "create_at": "2021-07-05T01:08:28.824Z",
      "author": {
        "loginname": "wuwangju0",
        "avatar_url": "https://avatars.githubusercontent.com/u/64194964?v=4&s=120"
      }
    },
    {
      "id": "60fcd66ee3e671acb558f58f",
      "author_id": "60fcd4b7e3e67108e258f57a",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p><img src=\"//static.cnodejs.org/Fk_pD39ZUydXqajy415-hXOoeDfA\" alt=\"444444444.png\">\n<img src=\"//static.cnodejs.org/FodavimNjSw_jIIxUHEOmZGZFrdl\" alt=\"33333333333333.png\">\nåˆšåˆšæ‰å¼€å§‹å­¦ï¼Œæƒ³æ­ä¸ªè·¯ç”±ï¼Œé€šè¿‡æµè§ˆå™¨è®¿é—®http://localhost/home æŠ¥404ï¼Œè¯·é—®è€å¸ˆè¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ã€‚</p>\n</div>",
      "title": "æ±‚é—®ï¼šåŒ¹é…è·¯ç”±ä¸èƒ½è®¿é—®locahostã€‚",
      "last_reply_at": "2021-07-27T02:38:37.274Z",
      "good": false,
      "top": false,
      "reply_count": 6,
      "visit_count": 959,
      "create_at": "2021-07-25T03:11:42.124Z",
      "author": {
        "loginname": "Hit1me",
        "avatar_url": "https://avatars.githubusercontent.com/u/30171759?v=4&s=120"
      }
    },
    {
      "id": "60ff7098e3e671563158fa34",
      "author_id": "545870576537f4d52c414eb6",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><h3>ç½‘ä¸Šæœä¸ªPPTæ¨¡æ¿ï¼Œå…¨æ˜¯ tmå¥—è·¯ ï¼Œä¸€ç‚¹ä¸‹è½½å°±è®©æ³¨å†Œï¼Œä¸€æ³¨å†Œå°±è®©ä»˜é’±ï¼Œgunï¼</h3>\n<h3>è€å­è‡ªå·±åšä¸ªæ— æ³¨å†Œç›´æ¥ä¸‹è½½çš„çº¯ç™½å«–çš„ï¼</h3>\n<p>ç½‘å€å¦‚ä¸‹ï¼š</p>\n<h1><a href=\"http://gitppt.com\">gitppt.com</a></h1>\n<h4>ä½†èµ„æºæ‰˜ç®¡åœ¨ <a href=\"http://raw.githubusercontent.com\">raw.githubusercontent.com</a>ï¼Œå›½å†…éƒ¨åˆ†åŒºåŸŸå› dnsé—®é¢˜ææ€•æ— æ³•åŠ è½½å›¾ç‰‡å’Œpptæ–‡ä»¶ã€‚å¤§å®¶å‡‘åˆç”¨å§ã€‚</h4>\n<p><img src=\"//static.cnodejs.org/FpYiqOLEQChiArFGMLgnnjJ1r0yx\" alt=\"image.png\">\n<img src=\"//static.cnodejs.org/FoYHGSLwy0BvzD49deNaK08j7_rA\" alt=\"image.png\">\n<img src=\"//static.cnodejs.org/FtjzxxVDFbGpZnlSAeK6yZ5ESx2m\" alt=\"image.png\"></p>\n</div>",
      "title": "å†™å‡ è¡Œç®€å•jsæ’¸äº†ä¸ªç¨‹åºå‘˜ä¸“ç”¨ç™½å«–PPTæ¨¡æ¿ç½‘ç«™ï¼šgitppt.com ï¼ˆå¤§å®¶å¿«æ¥ç™½å«–ï¼‰",
      "last_reply_at": "2021-07-27T02:34:00.255Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 413,
      "create_at": "2021-07-27T02:34:00.255Z",
      "author": {
        "loginname": "pangguoming",
        "avatar_url": "https://avatars.githubusercontent.com/u/7269202?v=4&s=120"
      }
    },
    {
      "id": "60f8e83be3e671299858ef9a",
      "author_id": "5b0bef9657137f22415c46de",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>æœ€è¿‘é¡¹ç›®è¢«ä¿©æ¬¡è´¨ç–‘äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åç«¯æœåŠ¡æ˜¯goå†™çš„ï¼Œå‰ç«¯ç”¨node+reactï¼ŒnodeåšgoæœåŠ¡æ¥å£è¯·æ±‚æ‹¿åˆ°æ•°æ®å’Œhtmlæ¸²æŸ“æ•´åˆï¼Œä¸‹å‘åˆ°å®¢æˆ·ç«¯è¿™æ ·çš„æ¨¡å¼ã€‚ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆç”¨nodeï¼Œä¸ç›´æ¥ç”¨reactå†™é¡µé¢å°±å¥½äº†å—ï¼Ÿ\næˆ‘çš„ç‚¹ä¸»è¦æ˜¯è§£å†³æŠ€æœ¯é—®é¢˜ï¼š</p>\n<ol>\n<li>nodeå¯¹äºssræœ‰å¾ˆå¥½çš„æŠ€æœ¯æ”¯æŒï¼Œä½¿ç”¨å°±å¾ˆæ–¹ä¾¿</li>\n<li>é¡µé¢æœ‰å¤šä¸ªè¯·æ±‚ï¼Œæ”¾åœ¨reactå°±å¾ˆé‡ï¼Œåœ¨nodeå±‚åšèšåˆé™ä½å¤æ‚æ€§ã€‚</li>\n</ol>\n<p>è¢«è´¨ç–‘çš„ç‚¹ï¼š</p>\n<ol>\n<li>nodeä½œä¸ºä¸­é—´å±‚ç“¶é¢ˆå°±æ”¾åœ¨nodeç«¯äº†ï¼Œå¤šåŠ ä¸€å±‚æ”¶ç›Šå°ï¼Œå½±å“å¤§</li>\n<li>nodeçš„ç¨³å®šæ€§å’Œgoå·®è·å¾ˆå¤§ï¼Œå®¹æ˜“å‡ºäº‹æ•…\né¢å¯¹è¿™ä¸ªè´¨ç–‘å¤§å®¶æœ‰ä»€ä¹ˆçœ‹æ³•å—ï¼Ÿ</li>\n</ol>\n</div>",
      "title": "å¦‚ä½•å›å¤ä¸ºä»€ä¹ˆç”¨Nodeä½œä¸ºå¤§å‰ç«¯ï¼Œç”¨å‰ç«¯ç›´æ¥è¯·æ±‚åç«¯ä¸å°±å¥½äº†å—",
      "last_reply_at": "2021-07-26T11:43:30.647Z",
      "good": false,
      "top": false,
      "reply_count": 14,
      "visit_count": 1566,
      "create_at": "2021-07-22T03:38:35.531Z",
      "author": {
        "loginname": "LiuWeiMr",
        "avatar_url": "https://avatars.githubusercontent.com/u/17976666?v=4&s=120"
      }
    },
    {
      "id": "60fa9be1e3e671144f58f359",
      "author_id": "5504014773263b0e4eef9c50",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>ä»¬ç›®å‰é¡¹ç›®ä¸­çš„ä»£ç ä¸“é—¨é’ˆå¯¹ç¨‹åºçš„è¾¹ç•Œåšäº†ä¸€å±‚å°è£…ï¼Œå°¤å…¶æ˜¯è°ƒç”¨ç¬¬ä¸‰æ–¹åº”ç”¨çš„è¯·æ±‚ç›¸å…³çš„ä»£ç ã€‚ä½†æ˜¯æˆ‘æ„Ÿè§‰ä¸æ˜¯ç‰¹åˆ«çš„å¥½ï¼Œä¸”çœ‹ä¸‹é¢è¿™ä¸€æ®µä¼ªä»£ç </p>\n<ul>\n<li>ç±»çš„å®šä¹‰</li>\n</ul>\n<pre class=\"prettyprint language-js\"><code>const axios = require(&#x27;axios&#x27;);\n\nclass Client {\n  constructor({ url, username, password }) {\n    this.url = url;\n\tthis.username = username;\n\tthis.password = password;\n\tthis.token = &#x27;&#x27;;\n\t\n\tthis.login = this.login.bind(this);\n\tthis.getSomething = this.getSomething.bind(this);\n\t\n\tthis.login();\n  }\n  \n  async login() {\n    const { token } = await axios.post(...);\n\tthis.token = token;\n  }\n  \n  async getSomething(params) {\n    if (!this.token) {\n\t  console.error(&#x27;æœªç™»å½•&#x27;);\n\t  return;\n\t}\n\t\n    const result = await axios.get(..., {\n\t  headers: {\n\t    token: this.token,\n\t  },\n\t  ...\n\t});\n\t\n\treturn result;\n  }\n}\n</code></pre><ul>\n<li>è°ƒç”¨</li>\n</ul>\n<pre class=\"prettyprint language-js\"><code>const Client = require(&#x27;.&#x2F;Client.js&#x27;);\n\nasync main() {\n  const client = new Client({\n    url: &#x27;127.0.0.1&#x27;,\n\tusername: &#x27;zhangsan&#x27;,\n\tpassword: &#x27;...&#x27;\n  });\n  \n  const result = await client.getSomething();\n  \n  console.log(result);\n}\n</code></pre><p>ä»–è¿™é‡Œåœ¨å®ä¾‹åŒ–è¯¥å¯¹è±¡æ˜¯ï¼Œæ„é€ å‡½æ•°è°ƒç”¨äº†ä¸€ä¸ª<code>async</code>çš„å‡½æ•°ï¼Œå¦‚æœç«‹å³è°ƒç”¨<code>getSomething()</code>æ–¹æ³•ï¼Œå¯èƒ½ä¼šå­˜åœ¨<code>login()</code>æ–¹æ³•è¿˜æœªæ‰§è¡Œå®Œï¼Œ<code>token</code>è¿˜æ²¡æœ‰çš„æƒ…å†µã€‚\nè¯·é—®ä¸€ä¸‹å¤§å®¶ä¸€èˆ¬æ˜¯æ€æ ·å°è£…è¿™æ ·çš„ç±»çš„ï¼Ÿæˆ–è€…è¯´æ€æ ·å¤„ç†è¿™æ ·çš„æƒ…å†µï¼Ÿ</p>\n</div>",
      "title": "è¯·æ±‚æ–¹å®¢æˆ·ç«¯ä»£ç çš„å°è£…æ–¹å¼ï¼Œè¯·æ•™ä¸€ä¸‹å¤§å®¶",
      "last_reply_at": "2021-07-26T09:09:38.755Z",
      "good": false,
      "top": false,
      "reply_count": 4,
      "visit_count": 844,
      "create_at": "2021-07-23T10:37:21.371Z",
      "author": {
        "loginname": "helloMane",
        "avatar_url": "https://avatars.githubusercontent.com/u/10976717?v=4&s=120"
      }
    },
    {
      "id": "60fce71ae3e671758e58f5b5",
      "author_id": "5477d58565e5a201268b928c",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><h1>ts-json-model</h1>\n<p>åœ¨<code>Typescript</code>å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸å¯é¿å…è¦ç¼–å†™<code>Model</code>ï¼›å¯¹äº<code>Model</code>ä¸å¤šçš„ç®€å•åº”ç”¨å€’æ˜¯æ²¡æœ‰ä»€ä¹ˆï¼Œä½†æ˜¯å¯¹äºå¤æ‚ä¸”<code>Model</code>è¾ƒå¤šã€è¾ƒå¤æ‚çš„åº”ç”¨ï¼Œ\nç¼–å†™<code>Model</code>å°±å˜æˆäº†æ¯ç‡¥ã€ç¹ççš„ä½“åŠ›è¯ï¼›è¯¥å·¥å…·å°±æ˜¯ä¸ºäº†è§£å†³æ‰¾ä¸ªé—®é¢˜è€Œç”Ÿï¼›å½“ç„¶å‰ææŒ‡éœ€è¦æä¾›å¯¹åº”Modelçš„<code>json</code>æ–‡ä»¶å³å¯ã€‚</p>\n<h2>å®‰è£…</h2>\n<pre class=\"prettyprint\"><code>$ npm install -g ts-json-model\n</code></pre><h2>ä½¿ç”¨</h2>\n<p>è¾“å‡ºå½“å‰ç‰ˆæœ¬</p>\n<pre class=\"prettyprint\"><code>$ j2m --v\n</code></pre><p>å·¥å…·é»˜è®¤æä¾›å‘½ä»¤è¡Œæ˜¯<code>j2m</code>ï¼Œé»˜è®¤çš„å·¥ä½œç›®å½•æ˜¯å½“å‰ç›®å½•ä¸‹çš„<code>./src/json</code>ï¼Œ\nè¾“å‡ºç›®å½•æ˜¯<code>./src/model</code>ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æä¾›é…ç½®æ–‡ä»¶çš„å½¢å¼è¦†ç›–é»˜è®¤çš„é…ç½®ï¼Œæ–‡ä»¶åç§°æ˜¯\n<code>j2m.config.json</code>ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint language-json\"><code>{\n  &quot;src&quot;: &quot;.&#x2F;src&#x2F;json&quot;,\n  &quot;output&quot;: &quot;.&#x2F;src&#x2F;model&quot;\n}\n</code></pre><h3>å…³é”®å­—</h3>\n<ul>\n<li><code>_extend</code>:è¡¨ç¤ºè¦ç»§æ‰¿çš„ç±»ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œé‚£ä¹ˆæ–°å»ºä¸€ä¸ªç©ºçš„ç±»ã€‚</li>\n<li><code>_name</code>: å½“å‰å¯¹è±¡ç±»çš„åç§°ã€‚</li>\n<li><code>$</code>: â€˜è‡ªå®šä¹‰ç±»åâ€™ï¼Œå¦‚æœä¸å­˜åœ¨æ´»åˆ›å»ºä¸€ä¸ªç©ºçš„ç±»ã€‚</li>\n<li><code>#{content}#</code>: å­—æ®µ/å±æ€§çš„æ³¨é‡Š</li>\n</ul>\n<p>æ¥ä¸‹æ¥è¿è¡Œ</p>\n<pre class=\"prettyprint\"><code>$ j2m\n</code></pre><h2>demo</h2>\n<p>æ¥ä¸‹æ¥ä»¥æ¨¡å—æä¾›çš„exampleä¸ºä¾‹ï¼Œè®²è§£å¦‚ä½•ä½¿ç”¨ï¼š</p>\n<p>ç›®å½•ç»“æ„ï¼š</p>\n<p><img src=\"http://static.94-me.com/images/2021/07/1.jpg\" alt=\"image\"></p>\n<p>è¿è¡Œ</p>\n<pre class=\"prettyprint\"><code>npm run j2m\n</code></pre><p>è¿‡ç¨‹</p>\n<p><img src=\"http://static.94-me.com/images/2021/07/2.jpg\" alt=\"image\"></p>\n<p>ç»“æœ</p>\n<p><img src=\"http://static.94-me.com/images/2021/07/3.jpg\" alt=\"image\"></p>\n<p>ä»‹ç»å®Œæ¯•ï¼Œæ”¶å·¥ï¼</p>\n</div>",
      "title": "Typescriptçš„jsonè½¬modelå·¥å…·ä»‹ç»",
      "last_reply_at": "2021-07-25T04:22:50.247Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 783,
      "create_at": "2021-07-25T04:22:50.247Z",
      "author": {
        "loginname": "ljl0612",
        "avatar_url": "https://avatars.githubusercontent.com/u/8716954?v=4&s=120"
      }
    },
    {
      "id": "60f53d15e3e6713cb958e9fc",
      "author_id": "5f4f20c268156574e6e6df32",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><pre class=\"prettyprint\"><code>async function test2() {\n    test();\n    await test();\n}\n\nfunction test() {\n    &#x2F;&#x2F; I want to know if this is called by await ...\n}\n</code></pre></div>",
      "title": "å¦‚ä½•çŸ¥é“å‡½æ•°è¢«è°ƒç”¨æ—¶æ˜¯å¦æ˜¯ await è°ƒç”¨ï¼Ÿ",
      "last_reply_at": "2021-07-23T20:05:56.951Z",
      "good": false,
      "top": false,
      "reply_count": 6,
      "visit_count": 1317,
      "create_at": "2021-07-19T08:51:33.985Z",
      "author": {
        "loginname": "ahuangege",
        "avatar_url": "https://avatars.githubusercontent.com/u/28346577?v=4&s=120"
      }
    },
    {
      "id": "60f9be26e3e671009f58f149",
      "author_id": "5c1ea9e976c4964062a1ca15",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>å‰è¨€ï¼šä»Šå¤©ä¸‹è½½äº†Node.jsæœ€æ–°ç‰ˆä»£ç ï¼Œå¹¶ä¸ºNode.jsçš„TCPæ¨¡å—å¢åŠ äº†SO_RESUEPORTçš„èƒ½åŠ›ï¼Œæœ¬æ–‡ä»‹ç»ä¸€ä¸‹å…·ä½“çš„å®ç°ï¼Œå…³äºSO_RESUEPORTçš„çŸ¥è¯†å¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç« æˆ–è€…ç½‘ä¸Šæ–‡ç« ã€‚</p>\n<h1>1 Libuv</h1>\n<p>SO_RESUEPORTæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸æä¾›çš„èƒ½åŠ›ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥é¦–å…ˆä¿®æ”¹Libuvã€‚è€ƒè™‘åˆ°æ“ä½œç³»ç»Ÿå…¼å®¹æ€§çš„é—®é¢˜ï¼Œç›®å‰åªæ”¯æŒLinuxç³»ç»Ÿï¼Œæ—§ç‰ˆMac OSä¹Ÿæ”¯æŒç›¸å…³å±æ€§ä½†æ˜¯æ•ˆæœä¸ç¬¦åˆé¢„æœŸï¼Œæ–°ç‰ˆMac OSå€’æ˜¯æ”¯æŒï¼Œè€ƒè™‘åˆ°Node.jsåœ¨å‡ ä¹éƒ½æ˜¯éƒ¨ç½²åˆ°Linuxï¼Œæ‰€ä»¥å¯ä»¥å…ˆå…³æ³¨Linuxå†…æ ¸ã€‚é¦–å…ˆä¿®æ”¹deps/uv/include/uv.hã€‚</p>\n<pre class=\"prettyprint language-c\"><code>enum uv_tcp_flags {\n  UV_TCP_IPV6ONLY = 1,\n  &#x2F;&#x2F; æ”¯æŒSO_RESUEPORT flags\n  UV_TCP_REUSEPORT = 2\n};\n</code></pre><p>æ¥ç€ä¿®æ”¹deps/uv/src/unix/tcp.cã€‚</p>\n<pre class=\"prettyprint language-c\"><code> #if defined(SO_REUSEPORT) &amp;&amp; defined(__linux__) \n    on = 1;\n    if ((flags &amp; UV_TCP_REUSEPORT) &amp;&amp; setsockopt(tcp-&gt;io_watcher.fd, SOL_SOCKET, SO_REUSEPORT, &amp;on, sizeof(on)))\n      return UV__ERR(errno);\n  #endif\n</code></pre><p>è¿™é‡Œåˆ¤æ–­ä¸€ä¸‹æ˜¯å¦æœ‰ä¸¤ä¸ªå®ï¼Œæœ‰çš„è¯æ‰èƒ½ä½¿ç”¨SO_RESUEPORTã€‚å¦‚æœæ”¯æŒåˆ™é€šè¿‡setsockoptè®¾ç½®socketçš„SO_REUSEPORTæ ‡è®°ï¼Œè¿™æ˜¯æœ€æ ¸å¿ƒçš„é€»è¾‘ã€‚</p>\n<h1>2 ä¿®æ”¹C++å±‚</h1>\n<p>ä¿®æ”¹å®Œåº•å±‚çš„Libuvåï¼Œç»§ç»­ä¿®æ”¹C++å±‚ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„å±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¢åŠ ç›¸å…³çš„é€»è¾‘ã€‚ä¿®æ”¹src/tcp_wrap.ccã€‚é¦–å…ˆå¯¼å‡ºä¸€ä¸ªæ–°çš„å¸¸é‡</p>\n<pre class=\"prettyprint language-c\"><code>#if defined(SO_REUSEPORT) &amp;&amp; defined(__linux__) \n NODE_DEFINE_CONSTANT(constants, UV_TCP_REUSEPORT);\n#endif\n</code></pre><p>åœ¨JSå±‚å¯ä»¥é€šè¿‡åˆ¤æ–­æ˜¯å¦å¯¼å‡ºäº†è¿™ä¸ªå¸¸é‡æ¥åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦æ”¯æŒSO_RESUEPORTã€‚æ¥ç€ä¿®æ”¹bindå‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬å†bindçš„æ—¶å€™å¯ä»¥è®¾ç½®SO_RESUEPORTã€‚</p>\n<pre class=\"prettyprint language-c\"><code>template &lt;typename T&gt;\nvoid TCPWrap::Bind(\n    const FunctionCallbackInfo&lt;Value&gt;&amp; args,\n    int family,\n    std::function&lt;int(const char* ip_address, int port, T* addr)&gt; uv_ip_addr) {\n  TCPWrap* wrap;\n  ASSIGN_OR_RETURN_UNWRAP(&amp;wrap,\n                          args.Holder(),\n                          args.GetReturnValue().Set(UV_EBADF));\n  Environment* env = wrap-&gt;env();\n  node::Utf8Value ip_address(env-&gt;isolate(), args[0]);\n  int port;\n  unsigned int flags = 0;\n  if (!args[1]-&gt;Int32Value(env-&gt;context()).To(&amp;port)) return;\n  &#x2F;&#x2F; ipv6æ”¯æŒipv6Onlyå’ŒSO_RESUEPORT\n  if (family == AF_INET6 &amp;&amp;\n      !args[2]-&gt;Uint32Value(env-&gt;context()).To(&amp;flags)) {\n    return;\n  &#x2F;&#x2F; ipv4ä¹‹å‰æ˜¯ä¸æ”¯æŒä»»ä½•æ ‡è®°çš„ï¼Œè¿™é‡Œéœ€è¦åŠ ä¸Šè¿™ä¸ªé€»è¾‘ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦æ”¯æŒSO_RESUEPORT\n  } else if (family == AF_INET4 &amp;&amp;\n      !args[2]-&gt;Uint32Value(env-&gt;context()).To(&amp;flags)) {\n    return;\n  }\n\n  T addr;\n  int err = uv_ip_addr(*ip_address, port, &amp;addr);\n\n  if (err == 0) {\n    err = uv_tcp_bind(&amp;wrap-&gt;handle_,\n                      reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr),\n                      flags);\n  }\n  args.GetReturnValue().Set(err);\n}\n</code></pre><p>C++ä¸»è¦æ˜¯å®Œæˆé€ä¼ flagsçš„é€»è¾‘ã€‚</p>\n<h1>3 ä¿®æ”¹JSå±‚</h1>\n<p>ä¿®æ”¹JSå±‚æ˜¯æœ€å¤æ‚çš„åœ°æ–¹ï¼Œä¸»è¦æ˜¯ä¸ºäº†åº”ç”¨å±‚çš„å…¼å®¹æ€§é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœNode.jsçœŸçš„æ”¯æŒäº†SO_RESUEPORTï¼Œåœ¨æŸäº›å¹³å°ä¸æ”¯æŒSO_RESUEPORTçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¦‚ä½•èƒ½ä¿è¯æˆ‘ä»¬çš„ä»£ç èƒ½åœ¨å„ä¸ªå¹³å°ä¸Šè·‘ã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬å¹³å°æ”¯æŒSO_RESUEPORTï¼Œæˆ‘ä»¬å¯ä»¥å¼€å¯å¤šä¸ªå­è¿›ç¨‹ï¼Œç„¶ååˆ†åˆ«æ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>const http = require(&#x27;http&#x27;);\nhttp.createServer((req, res) =&gt; {\n    res.end(&#x27;hello&#x27;);\n}).listen({port: 8000ï¼Œ reuseport: true});\n</code></pre><p>è¿™æ—¶å€™ï¼Œåªéœ€è¦ä¿®æ”¹ä¸€ä¸‹Node.jsçš„net.jsï¼ŒæŠŠreuseportæ ‡è®°ä¼ åˆ°C++å±‚å†ä¼ åˆ°Libuvå°±è¡Œï¼Œä½†æ˜¯é—®é¢˜æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¿™æ ·å†™ä»£ç ï¼Œå°±æ— æ³•åœ¨ä¸æ”¯æŒSO_RESUEPORTçš„å¹³å°è·‘äº†ï¼Œå› ä¸ºä¼šå¯¼è‡´é‡å¤ç›‘å¬ç«¯å£çš„é”™è¯¯ã€‚æ‰€ä»¥ä¸ºäº†å…¼å®¹æ€§ï¼Œæˆ‘æƒ³çš„æ–¹æ¡ˆæ˜¯åˆ©ç”¨Clusteræ¨¡å—ï¼Œç›®å‰Clusteræ¨¡å—æ”¯æŒè½®è¯¢å’Œå…±äº«ä¸¤ç§æ¨¡å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†åŠ ä¸€ç§reuseportæ¨¡å¼å°±å¥½äº†ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯ä¸€æ—¦æˆ‘ä»¬å¹³å°ä¸æ”¯æŒSO_RESUEPORTï¼Œæˆ‘ä»¬å¯ä»¥é™çº§åˆ°Node.jsç°åœ¨åˆ°æ¨¡å¼ã€‚æˆ‘ä»¬çŸ¥é“Clusteræ¨¡å—çš„åŸç†æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä¸»è¿›ç¨‹ç›‘å¬ï¼Œåˆ†å‘è¿æ¥ç»™å­è¿›ç¨‹ï¼Œå¦ä¸€ç§æ˜¯ä¸»è¿›ç¨‹åˆ›å»ºsocketï¼Œé€šè¿‡æ–‡ä»¶æè¿°ç¬¦ä¼ é€’çš„æ–¹å¼ä¼ ç»™å­è¿›ç¨‹ï¼Œæ‰€æœ‰çš„è¿›ç¨‹éƒ½æ˜¯å…±äº«ä¸€ä¸ªsocketçš„ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆåšã€‚é¦–å…ˆä¿®æ”¹lib/internal/cluster/primary.jsã€‚</p>\n<pre class=\"prettyprint language-c\"><code>\t&#x2F;&#x2F; å¢åŠ è¿™ifçš„é€»è¾‘\n   if ((message.addressType === 4 || \n\tmessage.addressType === 6) &amp;&amp; \n\t(message.flags &amp; TCPConstants.UV_TCP_REUSEPORT)) {\n\thandle = new ReusePort(key, address, message);\n   } else if (schedulingPolicy !== SCHED_RR ||\n       message.addressType === &#x27;udp4&#x27; ||\n       message.addressType === &#x27;udp6&#x27;) {\n     handle = new SharedHandle(key, address, message);\n   } else {\n     handle = new RoundRobinHandle(key, address, message);\n   }\n</code></pre><p>æˆ‘ä»¬åœ¨queryServerå‡½æ•°é‡Œå¢åŠ äº†ä¸€ä¸ªifçš„é€»è¾‘ã€‚å¦‚æœaddressTypeæ˜¯4æˆ–6è¯´æ˜æ˜¯TCPåè®®ï¼Œå¹¶ä¸”è®¾ç½®äº†UV_TCP_REUSEPORTï¼ˆlistençš„æ—¶å€™ä¼ å…¥ï¼‰ï¼Œå°±ä¼šèµ°åˆ°reuseportçš„é€»è¾‘ï¼Œå‰©ä¸‹çš„ä¸¤ä¸ªelseæ˜¯ç›®å‰Node.jsçš„é€»è¾‘ã€‚æˆ‘ä»¬çœ‹çœ‹ReusePort.jsåšäº†ä»€ä¹ˆã€‚</p>\n<pre class=\"prettyprint language-c\"><code>&#x27;use strict&#x27;;\nconst assert = require(&#x27;internal&#x2F;assert&#x27;);\nconst net = require(&#x27;net&#x27;);\nconst { constants: TCPConstants } = internalBinding(&#x27;tcp_wrap&#x27;);\n\nmodule.exports = ReusePort;\n\nfunction ReusePort(key, address, {port, addressType, fd, flags}) {\n  this.key = key;\n  this.workers = [];\n  this.handles = [];\n  this.list = [address, port, addressType, fd, flags];\n}\n\nReusePort.prototype.add = function(worker, send) {\n  assert(!this.workers.includes(worker));\n  const rval = net._createServerHandle(...this.list);\n  let errno;\n  let handle;\n  if (typeof rval === &#x27;number&#x27;)\n    errno = rval;\n  else\n    handle = rval;\n  this.workers.push(worker);\n  this.handles.push(handle);\n  send(errno, null, handle);\n};\n\nReusePort.prototype.remove = function(worker) {\n  const index = this.workers.indexOf(worker);\n\n  if (index === -1)\n    return false; &#x2F;&#x2F; The worker wasn&#x27;t sharing this handle.\n\n  this.workers.splice(index, 1);\n  this.handles[index].close();\n  this.handles.splice(index, 1);\n  return true;\n};\n\n</code></pre><p>ä¸Šé¢çš„ä»£ç æˆ‘ä»¬åªéœ€è¦å…³æ³¨net._createServerHandleã€‚åœ¨ä¸èƒ½å¤šä¸ªè¿›ç¨‹åŒæ—¶ç›‘å¬åŒä¸€ä¸ªç«¯å£çš„æƒ…å†µä¸‹ï¼ŒNode.jsåªä¼šè°ƒnet._createServerHandleåˆ›å»ºä¸€ä¸ªsocketï¼Œç„¶åå¤šä¸ªè¿›ç¨‹å…±äº«ã€‚è€Œæˆ‘ä»¬è¿™é‡Œä¼šç»™æ¯ä¸ªè¿›ç¨‹åˆ›å»ºä¸€ä¸ªsocketã€‚è¿™ä¸ªsocketå°±æ˜¯åœ¨å­è¿›ç¨‹è°ƒç”¨queryServerçš„æ—¶å€™è¿”å›ç»™å­è¿›ç¨‹çš„ã€‚å‰©ä¸‹çš„é€»è¾‘æˆ‘ä»¬æš‚æ—¶ä¸ç”¨å…³æ³¨ã€‚æœ€åçœ‹ä¸€ä¸‹_createServerHandleçš„é€»è¾‘ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>const handle = new TCP(TCPConstants.SERVER);\nif (addressType === 6) {\n  err = handle.bind6(address, port, flags);\n} else {\n  err = handle.bind(address, port, flags || 0);\n}\n</code></pre><p>_createServerHandleçš„é€»è¾‘æ˜¯åˆ›å»ºä¸€ä¸ªsocketå¹¶ä¸”ç»™socketç»‘å®šIPå’Œç«¯å£ï¼Œæˆ‘ä»¬çœ‹åˆ°è¿™é‡Œä¼šç»™C++å±‚ä¼ å…¥flagsï¼ŒC++å±‚å°±ä¼šä¼ åˆ°LIbuväº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†æ•´ä¸ªè¿‡ç¨‹ï¼Œæ•´ä½“çš„æµç¨‹å¦‚ä¸‹ã€‚\n1 å­è¿›ç¨‹æ‰§è¡Œlistençš„æ—¶å€™ï¼Œä¼ å…¥reuseportä¸ºtrue\n2 å­è¿›ç¨‹é€šè¿‡è¿›ç¨‹é—´é€šä¿¡è¯·æ±‚ä¸»è¿›ç¨‹\n3 ä¸»è¿›ç¨‹è¿”å›ä¸€ä¸ªæ–°çš„socketå¹¶ç»‘å®šåˆ°å¯¹åº”çš„åœ°å€\n4 å­è¿›ç¨‹æ‰§è¡Œlistenå¯åŠ¨æœåŠ¡å™¨ã€‚</p>\n<h1>4 ä½¿ç”¨</h1>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªserver.jsã€‚</p>\n<pre class=\"prettyprint language-c\"><code>const cluster = require(&#x27;cluster&#x27;);\nconst os = require(&#x27;os&#x27;);\nconst http = require(&#x27;http&#x27;);\nconst cpus = os.cpus().length;\n\nif (cluster.isPrimary) {\n  const map = {};\n  for (let i = 0; i &lt; cpus; i++) {\n    const worker = cluster.fork();\n    map[worker.process.pid] = 0;\n    worker.on(&#x27;message&#x27;, (pid) =&gt; {\n        map[pid]++;\n    });\n  }\n\n  process.on(&#x27;SIGINT&#x27;, () =&gt; {\n    console.log(map);\n  });\n} else {\n  http.createServer((req, res) =&gt; {\n      process.send(process.pid);\n      res.end(&#x27;hello&#x27;);\n  }).listen({reuseport: true, port: 8000});\n}\n</code></pre><p>å†åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯client.js</p>\n<pre class=\"prettyprint language-c\"><code>const http = require(&#x27;http&#x27;);\nfunction connect() {\n    setTimeout(() =&gt; {\n        http.get(&#x27;http:&#x2F;&#x2F;localhost:8000&#x2F;&#x27;, (res) =&gt; {\n            console.log(res.statusCode);\n            connect();\n        });\n    }, 50);\n}\nconnect();\n</code></pre><p>å®¢æˆ·ç«¯ä¸²è¡Œè®¿é—®æœåŠ¡å™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°ä½¿ç”¨æ–¹å¼å’Œç›®å‰Node.jsçš„Clusterä½¿ç”¨ä¸€æ ·ã€‚å³ä½¿æˆ‘ä»¬æŠŠreuseportæ”¹æˆfalseæˆ–è€…å…¶ä»–å¹³å°è·‘ä¹Ÿæ²¡é—®é¢˜ï¼Œæ•ˆæœå¦‚ä¸‹\n<img src=\"https://img-blog.csdnimg.cn/9e0c8ad5197a4c80a51fdd6e3c2d454f.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RIRUFOQVJLSA==,size_16,color_FFFFFF,t_70\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\">\næˆ‘ä»¬çœ‹åˆ°åœ¨reuseportçš„æƒ…å†µä¸‹ï¼Œè´Ÿè½½è¿˜æ˜¯æŒºå‡è¡¡çš„ã€‚</p>\n<p>åè®°ï¼šç›®å‰æ˜¯é€šè¿‡listençš„æ—¶å€™ä¼ å…¥å‚æ•°å»æ§åˆ¶æ˜¯å¦å¼€å¯SO_RESUEPORTçš„ï¼Œåç»­å¯ä»¥å¢åŠ é€šè¿‡è®¾ç½®cluster.schedulingPolicyçš„æ–¹å¼ï¼Œå’Œç›®å‰å…±äº«ã€è½®è¯¢æ¨¡å¼å¯¹é½ï¼Œè€ƒè™‘åˆ°Clusteræ¨¡å—ä¸æ˜¯å¿…é¡»ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨å­è¿›ç¨‹æ¨¡å—ç›‘å¬åŒä¸€ä¸ªç«¯å£ã€‚æ‰€ä»¥é€šè¿‡listenå‡½æ•°å»æ§åˆ¶æ˜¯éå¸¸å¿…è¦çš„ã€‚ç›®å‰é€šè¿‡ä¿®æ”¹Node.jså†…æ ¸å¤§æ¦‚ä½“éªŒäº†ä¸€ä¸‹SO_RESUEPORTï¼Œåç»­reviewå’Œæ”¹è¿›ä¸€ä¸‹ä»£ç ã€‚æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å‚è€ƒå’Œç¼–è¯‘è¿è¡Œï¼Œå¦‚æœä½ æœ‰æƒ³æ³•æ¬¢è¿äº¤æµã€‚\nä»“åº“ï¼š<a href=\"https://github.com/theanarkh/node%E7%9A%84add-reuseport\">https://github.com/theanarkh/nodeçš„add-reuseport</a> åˆ†æ”¯\næ”¹åŠ¨ï¼š<a href=\"https://github.com/theanarkh/node/pull/1\">https://github.com/theanarkh/node/pull/1</a>\nLibuv prï¼š<a href=\"https://github.com/libuv/libuv/pull/3198\">https://github.com/libuv/libuv/pull/3198</a></p>\n<p>æ›´å¤šé˜…è¯»ï¼š\n1 <a href=\"https://www.nginx.com/blog/socket-sharding-nginx-release-1-9-1/\">Socket Sharding in NGINX Release 1.9.1</a>\n2 <a href=\"https://zhuanlan.zhihu.com/p/384355624\">æå‡Node.jsæ€§èƒ½ä¹‹SO_REUSEPORTçš„æ¢è®¨</a>\n3 <a href=\"https://mp.weixin.qq.com/s?__biz=MzUyNDE2OTAwNw==&amp;mid=2247485469&amp;idx=1&amp;sn=b9fcbed38f691ab3fca2e2d32cc6c07d&amp;chksm=fa30325dcd47bb4bdb33298d881fa10668bb521da96f9f16eb83bb00e36c6d2269d0fa16cfe1&amp;token=660197072&amp;lang=zh_CN#rd\">ä»å†…æ ¸çœ‹SO_REUSEPORTçš„å®ç°ï¼ˆåŸºäº5.9.9ï¼‰</a>\n4 <a href=\"https://zhuanlan.zhihu.com/p/371836188\">æœåŠ¡å™¨å¤„ç†è¿æ¥çš„æ¶æ„æ¼”å˜</a>\n5 <a href=\"https://lwn.net/Articles/542629/\">The SO_REUSEPORT socket option</a>\n6 <a href=\"https://lwn.net/Articles/542728/\">soreuseport: UDP/IPv4 implementation</a>\n7 <a href=\"https://man7.org/linux/man-pages/man7/socket.7.html\">SO_REUSEPORTå†…æ ¸æ–‡æ¡£</a></p>\n</div>",
      "title": "åœ¨Node.jsä¸­ä½¿ç”¨SO_RESUEPORT",
      "last_reply_at": "2021-07-23T09:53:47.591Z",
      "good": false,
      "top": false,
      "reply_count": 9,
      "visit_count": 843,
      "create_at": "2021-07-22T18:51:18.691Z",
      "author": {
        "loginname": "theanarkh",
        "avatar_url": "https://avatars.githubusercontent.com/u/21155906?v=4&s=120"
      }
    },
    {
      "id": "60fa8009e3e671477d58f2db",
      "author_id": "5f322c8a2799ce64a0aabac9",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p><img src=\"https://content.markdowner.net/pub/G5q2k7-Rm2vv9D\" alt></p>\n<p><a href=\"https://markdowner.net/article/203966476594446336\">é»‘å®¢è¯´ï¼šå¦‚ä½•åšåˆ° 4 å¤©ä¸Šçº¿ä¸€ä¸ªå°ç¨‹åºï¼Ÿ</a></p>\n</div>",
      "title": "é»‘å®¢è¯´ï¼šå¦‚ä½•åšåˆ° 4 å¤©ä¸Šçº¿ä¸€ä¸ªå°ç¨‹åºï¼Ÿ",
      "last_reply_at": "2021-07-23T08:38:33.425Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 862,
      "create_at": "2021-07-23T08:38:33.425Z",
      "author": {
        "loginname": "Q-Qplus1s",
        "avatar_url": "https://avatars.githubusercontent.com/u/50064165?v=4&s=120"
      }
    },
    {
      "id": "55b9e875f36f579657fc52f3",
      "author_id": "530ed7b25adfcd9c0f0713b6",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p>åœ¨å›¢é˜Ÿåˆä½œä¸­ï¼Œä½ å†™å¥½äº†ä¸€ä¸ªå‡½æ•°ï¼Œä¾›é˜Ÿå‹ä½¿ç”¨ï¼Œè·‘å»è·Ÿä½ çš„é˜Ÿå‹è¯´ï¼Œä½ ä¼ ä¸ªAå€¼è¿›å»ï¼Œä»–å°±ä¼šè¿”å›Bç»“æœäº†ã€‚è¿‡äº†ä¸€ä¼šï¼Œä½ é˜Ÿå‹è·‘è¿‡æ¥è¯´ï¼Œæˆ‘ä¼ ä¸ªAå€¼å´è¿”å›Cç»“æœï¼Œæ€ä¹ˆå›äº‹ï¼Ÿä½ ä¸«çš„æœ‰æ²¡æœ‰æµ‹è¯•è¿‡å•Šï¼Ÿ</p>\n<p>å¤§å®¶ä¸€èµ·å†™ä¸ªé¡¹ç›®ï¼Œéš¾å…ä¼šæœ‰æˆ‘è¦å†™çš„å‡½æ•°é‡Œé¢ä¾èµ–åˆ«äººçš„å‡½æ•°ï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°åˆ°åº•å€¼ä¸å€¼å¾—ä¿¡èµ–ï¼Ÿå•å…ƒæµ‹è¯•æ˜¯è¡¡é‡ä»£ç è´¨é‡çš„ä¸€é‡è¦æ ‡å‡†ï¼Œçºµè§‚Githubçš„å—æ¬¢è¿é¡¹ç›®ï¼Œéƒ½æ˜¯æœ‰testæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”buliding-passçš„ã€‚å¦‚æœä½ ä¹Ÿä¸ºç¤¾åŒºè´¡çŒ®è¿‡moduleï¼Œæƒ³æ›´å¤šäººä½¿ç”¨çš„è¯ï¼ŒåŠ ä¸Šå•å…ƒæµ‹è¯•å§ï¼Œè®©ä½ çš„moduleå€¼å¾—åˆ«äººä¿¡èµ–ã€‚</p>\n<p>è¦åœ¨Nodejsä¸­å†™å•å…ƒæµ‹è¯•çš„è¯ï¼Œä½ éœ€è¦çŸ¥é“ç”¨ä»€ä¹ˆæµ‹è¯•æ¡†æ¶ï¼Œæ€ä¹ˆæµ‹è¯•å¼‚æ­¥å‡½æ•°ï¼Œæ€ä¹ˆæµ‹è¯•ç§æœ‰æ–¹æ³•ï¼Œæ€ä¹ˆæ¨¡æ‹Ÿæµ‹è¯•ç¯å¢ƒï¼Œæ€ä¹ˆæµ‹è¯•ä¾èµ–HTTPåè®®çš„webåº”ç”¨ï¼Œéœ€è¦äº†è§£TDDå’ŒBDDï¼Œè¿˜æœ‰éœ€è¦æä¾›æµ‹è¯•çš„è¦†ç›–ç‡ã€‚</p>\n<blockquote>\n<p>æœ¬æ–‡çš„ç¤ºä¾‹ä»£ç ä¼šå¤‡ä»½åˆ° Github : <a href=\"https://github.com/JerryC8080/unittest-demo\">unittest-demo</a></p>\n</blockquote>\n<h2>ç›®å½•</h2>\n<ol>\n<li>æµ‹è¯•æ¡†æ¶</li>\n<li>æ–­è¨€åº“</li>\n<li>éœ€æ±‚å˜æ›´</li>\n<li>å¼‚æ­¥æµ‹è¯•</li>\n<li>å¼‚å¸¸æµ‹è¯•</li>\n<li>æµ‹è¯•ç§æœ‰æ–¹æ³•</li>\n<li>æµ‹è¯•Webåº”ç”¨</li>\n<li>è¦†ç›–ç‡</li>\n<li>ä½¿ç”¨MakefileæŠŠæµ‹è¯•ä¸²èµ·æ¥</li>\n<li>æŒç»­é›†æˆï¼ŒTravis-cli</li>\n<li>ä¸€äº›è§‚ç‚¹</li>\n<li>å½©è›‹</li>\n<li>æ•´ç†</li>\n</ol>\n<h2>æµ‹è¯•æ¡†æ¶</h2>\n<p>Nodejsçš„æµ‹è¯•æ¡†æ¶è¿˜ç”¨è¯´ï¼Ÿå¤§å®¶éƒ½åœ¨ç”¨ï¼ŒMochaã€‚</p>\n<p>Mocha æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„Javascriptæµ‹è¯•æ¡†æ¶ï¼Œå®ƒèƒ½è¿è¡Œåœ¨Node.jså’Œæµè§ˆå™¨ä¸­ï¼Œæ”¯æŒ<strong>BDD</strong>ã€<strong>TDD</strong>ã€<strong>QUnit</strong>ã€<strong>Exports</strong>å¼çš„æµ‹è¯•ï¼Œæœ¬æ–‡ä¸»è¦ç¤ºä¾‹æ˜¯ä½¿ç”¨æ›´æ¥è¿‘ä¸æ€è€ƒæ–¹å¼çš„BDDï¼Œ\bå¦‚æœäº†è§£æ›´å¤šå¯ä»¥è®¿é—®Mochaçš„<a href=\"http://mochajs.org/\">å®˜ç½‘</a></p>\n<h4>\b</h4>\n<h4>æµ‹è¯•æ¥å£</h4>\n<p>Mochaçš„BDDæ¥å£æœ‰ï¼š</p>\n<ul>\n<li><code>describe()</code></li>\n<li><code>it()</code></li>\n<li><code>before()</code></li>\n<li><code>after()</code></li>\n<li><code>beforeEach()</code></li>\n<li><code>afterEach()</code></li>\n</ul>\n<h4>å®‰è£…</h4>\n<p><code>npm install mocha -g</code></p>\n<h4>ç¼–å†™ä¸€ä¸ªç¨³å®šå¯é çš„æ¨¡å—</h4>\n<p>æ¨¡å—å…·å¤‡limitæ–¹æ³•ï¼Œè¾“å…¥ä¸€ä¸ªæ•°å€¼ï¼Œå°äº0çš„æ—¶å€™è¿”å›0ï¼Œå…¶ä½™æ­£å¸¸è¿”å›</p>\n<pre class=\"prettyprint language- javascript\"><code>exports.limit = function (num) {\n  if (num &lt; 0) {\n    return 0;\n  }\n  return num;\n};\n</code></pre><h4>ç›®å½•åˆ†é…</h4>\n<ul>\n<li><code>lib</code>ï¼Œå­˜æ”¾æ¨¡å—ä»£ç çš„åœ°æ–¹</li>\n<li><code>test</code>ï¼Œå­˜æ”¾å•å…ƒæµ‹è¯•ä»£ç çš„åœ°æ–¹</li>\n<li><code>index.js</code>ï¼Œå‘å¤–å¯¼å‡ºæ¨¡å—çš„åœ°æ–¹</li>\n<li><code>package.json</code>ï¼ŒåŒ…æè¿°æ–‡ä»¶</li>\n</ul>\n<h4>æµ‹è¯•</h4>\n<pre class=\"prettyprint language- javascript\"><code>var lib = require(&#x27;index&#x27;);\n\ndescribe(&#x27;module&#x27;, function () {\n  describe(&#x27;limit&#x27;, function () {\n    it(&#x27;limit should success&#x27;, function () {\n      lib.limit(10);\n    });\n  });\n});\n</code></pre><h4>ç»“æœ</h4>\n<p>åœ¨å½“å‰ç›®å½•ä¸‹æ‰§è¡Œ<code>mocha</code>ï¼š</p>\n<pre class=\"prettyprint language-\"><code>$ mocha\n\n  â€¤\n\n  âœ” 1 test complete (2ms)\n</code></pre><h2>æ–­è¨€åº“</h2>\n<p>ä¸Šé¢çš„ä»£ç åªæ˜¯è¿è¡Œäº†ä»£ç ï¼Œå¹¶æ²¡æœ‰å¯¹ç»“æœè¿›è¡Œæ£€æŸ¥ï¼Œè¿™æ—¶å€™å°±è¦ç”¨åˆ°æ–­è¨€åº“äº†ï¼ŒNode.jsä¸­å¸¸ç”¨çš„æ–­è¨€åº“æœ‰ï¼š</p>\n<ul>\n<li>should.js</li>\n<li>expect.js</li>\n<li>chai</li>\n</ul>\n<h4>åŠ ä¸Šæ–­è¨€</h4>\n<p>ä½¿ç”¨<code>should</code>åº“ä¸ºæµ‹è¯•ç”¨ä¾‹åŠ ä¸Šæ–­è¨€</p>\n<pre class=\"prettyprint language- javascript\"><code>it(&#x27;limit should success&#x27;, function () {\n  lib.limit(10).should.be.equal(10);\n});\n</code></pre><h2>\béœ€æ±‚å˜æ›´</h2>\n<p>éœ€æ±‚å˜æ›´å•¦ï¼š <code>limit</code>è¿™ä¸ªæ–¹æ³•è¿˜è¦æ±‚è¿”å›å€¼å¤§äº100æ—¶è¿”å›100ã€‚</p>\n<p>é’ˆå¯¹éœ€æ±‚é‡æ„ä»£ç ä¹‹åï¼Œæ­£æ˜¯æµ‹è¯•ç”¨ä¾‹çš„ä»·å€¼æ‰€åœ¨äº†ï¼Œ</p>\n<p>å®ƒèƒ½ç¡®ä¿ä½ çš„æ”¹åŠ¨å¯¹åŸæœ‰æˆæœæ²¡æœ‰é€ æˆç ´åã€‚</p>\n<p>ä½†æ˜¯ï¼Œä½ è¦å¤šåšçš„ä¸€äº›å·¥ä½œçš„æ˜¯ï¼Œéœ€è¦ä¸ºæ–°çš„éœ€æ±‚ç¼–å†™æ–°çš„æµ‹è¯•ä»£ç ã€‚</p>\n<h2>å¼‚æ­¥æµ‹è¯•</h2>\n<h4>æµ‹è¯•å¼‚æ­¥å›è°ƒ</h4>\n<p>libåº“ä¸­æ–°å¢asyncå‡½æ•°ï¼š</p>\n<pre class=\"prettyprint language- javascript\"><code>exports.async = function (callback) {\n  setTimeout(function () {\n    callback(10);\n  }, 10);\n};\t\n</code></pre><p>æµ‹è¯•å¼‚æ­¥ä»£ç ï¼š</p>\n<pre class=\"prettyprint language- javascript\"><code>describe(&#x27;async&#x27;, function () {\n  it(&#x27;async&#x27;, function (done) {\n    lib.async(function (result) {\n      done();\n    });\n  });\n});\n</code></pre><h4>æµ‹è¯•Promise</h4>\n<p>ä½¿ç”¨shouldæä¾›çš„Promiseæ–­è¨€æ¥å£:</p>\n<ul>\n<li><code>finally</code> | <code>eventually</code></li>\n<li><code>fulfilled</code></li>\n<li><code>fulfilledWith</code></li>\n<li><code>rejected</code></li>\n<li><code>rejectedWith</code></li>\n<li><code>then</code></li>\n</ul>\n<p>æµ‹è¯•ä»£ç </p>\n<pre class=\"prettyprint language- javascript\"><code>describe(&#x27;should&#x27;, function () {\n  describe(&#x27;#Promise&#x27;, function () {\n    it(&#x27;should.reject&#x27;, function () {\n      (new Promise(function (resolve, reject) {\n        reject(new Error(&#x27;wrong&#x27;));\n      })).should.be.rejectedWith(&#x27;wrong&#x27;);\n    });\n\n    it(&#x27;should.fulfilled&#x27;, function () {\n      (new Promise(function (resolve, reject) {\n        resolve({username: &#x27;jc&#x27;, age: 18, gender: &#x27;male&#x27;})\n      })).should.be.fulfilled().then(function (it) {\n          it.should.have.property(&#x27;username&#x27;, &#x27;jc&#x27;);\n        })\n    });\n  });\n});\n</code></pre><h4>å¼‚æ­¥æ–¹æ³•çš„è¶…æ—¶æ”¯æŒ</h4>\n<p>Mochaçš„è¶…æ—¶è®¾å®šé»˜è®¤æ˜¯2sï¼Œå¦‚æœæ‰§è¡Œçš„æµ‹è¯•è¶…è¿‡2sçš„è¯ï¼Œå°±ä¼šæŠ¥timeouté”™è¯¯ã€‚</p>\n<p>å¯ä»¥ä¸»åŠ¨ä¿®æ”¹è¶…æ—¶æ—¶é—´ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ã€‚</p>\n<h4>å‘½ä»¤è¡Œå¼</h4>\n<p><code>mocha -t 10000</code></p>\n<h4>APIå¼</h4>\n<pre class=\"prettyprint language- javascript\"><code>describe(&#x27;async&#x27;, function () {\n  this.timeout(10000);\n  it(&#x27;async&#x27;, function (done) {\n    lib.async(function (result) {\n      done();\n    });\n  });\n});\n</code></pre><p>è¿™æ ·çš„è¯<code>async</code>æ‰§è¡Œæ—¶é—´ä¸è¶…è¿‡10sï¼Œå°±ä¸ä¼šæŠ¥é”™timeouté”™è¯¯äº†ã€‚</p>\n<h2>å¼‚å¸¸æµ‹è¯•</h2>\n<p>å¼‚å¸¸åº”è¯¥æ€ä¹ˆæµ‹è¯•ï¼Œç°åœ¨æœ‰<code>getContent</code>æ–¹æ³•ï¼Œä»–ä¼šè¯»å–æŒ‡å®šæ–‡ä»¶çš„å†…å®¹ï¼Œä½†æ˜¯ä¸ä¸€å®šä¼šæˆåŠŸï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>\n<pre class=\"prettyprint language- javascript\"><code>exports.getContent = function (filename, callback) {\n  fs.readFile(filename, &#x27;utf-8&#x27;, callback);\n};\n</code></pre><p>è¿™æ—¶å€™å°±åº”è¯¥æ¨¡æ‹Ÿ(mock)é”™è¯¯ç¯å¢ƒäº†</p>\n<h4>ç®€å•Mock</h4>\n<pre class=\"prettyprint language- javascript\"><code>describe(&quot;getContent&quot;, function () {\n  var _readFile;\n  before(function () {\n    _readFile = fs.readFile;\n    fs.readFile = function (filename, encoding, callback) {\n      process.nextTick(function () {\n        callback(new Error(&quot;mock readFile error&quot;));\n      });\n    };\t\n  });\n  &#x2F;&#x2F; it();\n  after(function () {\n    &#x2F;&#x2F; ç”¨å®Œä¹‹åè®°å¾—è¿˜åŸã€‚å¦åˆ™å½±å“å…¶ä»–case\n    fs.readFile = _readFile;\n  })\n});\n</code></pre><h4>\bMockåº“</h4>\n<p>Mockå°æ¨¡å—ï¼š<a href=\"https://github.com/fent/node-muk\"><code>muk</code></a> ï¼Œç•¥å¾®ä¼˜ç¾çš„å†™æ³•ï¼š</p>\n<pre class=\"prettyprint language- javascript\"><code>var fs = require(&#x27;fs&#x27;);\nvar muk = require(&#x27;muk&#x27;);\n\nbefore(function () {\n  muk(fs, &#x27;readFile&#x27;, function(path, encoding, callback) {\n    process.nextTick(function () {\n      callback(new Error(&quot;mock readFile error&quot;));\n    });\n  });\n});\n&#x2F;&#x2F; it();\nafter(function () {\n  muk.restore();\n});\n</code></pre><h2>æµ‹è¯•ç§æœ‰æ–¹æ³•</h2>\n<p>é’ˆå¯¹ä¸€äº›å†…éƒ¨çš„æ–¹æ³•ï¼Œæ²¡æœ‰é€šè¿‡exportsæš´éœ²å‡ºæ¥ï¼Œæ€ä¹ˆæµ‹è¯•å®ƒï¼Ÿ</p>\n<pre class=\"prettyprint language- javascript\"><code>function _adding(num1, num2) {\n  return num1 + num2;\n}\n</code></pre><h4>é€šè¿‡rewireå¯¼å‡ºæ–¹æ³•</h4>\n<p>æ¨¡å—ï¼š<a href=\"http://jhnns.github.com/rewire/\"><code>rewire</code></a></p>\n<pre class=\"prettyprint language-\"><code>it(&#x27;limit should return success&#x27;, function () {\n  var lib = rewire(&#x27;..&#x2F;lib&#x2F;index.js&#x27;);\n  var litmit = lib.__get__(&#x27;limit&#x27;);\n  litmit(10);\n});\n</code></pre><h2>æµ‹è¯•Webåº”ç”¨</h2>\n<p>åœ¨å¼€å‘Webé¡¹ç›®çš„æ—¶å€™ï¼Œè¦æµ‹è¯•æŸä¸€ä¸ªAPIï¼Œå¦‚ï¼š<code>/user</code>ï¼Œåˆ°åº•æ€ä¹ˆç¼–å†™æµ‹è¯•ç”¨ä¾‹å‘¢ï¼Ÿ</p>\n<p>ä½¿ç”¨ï¼š<a href=\"https://github.com/visionmedia/supertest\"><code>supertest</code></a></p>\n<pre class=\"prettyprint language- javascript\"><code>var express = require(&quot;express&quot;);\nvar request = require(&quot;supertest&quot;);\nvar app = express();\n\n&#x2F;&#x2F; å®šä¹‰è·¯ç”±\napp.get(&#x27;&#x2F;user&#x27;, function(req, res){\n  res.send(200, { name: &#x27;jerryc&#x27; });\n});\n\ndescribe(&#x27;GET &#x2F;user&#x27;, function(){\n  it(&#x27;respond with json&#x27;, function(done){\n    request(app)\n      .get(&#x27;&#x2F;user&#x27;)\n      .set(&#x27;Accept&#x27;, &#x27;application&#x2F;json&#x27;)\n      .expect(&#x27;Content-Type&#x27;, &#x2F;json&#x2F;)\n      .expect(200)\n      .end(function (err, res) {\n        if (err){\n          done(err);\n        }\n        res.body.name.should.be.eql(&#x27;jerryc&#x27;);\n        done();\n      })\n  });\n});\n</code></pre><h2>è¦†ç›–ç‡</h2>\n<p>æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸¸å¸¸å…³å¿ƒï¼Œæ˜¯å¦æ‰€æœ‰ä»£ç éƒ½æµ‹è¯•åˆ°äº†ã€‚</p>\n<p>è¿™ä¸ªæŒ‡æ ‡å°±å«åš<a href=\"http://en.wikipedia.org/wiki/Code_coverage\">&quot;ä»£ç è¦†ç›–ç‡&quot;</a>ï¼ˆcode coverageï¼‰ã€‚å®ƒæœ‰å››ä¸ªæµ‹é‡ç»´åº¦ã€‚</p>\n<blockquote>\n<ul>\n<li><strong>è¡Œè¦†ç›–ç‡</strong>ï¼ˆline coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸€è¡Œéƒ½æ‰§è¡Œäº†ï¼Ÿ</li>\n<li><strong>å‡½æ•°è¦†ç›–ç‡</strong>ï¼ˆfunction coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªå‡½æ•°éƒ½è°ƒç”¨äº†ï¼Ÿ</li>\n<li><strong>åˆ†æ”¯è¦†ç›–ç‡</strong>ï¼ˆbranch coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªifä»£ç å—éƒ½æ‰§è¡Œäº†ï¼Ÿ</li>\n<li><strong>è¯­å¥è¦†ç›–ç‡</strong>ï¼ˆstatement coverageï¼‰ï¼šæ˜¯å¦æ¯ä¸ªè¯­å¥éƒ½æ‰§è¡Œäº†ï¼Ÿ</li>\n</ul>\n</blockquote>\n<p><a href=\"https://github.com/gotwarlost/istanbul\">Istanbul</a> æ˜¯ JavaScript ç¨‹åºçš„ä»£ç è¦†ç›–ç‡å·¥å…·ã€‚</p>\n<h4>å®‰è£…</h4>\n<p><code>$ npm install -g istanbul</code></p>\n<h4>è¦†ç›–ç‡æµ‹è¯•</h4>\n<p>åœ¨ç¼–å†™è¿‡ä»¥ä¸Šçš„æµ‹è¯•ç”¨ä¾‹ä¹‹åï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>\n<p><code>istanbul cover _mocha</code></p>\n<p>å°±èƒ½å¾—åˆ°è¦†ç›–ç‡:</p>\n<pre class=\"prettyprint language- javascript\"><code>JerryC% istanbul cover _mocha                                                                                                                                                                \n\n\n  module\n    limit\n      âœ“ limit should success\n    async\n      âœ“ async\n    getContent\n      âœ“ getContent\n    add\n      âœ“ add\n\n  should\n    #Promise\n      âœ“ should.reject\n      âœ“ should fulfilled\n\n\n  6 passing (32ms)\n\n\n================== Coverage summary ======================\nStatements   : 100% ( 10&#x2F;10 )\nBranches     : 100% ( 2&#x2F;2 )\nFunctions    : 100% ( 5&#x2F;5 )\nLines        : 100% ( 10&#x2F;10 )\n==========================================================\n</code></pre><p>è¿™æ¡å‘½ä»¤åŒæ—¶è¿˜ç”Ÿæˆäº†ä¸€ä¸ª coverage å­ç›®å½•ï¼Œå…¶ä¸­çš„ coverage.json æ–‡ä»¶åŒ…å«è¦†ç›–ç‡çš„åŸå§‹æ•°æ®ï¼Œcoverage/lcov-report æ˜¯å¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€çš„è¦†ç›–ç‡æŠ¥å‘Šï¼Œå…¶ä¸­æœ‰è¯¦ç»†ä¿¡æ¯ï¼Œåˆ°åº•å“ªäº›ä»£ç æ²¡æœ‰è¦†ç›–åˆ°ã€‚</p>\n<p><img src=\"http://xia-dev.b0.upaiyun.com/eac87dbf-4e4b-426e-80ac-7c50e1b9a1cb.jpg\" alt=\"è¦†ç›–ç‡html\"></p>\n<p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œ<code>istanbul cover</code> å‘½ä»¤åé¢è·Ÿçš„æ˜¯ <code>_mocha</code> å‘½ä»¤ï¼Œå‰é¢çš„ä¸‹åˆ’çº¿æ˜¯ä¸èƒ½çœç•¥çš„ã€‚</p>\n<p>å› ä¸ºï¼Œ<a href=\"https://github.com/gotwarlost/istanbul/issues/44\">mocha å’Œ _mocha æ˜¯ä¸¤ä¸ªä¸åŒçš„å‘½ä»¤</a>ï¼Œå‰è€…ä¼šæ–°å»ºä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ï¼Œè€Œåè€…æ˜¯åœ¨å½“å‰è¿›ç¨‹ï¼ˆå³ istanbul æ‰€åœ¨çš„è¿›ç¨‹ï¼‰æ‰§è¡Œæµ‹è¯•ï¼Œåªæœ‰è¿™æ ·ï¼Œ istanbul æ‰ä¼šæ•æ‰åˆ°è¦†ç›–ç‡æ•°æ®ã€‚å…¶ä»–æµ‹è¯•æ¡†æ¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¿…é¡»åœ¨åŒä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ã€‚</p>\n<p>å¦‚æœè¦å‘ mocha ä¼ å…¥å‚æ•°ï¼Œå¯ä»¥å†™æˆä¸‹é¢çš„æ ·å­ã€‚</p>\n<pre class=\"prettyprint language-\"><code>$ istanbul cover _mocha -- tests&#x2F;test.sqrt.js -R spec\n</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œä¸¤æ ¹è¿è¯çº¿åé¢çš„éƒ¨åˆ†ï¼Œéƒ½ä¼šè¢«å½“ä½œå‚æ•°ä¼ å…¥ Mocha ã€‚å¦‚æœä¸åŠ é‚£ä¸¤æ ¹è¿è¯çº¿ï¼Œå®ƒä»¬å°±ä¼šè¢«å½“ä½œ istanbul çš„å‚æ•°ï¼ˆå‚è€ƒé“¾æ¥<a href=\"http://www.clock.co.uk/blog/npm-module-code-coverage-in-2-simple-steps\">1</a>ï¼Œ<a href=\"http://www.vapidspace.com/coding/2014/10/29/code-coverage-metrics-with-mocha-and-istanbul/\">2</a>ï¼‰ã€‚</p>\n<h2>ä½¿ç”¨Makefileä¸²èµ·é¡¹ç›®</h2>\n<pre class=\"prettyprint language-\"><code>TESTS = test&#x2F;*.test.js\nREPORTER = spec\nTIMEOUT = 10000\nJSCOVERAGE = .&#x2F;node_modules&#x2F;jscover&#x2F;bin&#x2F;jscover\n\ntest:\n    @NODE_ENV=test .&#x2F;node_modules&#x2F;mocha&#x2F;bin&#x2F;mocha -R $(REPORTER) -t $(TIMEOUT) $(TESTS)\n\ntest-cov: lib-cov\n    @LIB_COV=1 $(MAKE) test REPORTER=dot\n    @LIB_COV=1 $(MAKE) test REPORTER=html-cov &gt; coverage.html\n\nlib-cov:\n    @rm -rf .&#x2F;lib-cov\n    @$(JSCOVERAGE) lib lib-cov\n\n.PHONY: test test-cov lib-cov\n\nmake test\nmake test-cov\n\n</code></pre><p>ç”¨é¡¹ç›®è‡ªèº«çš„jscoverå’Œmochaï¼Œé¿å…ç‰ˆæœ¬å†²çªå’Œæ··ä¹±</p>\n<h2>æŒç»­é›†æˆï¼ŒTravis-cli</h2>\n<ul>\n<li><a href=\"https://travis-ci.org/\">Travis-ci</a>\n<ul>\n<li>ç»‘å®šGithubå¸å·</li>\n<li>åœ¨Githubä»“åº“çš„Adminæ‰“å¼€Services hook</li>\n<li>æ‰“å¼€Travis</li>\n<li>æ¯æ¬¡pushå°†ä¼šhookè§¦å‘æ‰§è¡Œ<code>npm test</code>å‘½ä»¤</li>\n</ul>\n</li>\n</ul>\n<p>æ³¨æ„ï¼šTravisä¼šå°†æœªæè¿°çš„é¡¹ç›®å½“ä½œRubyé¡¹ç›®ã€‚æ‰€ä»¥éœ€è¦åœ¨æ ¹ç›®å½•ä¸‹åŠ å…¥<code>.travis.yml</code>æ–‡ä»¶ã€‚å†…å®¹å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint language- yaml\"><code>language: node_js\nnode_js:\n  - &quot;0.12&quot;\n</code></pre><p>Travis-cliè¿˜ä¼šå¯¹é¡¹ç›®é¢å‘æ ‡ç­¾ï¼Œ</p>\n<p><img src=\"https://camo.githubusercontent.com/f479d6cf4ac300093da5a90d70565cebf8c8ed40/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f4a61636b736f6e5469616e2f626167706970652e706e67\" alt=\"/\">or <img src=\"https://camo.githubusercontent.com/08478cd5a732822aec47e6e60d5f823ef0898dec/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f54424544502f64617461766a732e706e67\" alt=\"/\"></p>\n<p>å¦‚æœé¡¹ç›®é€šè¿‡æ‰€æœ‰æµ‹è¯•ï¼Œå°±ä¼šbuild-passingï¼Œ</p>\n<p>å¦‚æœé¡¹ç›®æ²¡æœ‰é€šè¿‡æ‰€æœ‰æµ‹è¯•ï¼Œå°±ä¼šbuild-failing</p>\n<h2>ä¸€äº›è§‚ç‚¹</h2>\n<p>å®æ–½å•å…ƒæµ‹è¯•çš„æ—¶å€™, å¦‚æœæ²¡æœ‰ä¸€ä»½ç»è¿‡å®è·µè¯æ˜çš„è¯¦ç»†è§„èŒƒ, å¾ˆéš¾æŒæ¡æµ‹è¯•çš„ â€œåº¦â€, èŒƒå›´å¤ªå°æ–½å±•ä¸å¼€, å¤ªå¤§åˆä¾µçŠ¯ â€œåˆ«äººçš„â€ åœ°ç›˜. ä¸Šå¸çš„å½’ä¸Šå¸, å‡¯æ’’çš„å½’å‡¯æ’’, ç»™å•å…ƒæµ‹è¯•å¿µå¿µç´§ç®å’’ä¸è§å¾—æ˜¯ä»¶åäº‹, åè€Œæ›´æœ‰åˆ©äºå‘æŒ¥å•å…ƒæµ‹è¯•çš„å¨åŠ›, ä¸ºä»£ç é‡æ„å’Œæé«˜ä»£ç è´¨é‡æä¾›åŠ¨åŠ›.</p>\n<p>è¿™ä»½æ–‡æ¡£æ¥è‡ª Geotechnical, æ˜¯ä¸€ä»½éå¸¸éš¾å¾—çš„ç»éªŒå‡†åˆ™. ä½ å®Œå…¨å¯ä»¥ä»¥è¿™ä»½å‡†åˆ™ä½œä¸ºæ¨¡æ¿, ç»“åˆæ‰€åœ¨å›¢é˜Ÿçš„ç»éªŒ, æ•´ç†å‡ºä¸€ä»½å†…éƒ¨å•å…ƒæµ‹è¯•å‡†åˆ™.</p>\n<p><a href=\"https://github.com/yangyubo/zh-unit-testing-guidelines\">å•å…ƒæµ‹è¯•å‡†åˆ™</a></p>\n<h2>å½©è›‹</h2>\n<p>æœ€åï¼Œä»‹ç»ä¸€ä¸ªåº“ï¼š<a href=\"https://github.com/Marak/Faker.js\"><code>faker</code></a></p>\n<p>ä»–æ˜¯ä¸€ä¸ªèƒ½ä¼ªé€ ç”¨æˆ·æ•°æ®çš„åº“ï¼ŒåŒ…æ‹¬ç”¨æˆ·å¸¸åŒ…å«çš„å±æ€§ï¼šä¸ªäººä¿¡æ¯ã€å¤´åƒã€åœ°å€ç­‰ç­‰ã€‚</p>\n<p>æ˜¯ä¸€ä¸ªå¼€å‘åˆæœŸï¼Œæ¨¡æ‹Ÿç”¨æˆ·æ•°æ®çš„ç»ä½³å¥½åº“ã€‚</p>\n<p>æ”¯æŒNode.jså’Œæµè§ˆå™¨ç«¯ã€‚</p>\n<p><img src=\"http://xia-dev.b0.upaiyun.com/43075e5e-026f-4acb-a51f-a998cf1a6e11.jpg\" alt=\"ç”Ÿæˆç”¨æˆ·\"></p>\n<h2>æ•´ç†</h2>\n<h4>Nodejsçš„å•å…ƒæµ‹è¯•å·¥å…·</h4>\n<ol>\n<li>æµ‹è¯•æ¡†æ¶ mocha</li>\n<li>æ–­è¨€åº“ï¼šshould.jsã€expect.jsã€chai</li>\n<li>è¦†ç›–ç‡ï¼šistanbulã€jscoverã€blanket</li>\n<li>Mockåº“ï¼šmuk</li>\n<li>æµ‹è¯•ç§æœ‰æ–¹æ³•ï¼šrewire</li>\n<li>Webæµ‹è¯•ï¼šsupertest</li>\n<li>æŒç»­é›†æˆï¼šTravis-cli</li>\n</ol>\n<h2>å‚è€ƒ</h2>\n<ul>\n<li><a href=\"https://github.com/JacksonTian/unittesting\">https://github.com/JacksonTian/unittesting</a></li>\n<li><a href></a><a href=\"http://html5ify.com/unittesting/slides/index.html\">http://html5ify.com/unittesting/slides/index.html</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2015/06/istanbul.html\">http://www.ruanyifeng.com/blog/2015/06/istanbul.html</a></li>\n<li><a href=\"http://coolshell.cn/articles/8209.html\">http://coolshell.cn/articles/8209.html</a></li>\n<li><a href=\"http://stackoverflow.com/questions/153234/how-deep-are-your-unit-tests\">http://stackoverflow.com/questions/153234/how-deep-are-your-unit-tests</a></li>\n<li><a href=\"https://github.com/yangyubo/zh-unit-testing-guidelines\">https://github.com/yangyubo/zh-unit-testing-guidelines</a></li>\n<li><a href=\"http://www.codedata.com.tw/java/unit-test-the-way-changes-my-programming\">http://www.codedata.com.tw/java/unit-test-the-way-changes-my-programming</a></li>\n<li><a href=\"http://wiki.ubuntu.org.cn/%E8%B7%9F%E6%88%91%E4%B8%80%E8%B5%B7%E5%86%99Makefile:MakeFile%E4%BB%8B%E7%BB%8D\">http://wiki.ubuntu.org.cn/%E8%B7%9F%E6%88%91%E4%B8%80%E8%B5%B7%E5%86%99Makefile:MakeFile%E4%BB%8B%E7%BB%8D</a></li>\n<li><a href=\"https://github.com/yangyubo/zh-unit-testing-guidelines\">https://github.com/yangyubo/zh-unit-testing-guidelines</a></li>\n<li><a href=\"https://github.com/visionmedia/superagent/blob/master/Makefile\">https://github.com/visionmedia/superagent/blob/master/Makefile</a></li>\n</ul>\n</div>",
      "title": "åœ¨Nodejsä¸­è´¯å½»å•å…ƒæµ‹è¯•",
      "last_reply_at": "2021-07-23T06:48:05.988Z",
      "good": true,
      "top": false,
      "reply_count": 70,
      "visit_count": 32524,
      "create_at": "2015-07-30T09:03:49.843Z",
      "author": {
        "loginname": "JerryC8080",
        "avatar_url": "https://avatars0.githubusercontent.com/u/6801672?v=4&s=120"
      }
    },
    {
      "id": "60fa2c5be3e671ac7a58f1d9",
      "author_id": "5cf4a00795fcc914aa265866",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><h2>èƒŒæ™¯</h2>\n<p>é¡¹ç›®ä¸­éœ€è¦ä¸€ä»½jsoné…ç½®æ–‡ä»¶ï¼Œè¿™ä»½é…ç½®æ–‡ä»¶çš„æŸäº›å­—æ®µæ˜¯ä¾æ®å¦å¤–çš„ä¸€ä¸ªtypescripæ–‡ä»¶<code>export</code>å‡ºæ¥çš„å­—æ®µï¼Œä¸ºäº†é™ä½ç¼–ç è¿‡ç¨‹ä¸­é€ æˆçš„å­—æ®µåå‡ºé”™çš„æœºç‡ã€‚</p>\n<p>å› æ­¤ï¼Œè€ƒè™‘å¼€å‘ä¸€ä¸ªæ’ä»¶ç”¨äºï¼š</p>\n<ul>\n<li>jsonæ–‡ä»¶ä¸­è‡ªåŠ¨è¡¥å…¨function name</li>\n<li>jaonæ–‡ä»¶åˆ°typescriptæ–‡ä»¶çš„è‡ªå®šä¹‰è·³è½¬</li>\n<li>jsonæ–‡ä»¶ä¸­é”™è¯¯æ³¢æµªçº¿æ™ºèƒ½æç¤ºï¼ˆå½“typescriptæ–‡ä»¶æ²¡æœ‰exportè¯¥å­—æ®µæ—¶æ˜¾ç¤ºæ³¢æµªçº¿ï¼‰</li>\n</ul>\n<p>æ’ä»¶æ•ˆæœï¼š</p>\n<p><img src=\"https://itc.desaysv.com/dfs/wxapp-assets/other/hello.gif\" alt=\"IDE\"></p>\n<h2>å®ç°</h2>\n<p>æ€è·¯ï¼šå®šä¹‰ä¸¤ä¸ªæ’ä»¶å˜é‡ï¼ˆå¯æ ¹æ®å®é™…æƒ…å†µè‡ªå·±åœ¨æ’ä»¶è®¾ç½®é‡Œé¢é…ç½®ï¼‰</p>\n<ul>\n<li>fileNameï¼šç”¨äºè¯†åˆ«æ–‡ä»¶åå…³é”®å­— â€“ é»˜è®¤ä¸º<code>index</code></li>\n<li>filePathï¼šä»¥jsonæ–‡ä»¶ä¸ºå‚ç…§ï¼Œindex typescriptæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼Œç”¨äºè·å–tsæ–‡ä»¶ â€“ é»˜è®¤ä¸º<code>./src/index</code></li>\n<li>å…³é”®å®ç°ï¼šä½¿ç”¨<code>@babel/parser</code>ã€<code>@babel/traverse</code>å°†tsæ–‡ä»¶è½¬åŒ–ASTï¼Œè¿™æ ·æ‰èƒ½è·å–åˆ°tsæ–‡ä»¶ä¸­exportå‡ºæ¥çš„function name</li>\n</ul>\n<p><a href=\"https://github.com/YonSunZhen/vscode-plugin-json-go-ts\">é¡¹ç›®æºç </a></p>\n<h3>è‡ªåŠ¨è¡¥å…¨</h3>\n<p>æ€è·¯ï¼š</p>\n<ul>\n<li>è·å–tsæ–‡ä»¶ä¸­exportå‡ºæ¥çš„functionåˆ—è¡¨</li>\n<li>ç›‘å¬VS Codeä¸­å…‰æ ‡å¤„è¾“å…¥çš„å­—ç¬¦ï¼Œå½“è¾“å…¥<code>index.</code>æ—¶ï¼Œå¼¹å‡ºè‡ªåŠ¨è¡¥å…¨é¢æ¿ï¼Œæ­¤æ—¶è‡ªåŠ¨è¡¥å…¨é¢æ¿ä¸­çš„å†…å®¹å°±æ˜¯tsæ–‡ä»¶ä¸­exportå‡ºæ¥çš„æ‰€æœ‰functionåˆ—è¡¨</li>\n</ul>\n<p>å…³é”®ä»£ç å®ç°ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>export function provideCompletionItems(document, position, token, context) {\n  const _filePath = getFilePath(document, filePath);\n  const _fnData = getFnFromTsFile(&#96;${_filePath}.ts&#96;);\n  const linePrefix = document.lineAt(position).text.substr(0, position.character);\n  if (!linePrefix.endsWith(&#96;&quot;${fileName}.&#96;)) {\n    return undefined;\n  }\n  let myitem = (text: string) =&gt; {\n    let item = new vscode.CompletionItem(text, vscode.CompletionItemKind.Function);\n    item.range = new vscode.Range(position, position);\n    return item;\n  };\n  return _fnData.map(_fnItem =&gt; myitem(_fnItem.fnName));\n}\n</code></pre><h3>è·³è½¬åˆ°å®šä¹‰</h3>\n<p>æ€è·¯ï¼š</p>\n<ul>\n<li>è·å–tsæ–‡ä»¶ä¸­exportå‡ºæ¥çš„functionåˆ—è¡¨ï¼ŒåŒ…æ‹¬æ¯ä¸ªfunctionå¯¹åº”çš„locï¼ˆå³functionåœ¨ç¼–è¾‘å™¨ä¸­æ‰€å¤„çš„ä½ç½®ä¿¡æ¯ï¼‰ï¼Œ<strong>è¿™å°±æ˜¯å‰é¢æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å°†tsæ–‡ä»¶è½¬åŒ–ä¸ºASTçš„é‡è¦åŸå› </strong>ï¼Œåé¢å®ç°ä»£ç è·³è½¬éœ€è¦ç”¨åˆ°è¿™äº›ä½ç½®ä¿¡æ¯</li>\n<li>è·å–å…‰æ ‡å¤„æ‰€åœ¨çš„functionå¹¶è·³è½¬åˆ°å¯¹åº”tsæ–‡ä»¶ä¸­çš„å¯¹åº”ä½ç½®</li>\n</ul>\n<p>å…³é”®ä»£ç å®ç°ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>export function provideDefinition(document: vscode.TextDocument, position: vscode.Position, token) {\n  const _filePath = getFilePath(document, filePath);\n  const _fnData = getFnFromTsFile(&#96;${_filePath}.ts&#96;);  \n  const _wordRangePosition = document.getWordRangeAtPosition(position);\n  const word = document.getText(_wordRangePosition); &#x2F;&#x2F; è·å–å½“å‰å…‰æ ‡è¾“å…¥å­—ç¬¦\n  const _reg = new RegExp(&#96;&quot;${fileName}\\..*&quot;&#96;);  \n  if (_reg.test(word)) {\n    &#x2F;&#x2F; const _fnName = word.replace(&#x2F;&quot;index\\.|&quot;&#x2F;g, &#x27;&#x27;);\n    const _fnName = word.replace(new RegExp(&#96;&quot;${fileName}\\.|&quot;&#96;, &#x27;g&#x27;), &#x27;&#x27;);\n    if(_fnData.map(_fnItem =&gt; _fnItem.fnName).includes(_fnName)) {\n      const filePath = &#96;${_filePath}.ts&#96;;\n      for(const _fnItem of _fnData) {\n        if(_fnItem.fnName === _fnName) {\n          const tmpPath = &#96;file:&#x2F;&#x2F;&#x2F;${filePath}&#96;; &#x2F;&#x2F; TODO: è¸©å‘è®°å½• å¿…é¡» &#x2F;&#x2F;&#x2F;\n          if (fs.existsSync(filePath)) {\n            const _targetUri = vscode.Uri.parse(tmpPath); &#x2F;&#x2F; TODO: è¸©å‘è®°å½• ä½¿ç”¨parse\n            const _targetPosition = new vscode.Position(_fnItem.loc.start.line, _fnItem.loc.start.column);\n            const _targetRange = new vscode.Range(_targetPosition, _targetPosition);\n            const _fileNameLen = (fileName as string).length || 0;\n             &#x2F;&#x2F; å½“æŒ‰ä½ctrlæ—¶ï¼Œç¼–è¾‘å™¨é»˜è®¤ä¼šå°†è¿åœ¨ä¸€å—çš„å­—ç¬¦éƒ½æ˜¾ç¤ºå‡ºæ¥ä¸‹åˆ’çº¿ è¿™æ—¶å€™å¦‚æœæƒ³æŒ‡å®šå“ªäº›å­—ç¬¦éœ€è¦æ˜¾ç¤ºä¸‹åˆ’çº¿éœ€è¦é…ç½®ä»¥ä¸‹çš„originSelectionRange\n            const _orgSelectionStartPosition = new vscode.Position(_wordRangePosition.start.line, _wordRangePosition.start.character + _fileNameLen + 2);\n            const _orgSelectionEndPosition = new vscode.Position(_wordRangePosition.end.line, _wordRangePosition.end.character - 1);\n            const _originSelectionRange = new vscode.Range(_orgSelectionStartPosition, _orgSelectionEndPosition);\n            const _locationLink: vscode.LocationLink = {\n              originSelectionRange: _originSelectionRange,\n              targetUri: _targetUri,\n              targetRange: _targetRange\n            };\n            return [_locationLink];\n            &#x2F;&#x2F; return new vscode.Location(vscode.Uri.parse(tmpPath), new vscode.Position(_fnItem.loc.start.line, _fnItem.loc.start.column));\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre><h3>æ™ºèƒ½è¯Šæ–­&amp;æç¤º</h3>\n<p>è¿™ä¸ªåŠŸèƒ½çš„ä¸»è¦å¯¹è±¡æ˜¯jsonæ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è·å–åˆ°jsonæ–‡ä»¶ä¸­æ‰€æœ‰çš„å­—æ®µï¼ŒåŒ…æ‹¬æ¯ä¸ªå­—æ®µæ‰€å¤„çš„ä½ç½®ä¿¡æ¯ï¼ˆä¸ºäº†åé¢æ˜¾ç¤ºæ³¢æµªçº¿ï¼‰ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šæƒ³åˆ°è¯´ï¼Œå°†jsonæ–‡ä»¶è½¬åŒ–ä¸ºASTï¼Œæ€è·¯æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯å‰é¢è¯´çš„<code>@babel/traverse</code>åªèƒ½ç”¨æ¥è½¬åŒ–jsæˆ–tsæ–‡ä»¶ï¼Œå¹¶ä¸æ”¯æŒjsonæ–‡ä»¶çš„è½¬åŒ–</p>\n<p>å¹¸å¥½åˆ«äººå·²ç»æœ‰å†™è¿‡ç±»ä¼¼çš„è½®å­äº†ï¼Œ<a href=\"https://www.npmjs.com/package/json-to-ast\">json-to-ast</a>å‡ºåœºï¼Œ<code>json-to-ast</code>å¯ä»¥å°†jsonæ–‡ä»¶è½¬åŒ–ä¸ºASTï¼Œæ„Ÿè°¢å¼€æºã€‚</p>\n<p>å¦å¤–ï¼šåœ¨VS Codeä¸­æ™ºèƒ½è¯Šæ–­ä½¿ç”¨<code>createDiagnosticCollection</code>è¿™ä¸ªAPIæ¥å®ç°çš„ï¼Œåˆ‡è®°ã€‚</p>\n<p>å…³é”®ä»£ç å®ç°ï¼š</p>\n<pre class=\"prettyprint language-js\"><code>&#x2F;&#x2F; æ™ºèƒ½è¯Šæ–­ æ³¢æµªçº¿æç¤º\nconst collection = vscode.languages.createDiagnosticCollection(&#x27;testFnName&#x27;);\nif (vscode.window.activeTextEditor) {\n  collection.clear();\n  updateDiagnostics(vscode.window.activeTextEditor.document, collection);\n}\n&#x2F;&#x2F; ä½¿ç”¨onDidChangeTextDocumentç›‘å¬ç¼–è¾‘æ–‡æ¡£äº‹ä»¶\ncontext.subscriptions.push(vscode.workspace.onDidChangeTextDocument(editor =&gt; {\n  if (editor) {\n    collection.clear();\n    updateDiagnostics(editor.document, collection);\n  }\n}));\n</code></pre><pre class=\"prettyprint language-js\"><code>export function updateDiagnostics(document: vscode.TextDocument, collection: vscode.DiagnosticCollection): void {\n  const _text = document.getText();\n  const _jsonAst = jsonToAst(_text) as jsonToAst.ObjectNode;\n  const _errorText: JsonTextInfo[] = [];\n  const _filePath = getFilePath(document, filePath);\n  const _fnData = getFnFromTsFile(&#96;${_filePath}.ts&#96;);  \n  const recursiveJsonAst = (astArr: any[]) =&gt; {\n    astArr.forEach((jsonAstItem) =&gt; {\n      const _value = jsonAstItem?.value || jsonAstItem?.children;\n      if(_value.children) {\n        recursiveJsonAst(_value.children);\n      } else if(Array.isArray(_value)) {\n        recursiveJsonAst(_value);\n      } else {\n        const _textValue = _value.value;\n        const _reg = new RegExp(&#96;${fileName}\\..*&#96;, &#x27;g&#x27;);\n        if(_reg.test(_textValue)) {\n          const _fnVal = _textValue.replace(new RegExp(&#96;${fileName}\\.&#96;, &#x27;g&#x27;), &#x27;&#x27;);\n          if(!_fnData.map((_fnItem =&gt; _fnItem.fnName)).includes(_fnVal)) {\n            _errorText.push({\n              value: _fnVal,\n              loc: _value.loc\n            });\n          }\n        }\n      }  \n    });\n  };\n  recursiveJsonAst(_jsonAst.children);\n  const _diagCollection = [];\n  _errorText.forEach(_errTextItem =&gt; {\n    const _start = _errTextItem.loc.start;\n    const _end = _errTextItem.loc.end;\n    const _fileNameLen = (fileName as string).length || 0;\n    const _startPosition = new vscode.Position(_start.line - 1, _start.column + _fileNameLen + 1);\n    const _endPosition = new vscode.Position(_end.line - 1, _end.column - 2);\n    _diagCollection.push({\n      message: &#96;Function ${_errTextItem.value} does not exist&#96;,\n      range: new vscode.Range(_startPosition, _endPosition),\n      severity: vscode.DiagnosticSeverity.Error,\n    });\n  });\n  collection.set(document.uri, _diagCollection);\n}\n</code></pre><h2>ä¸€äº›è¸©å‘</h2>\n<ol>\n<li>å‘å¸ƒæ’ä»¶æ—¶æ‰§è¡Œ<code>vsce publish</code>æ—¶æŠ¥é”™<code>ERROR Failed request: (401)</code>ï¼Œç”Ÿæˆçš„personal access tokenæƒé™å¼„é”™äº†ï¼Œåº”è¯¥é€‰<code>Full access</code></li>\n</ol>\n<p><img src=\"http://122.51.184.238/storage/files/1_5_%E6%9D%82%E7%83%A9/2_25_json-go-ts1.jpeg\" alt></p>\n<ol>\n<li>\n<p>å‘å¸ƒæ’ä»¶æ—¶æŠ¥é”™ï¼š<code>ERROR Make sure to edit the README.md file before you package or publish your extension</code> â€“ ä¿®æ”¹ä¸€ä¸‹å·¥ç¨‹é‡Œé¢çš„<code>README.md</code>æ–‡ä»¶ï¼ˆåŸæ¥çš„æ–‡ä»¶åˆ é™¤&amp;é‡å†™ï¼‰</p>\n</li>\n<li>\n<p>ä½¿ç”¨<a href=\"https://marketplace.visualstudio.com/manage/createpublisher?managePageRedirect=true\">åœ°å€</a>åˆ›å»ºpublisherè´¦å·ä¸€ç›´ä¸æˆåŠŸ â€“ ç½‘ç»œè¢«é™åˆ¶äº†ï¼ˆç§‘å­¦ä¸Šç½‘çœŸé¦™ï¼‰</p>\n</li>\n<li>\n<p>æ’ä»¶åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä¸‹å¯ä»¥è¿è¡Œï¼Œå‘å¸ƒåˆ°çº¿ä¸Šæ²¡æœ‰å“åº”ï¼ˆä¹Ÿæ²¡æœ‰æŠ¥é”™ï¼‰</p>\n<p>ç»è¿‡æ’æŸ¥ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨äº†ä¸€äº›npmåº“ï¼Œä½†æ˜¯å‘å¸ƒæ’ä»¶æ—¶ä½¿ç”¨äº†<code>tsc</code>æ¥ç¼–è¯‘ï¼Œè¿™ç§æƒ…å†µä¸‹<code>node_modules</code>é‡Œé¢ä¸€äº›npmåº“çš„ä»£ç æ˜¯æ²¡æœ‰è¢«ç¼–è¯‘è¿›å»çš„ã€‚éœ€è¦å¼•å…¥<code>webpack</code>æ¥è¿›è¡Œæ‰“åŒ…&amp;ç¼–è¯‘</p>\n</li>\n</ol>\n<h2>å‚è€ƒ</h2>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/64584850/get-vscode-registercompletionitemprovider-to-work-in-a-json-file-with-a-word\">jsonæ–‡ä»¶ä¸­è‡ªåŠ¨è¡¥å…¨é¢æ¿ä¸å¼¹å‡º</a></li>\n<li><a href=\"https://www.cnblogs.com/liuxianan/p/vscode-plugin-overview.html\">VS Codeæ’ä»¶å¼€å‘å…¨æ”»ç•¥</a></li>\n<li><a href=\"https://code.visualstudio.com/api/working-with-extensions/publishing-extension\">VS Code Document</a></li>\n<li><a href=\"https://github.com/Microsoft/vscode-extension-samples/\">Some demo</a></li>\n</ul>\n</div>",
      "title": "json-go-ts VS Codeæ’ä»¶å¼€å‘",
      "last_reply_at": "2021-07-23T02:41:31.264Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 716,
      "create_at": "2021-07-23T02:41:31.264Z",
      "author": {
        "loginname": "YonSunZhen",
        "avatar_url": "https://avatars.githubusercontent.com/u/34334312?v=4&s=120"
      }
    },
    {
      "id": "60eea5dde3e671e6a858de34",
      "author_id": "5b0bef9657137f22415c46de",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>é™æµé…ç½®ä¸­ï¼Œé˜ˆå€¼å…¶å®æ˜¯å¾ˆéš¾å‡†ç¡®å¹¶æ°å½“çš„è®¾ç½®çš„ã€‚\næˆ‘ç†è§£çš„é…ç½®åŸåˆ™ï¼š</p>\n<ol>\n<li>ä¸èƒ½å½±å“æ­£å¸¸æµé‡</li>\n<li>èƒ½èµ·åˆ°é™æµä½œç”¨ï¼Œä¿æŠ¤æœåŠ¡</li>\n</ol>\n<p>ç°çŠ¶å´æ˜¯é˜ˆå€¼çœŸçš„å¾ˆéš¾é…ç½®ï¼Œå·²ç»ç”¨äº†å¾ˆå¤šè„‘ç»†èƒï¼Œ\nè¯´ä¸‹æˆ‘çš„é…ç½®ç†è§£ï¼š</p>\n<ol>\n<li>æœåŠ¡ä¼šæä¾›å¤šä¸ªæ¥å£ï¼Œå¤šä¸ªæ¥å£åœ¨çº¿ä¸Šæœ‰å¤šç§è¯·æ±‚ç»„åˆï¼Œç”¨æˆ·çš„ä½¿ç”¨æ–¹å¼æ— æ³•ç²¾ç¡®é¢„åˆ¤ï¼Œæ‰€ä»¥ï¼Œæ²¡æ³•ä»¥å›ºå®šæƒ…æ™¯ç¡®å®šæ¯ä¸ªæ¥å£çš„é˜ˆå€¼</li>\n<li>é’ˆå¯¹å•ä¸ªæ¥å£å‹æµ‹å¾—åˆ°æ¯ä¸ªæ¥å£QPSä¸Šé™ï¼Œèƒ½åšåˆ°ä¸è¯¯æ€çš„é…ç½®æ˜¯ï¼Œé’ˆå¯¹æ¯ä¸ªæ¥å£é…ç½®é˜ˆå€¼ï¼Œåˆ†åˆ«æ˜¯æ¥å£QPSä¸Šé™ï¼Œä½†æ˜¯è¿™æ ·å¤§æ¦‚ç‡ä¼šä¸èµ·ä½œç”¨ï¼Œæ— æ³•çœŸçš„ä¿æŠ¤æœåŠ¡ã€‚</li>\n<li>æŒ‰80%æ¯”ä¾‹é…ç½®é˜ˆå€¼ï¼Œå¯èƒ½ä¼šè¯¯æ€æ­£å¸¸æµé‡ã€‚\nå„ä½æœ‰å¥½çš„æ–¹æ¡ˆé…ç½®é˜ˆå€¼å˜›ï¼Ÿ</li>\n</ol>\n</div>",
      "title": "QPSé™æµå¦‚ä½•è®¾ç½®é˜ˆå€¼æ¯”è¾ƒåˆç†",
      "last_reply_at": "2021-07-22T03:29:40.603Z",
      "good": false,
      "top": false,
      "reply_count": 2,
      "visit_count": 2128,
      "create_at": "2021-07-14T08:52:45.174Z",
      "author": {
        "loginname": "LiuWeiMr",
        "avatar_url": "https://avatars.githubusercontent.com/u/17976666?v=4&s=120"
      }
    },
    {
      "id": "60f8c5e7e3e671375d58ef30",
      "author_id": "5c1ea9e976c4964062a1ca15",
      "tab": "share",
      "content": "<div class=\"markdown-text\"><p><strong>å‰è¨€ï¼šå¼€å‘Nodej.js Addonçš„æ–¹å¼ç»è¿‡ä¸æ–­åœ°æ”¹è¿›ï¼Œå·²ç»é€æ­¥å®Œå–„ï¼Œè‡³å°‘æˆ‘ä»¬ä¸éœ€è¦åœ¨å‡çº§Node.jsç‰ˆæœ¬çš„åŒæ—¶æ‹…å¿ƒAddonç”¨ä¸äº†æˆ–è€…é‡æ–°ç¼–è¯‘ã€‚ç›®å‰Node.jsæä¾›çš„å¼€å‘æ–¹å¼æ˜¯napiã€‚ä½†æ˜¯napiç”¨èµ·æ¥éå¸¸å†—ä½™å’Œéº»çƒ¦ï¼Œæ¯ä¸€æ­¥éƒ½éœ€è¦æˆ‘ä»¬è‡ªå·±å»æ§åˆ¶ï¼Œæ‰€ä»¥åˆæœ‰å¤§ä½¬å°è£…äº†é¢å‘å¯¹è±¡ç‰ˆæœ¬çš„apiï¼ˆnode-addon-apiï¼‰ï¼Œä½¿ç”¨ä¸Šæ–¹ä¾¿äº†å¾ˆå¤šï¼Œæœ¬æ–‡åˆ†æä¸€ä¸‹node-addon-apiçš„è®¾è®¡æ€æƒ³ï¼Œä½†ä¸ä¼šåˆ†æè¿‡å¤šç»†èŠ‚ï¼Œå› ä¸ºæˆ‘ä»¬ç†è§£äº†è®¾è®¡æ€æƒ³åï¼Œä½¿ç”¨æ—¶å»æŸ¥é˜…æ–‡æ¡£æˆ–è€…çœ‹æºç å°±å¯ä»¥ã€‚</strong></p>\n<p>æˆ‘ä»¬é¦–å…ˆçœ‹ä¸€ä¸‹ä½¿ç”¨napiå†™ä¸€ä¸ªhello worldçš„ä¾‹å­ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>#include &lt;assert.h&gt;\n#include &lt;node_api.h&gt;\n\nstatic napi_value Method(napi_env env, napi_callback_info info) {\n  napi_status status;\n  napi_value world;\n  status = napi_create_string_utf8(env, &quot;world&quot;, 5, &amp;world);\n  assert(status == napi_ok);\n  return world;\n}\n\n#define DECLARE_NAPI_METHOD(name, func)                                        \\\n  { name, 0, func, 0, 0, 0, napi_default, 0 }\n\nstatic napi_value Init(napi_env env, napi_value exports) {\n  napi_status status;\n  napi_property_descriptor desc = DECLARE_NAPI_METHOD(&quot;hello&quot;, Method);\n  status = napi_define_properties(env, exports, 1, &amp;desc);\n  assert(status == napi_ok);\n  return exports;\n}\n\nNAPI_MODULE(NODE_GYP_MODULE_NAME, Init)\n</code></pre><p>æ¥ç€æˆ‘ä»¬çœ‹ä¸€ä¸‹node-addon-apiç‰ˆçš„å†™æ³•ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>#include &lt;napi.h&gt;\n\nNapi::String Method(const Napi::CallbackInfo&amp; info) {\n  Napi::Env env = info.Env();\n  return Napi::String::New(env, &quot;world&quot;);\n}\n\nNapi::Object Init(Napi::Env env, Napi::Object exports) {\n  exports.Set(Napi::String::New(env, &quot;hello&quot;),\n              Napi::Function::New(env, Method));\n  return exports;\n}\n\nNODE_API_MODULE(hello, Init)\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œä»£ç ç®€æ´äº†å¾ˆå¤šï¼Œæœ‰ç‚¹å†™jsçš„æ„Ÿè§‰äº†ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹è¿™äº›ç®€æ´èƒŒåçš„è®¾è®¡ã€‚æˆ‘ä»¬ä»æ¨¡å—å®šä¹‰å¼€å§‹åˆ†æã€‚</p>\n<pre class=\"prettyprint language-c\"><code>NODE_API_MODULE(hello, Init)\n</code></pre><p>NODE_API_MODULEæ˜¯node-addon-apiå®šä¹‰çš„å®ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>#define NODE_API_MODULE(modname, regfunc)                                      \\\n  static napi_value __napi_##regfunc(napi_env env, napi_value exports) {       \\\n    return Napi::RegisterModule(env, exports, regfunc);                        \\\n  }                                                                            \\\n  NAPI_MODULE(modname, __napi_##regfunc)\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°NODE_API_MODULEæ˜¯å¯¹NAPI_MODULEçš„å°è£…ï¼ŒNAPI_MODULEçš„åˆ†æå¯ä»¥å‚è€ƒä¹‹å‰napiåŸç†ç›¸å…³çš„æ–‡ç« ï¼Œè¿™é‡Œå°±ä¸å…·ä½“åˆ†æã€‚æœ€ååœ¨åŠ è½½addonçš„æ—¶å€™æ‰§è¡Œ__napi_##regfuncå‡½æ•°ã€‚å¹¶ä¼ å…¥napi_env env, napi_value exportså‚æ•°ã€‚æˆ‘ä»¬çŸ¥é“è¿™æ˜¯napiè§„èŒƒçš„å‚æ•°ã€‚æ¥ç€æ‰§è¡ŒRegisterModuleã€‚</p>\n<pre class=\"prettyprint language-c\"><code>inline napi_value RegisterModule(napi_env env,\n                                 napi_value exports,\n                                 ModuleRegisterCallback registerCallback) {\n  &#x2F;&#x2F; details::WrapCallbacké‡Œä¼šæ‰§è¡Œlamdaå‡½æ•°å¹¶è¿”å›lamdaçš„è¿”å›å€¼                      \n  return details::WrapCallback([&amp;] {\n    return napi_value(registerCallback(Napi::Env(env),\n                                       Napi::Object(env, exports)));\n  });\n}\n</code></pre><p>RegisterModuleé‡Œæœ€ç»ˆä¼šæ‰§è¡ŒregisterCallbackã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹registerCallbackå˜é‡çš„ç±»å‹ModuleRegisterCallbackçš„å®šä¹‰ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>typedef Object (*ModuleRegisterCallback)(Env env, Object exports);\n</code></pre><p>æ‰€ä»¥registerCallbackçš„å‚æ•°æ˜¯Envå’ŒObjectå¯¹è±¡ã€‚è¿™ä¸¤ä¸ªç±»ä¸æ˜¯Node.jsä¹Ÿä¸æ˜¯V8å®šä¹‰çš„ï¼Œè€Œæ˜¯node-addon-apiã€‚æˆ‘ä»¬ä¸€ä¼šå†åˆ†æï¼Œæˆ‘ä»¬å…ˆçŸ¥é“ä»–æ˜¯ä¸¤ä¸ªå¯¹è±¡å°±å¥½ã€‚è¿™é‡ŒregisterCallbackçš„å€¼æ˜¯æˆ‘ä»¬å®šä¹‰çš„Initå‡½æ•°ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>Napi::Object Init(Napi::Env env, Napi::Object exports) {\n  exports.Set(Napi::String::New(env, &quot;hello&quot;),\n              Napi::Function::New(env, Method));\n  return exports;\n}\n</code></pre><p>é€šè¿‡Setæ–¹æ³•ç»™exportså®šä¹‰å±æ€§ï¼Œæˆ‘ä»¬åœ¨jså°±å¯ä»¥è®¿é—®å¯¹åº”çš„å±æ€§äº†ã€‚æœ€åè¿”å›exportsï¼Œexportsæ˜¯Objectç±»å‹ã€‚ä½†æ ¹æ®napiçš„æ¥å£å®šä¹‰ã€‚è¿”å›çš„ç±»å‹åº”è¯¥æ˜¯napi_valueã€‚æˆ‘ä»¬çœ‹çœ‹node-addon-apiæ˜¯æ€ä¹ˆåšçš„ã€‚æˆ‘ä»¬å›åˆ°RegisterModuleå‡½æ•°ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>return napi_value(registerCallback(Napi::Env(env),  Napi::Object(env, exports)));\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°registerCallbackæ‰§è¡Œåçš„è¿”å›å€¼ä¼šè¢«è½¬æˆnapi_valueç±»å‹ã€‚é‚£ä¹ˆObjectç±»å‹æ˜¯æ€ä¹ˆè‡ªåŠ¨è½¬æˆnapi_valueç±»å‹çš„å‘¢ï¼Ÿæˆ‘ä»¬ä¸€ä¼šåˆ†æã€‚äº†è§£äº†node-addon-apiçš„ä½¿ç”¨æ–¹å¼åï¼Œæˆ‘ä»¬å¼€å§‹å…·ä½“åˆ†æå…¶ä¸­çš„è®¾è®¡ã€‚</p>\n<p>æˆ‘ä»¬å…ˆçœ‹çœ‹Envçš„è®¾è®¡ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>class Env {\n  public:\n    Env(napi_env env);\n    operator napi_env() const;\n\n  private:\n    napi_env _env;\n};\n\ninline Env::Env(napi_env env) : _env(env) {\n}\n\n&#x2F;&#x2F; ç±»å‹é‡è½½\ninline Env::operator napi_env() const {\n  return _env;\n}\n</code></pre><p>æˆ‘ä»¬åªçœ‹æ ¸å¿ƒçš„è®¾è®¡ï¼Œå¿½ç•¥ä¸€äº›æ— å…³é‡è¦çš„ç»†èŠ‚ã€‚æˆ‘ä»¬çœ‹åˆ°Envçš„è®¾è®¡å¾ˆç®€å•ï¼Œå°±æ˜¯å¯¹napiçš„napi_envçš„å°è£…ã€‚æ¥ç€æˆ‘ä»¬çœ‹ç±»å‹çš„è®¾è®¡ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>class Value {\n  public:\n    Value();     \n    Value(napi_env env,  napi_value value);  \n    operator napi_value() const;\n    Napi::Env Env() const;\n\n  protected:\n    napi_env _env;\n    napi_value _value;\n};\n</code></pre><p>Valueæ˜¯node-addon-apiçš„ç±»å‹åŸºç±»ï¼Œç±»ä¼¼V8é‡Œçš„è®¾è®¡ã€‚æˆ‘ä»¬çœ‹åˆ°Valueé‡Œé¢åªæœ‰ä¸¤ä¸ªå­—æ®µï¼Œenvå’Œ_valueã€‚envå°±æ˜¯æˆ‘ä»¬åˆšæ‰æåˆ°çš„Envã€‚_valueå°±æ˜¯å¯¹napiç±»å‹çš„å°è£…ã€‚Valueç±»åªæ˜¯æŠ½è±¡çš„å°è£…ï¼Œä¸æ¶‰åŠåˆ°å…·ä½“çš„é€»è¾‘ã€‚ä¸‹é¢æˆ‘ä»¬ä»¥è‡ªå®šä¹‰çš„Initå‡½æ•°ä¸ºä¾‹ï¼Œå¼€å§‹åˆ†æå…·ä½“çš„é€»è¾‘ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>Napi::Object Init(Napi::Env env, Napi::Object exports) {\n  exports.Set(Napi::String::New(env, &quot;hello&quot;), Napi::Function::New(env, Method));\n  return exports;\n}\n</code></pre><p>æˆ‘ä»¬å…ˆçœ‹çœ‹String::Newçš„å®ç°ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>class Name : public Value {\n  public:\n    Name();                     \n    Name(napi_env env, napi_value value); \n};\n  \nclass String : public Name {\n  public:\n   static String New(napi_env env, const char* value);\n};\n\ninline String String::New(napi_env env, const char* val) {\n  napi_value value;\n  napi_status status = napi_create_string_utf8(env, val, std::strlen(val), &amp;value);\n  NAPI_THROW_IF_FAILED(env, status, String());\n  return String(env, value);\n}\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°Newçš„å®ç°å¾ˆç®€å•ï¼Œä¸»è¦æ˜¯å¯¹napiçš„å°è£…ã€‚ä½†æœ‰äº›ç»†èŠ‚è¿˜æ˜¯éœ€è¦æ³¨æ„çš„ã€‚\n1 æˆ‘ä»¬çœ‹åˆ°exports.Setå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Envç±»å‹ï¼Œä½†æ˜¯Newå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹æ˜¯napi_envï¼Œçœ‹èµ·æ¥ä¸å…¼å®¹ã€‚è¿™ä¸ªæ˜¯å¦‚ä½•è‡ªåŠ¨è½¬æ¢çš„å‘¢ï¼Ÿå› ä¸ºEnvç±»å¯¹napi_envç±»å‹è¿›è¡Œäº†é‡è½½ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>inline Env::operator napi_env() const {\n  return _env;\n}\n</code></pre><p>æˆ‘ä»¬çœ‹åˆ°å½“éœ€è¦napi_envç±»å‹çš„æ—¶å€™ï¼ŒEnvä¼šè¿”å›_envï¼Œ_envå°±æ˜¯napi_envç±»å‹ã€‚\n2 é€šè¿‡napiæ¥å£åˆ›å»ºäº†å€¼ä¹‹åï¼Œæœ€åè¿”å›çš„æ˜¯ä¸€ä¸ªStringç±»å‹ã€‚æˆ‘ä»¬çœ‹çœ‹Stringæ„é€ å‡½æ•°ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>inline String::String(napi_env env, napi_value value) : Name(env, value) {}\n\ninline Name::Name(napi_env env, napi_value value) : Value(env, value) {}\n</code></pre><p>æœ€åè°ƒç”¨Valueæ„é€ å‡½æ•°ä¿å­˜äº†napiè¿”å›çš„å€¼ã€‚å¹¶ä¸”ç»™è°ƒç”¨æ–¹è¿”å›äº†ä¸€ä¸ªStringå¯¹è±¡ã€‚æˆ‘ä»¬çœ‹çœ‹exports.Set(Napi::String::New(env, â€œhelloâ€), Napi::Function::New(env, Method))çš„æ—¶å€™æ˜¯å¦‚ä½•ä½¿ç”¨è¿™ä¸ªStringå¯¹è±¡çš„ã€‚exportsæ˜¯ä¸€ä¸ªObjectã€‚Objectå’ŒStringçš„å®ç°æ˜¯ç±»ä¼¼çš„ï¼Œä»–ä»¬éƒ½æ˜¯ç»§æ‰¿Valueç±»ï¼Œåœ¨å†…éƒ¨å°è£…äº†napi_envå’Œnapi_valueå˜é‡ã€‚æ‰€ä»¥æˆ‘ä»¬çœ‹çœ‹Object::Setçš„å®ç°ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>template &lt;typename ValueType&gt;\ninline bool Object::Set(napi_value key, const ValueType&amp; value) {\n  napi_status status = napi_set_property(_env, _value, key, Value::From(_env, value));\n  NAPI_THROW_IF_FAILED(_env, status, false);\n  return true;\n}\n</code></pre><p>_valueçš„å€¼æ˜¯Objectå°è£…çš„napi_valueå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªV8 Objectå¯¹è±¡ã€‚ç„¶åé€šè¿‡napi_set_propertyè®¾ç½®å¯¹è±¡çš„å±æ€§å’Œå€¼ã€‚åŒæ ·æˆ‘ä»¬å‘ç°Setå‡½æ•°çš„å®å‚æ˜¯Stringå¯¹è±¡ï¼Œä½†æ˜¯å‹å‚æ˜¯napi_valueç±»å‹ã€‚è¿™ä¸ªå’ŒEnvçš„è‡ªåŠ¨è½¬æ¢æ˜¯ç±»ä¼¼çš„ï¼ŒStringç»§æ‰¿äº†Valueï¼Œè€ŒValueé‡è½½äº†ç±»å‹napi_valueã€‚</p>\n<pre class=\"prettyprint language-c\"><code>inline Value::operator napi_value() const {\n  return _value;\n}\n</code></pre><p>å³è¿”å›äº†å°è£…çš„napi_valueå˜é‡ã€‚æˆ‘ä»¬é€šè¿‡Setè®¾ç½®äº†ä¸€ä¸ªå±æ€§helloï¼Œå€¼æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>Napi::String Method(const Napi::CallbackInfo&amp; info) {\n  Napi::Env env = info.Env();\n  return Napi::String::New(env, &quot;world&quot;);\n}\n</code></pre><p>å½“æˆ‘ä»¬åœ¨jså±‚è°ƒç”¨helloçš„æ—¶å€™ï¼Œä¸ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯å…ˆæ‰§è¡Œnode-addon-apiçš„ä»£ç ï¼Œnode-addon-apiå¯¹napiçš„å˜é‡è¿›è¡Œå°è£…åï¼Œæ‰ä¼šè°ƒç”¨Methodã€‚æ‰€ä»¥æˆ‘ä»¬çœ‹åˆ°Methodçš„å…¥å‚ç±»å‹å’Œnapiçš„æ˜¯ä¸ä¸€æ ·çš„ã€‚æœ€åMethodæ‰§è¡Œå®Œè¿”å›çš„æ—¶å€™ï¼ŒåŒæ ·æ˜¯å…ˆå›åˆ°node-addon-apiã€‚node-addon-apiæŠŠMethodçš„è¿”å›å€¼ï¼ˆStringå¯¹è±¡ï¼‰è½¬æˆnapiçš„æ ¼å¼åï¼ˆnapi_valueï¼‰å†è¿”å›åˆ°napiï¼ˆè¿™é‡Œæ¯”è¾ƒå¤æ‚ï¼Œç›®å‰è¿˜æ²¡æœ‰æ·±å…¥åˆ†æï¼‰ã€‚</p>\n<p>è‡³æ­¤æˆ‘ä»¬çœ‹åˆ°äº†node-addon-apiè®¾è®¡çš„åŸºæœ¬æ€æƒ³å¦‚å›¾æ‰€ç¤ºã€‚\n<img src=\"https://img-blog.csdnimg.cn/20210714202405984.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RIRUFOQVJLSA==,size_16,color_FFFFFF,t_70\" alt>\nå¤§è‡´çš„æ€æƒ³å°±æ˜¯node-addon-apiä¸ºæˆ‘ä»¬å°è£…äº†ä¸€å±‚ï¼Œå½“napiè°ƒç”¨æˆ‘ä»¬å®šä¹‰çš„å†…å®¹æ—¶ï¼Œä¼šå…ˆç»è¿‡node-addon-apiã€‚node-addon-apiå°è£…napiçš„å…¥å‚åå†è°ƒç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„å†…å®¹ã€‚åŒæ ·ï¼Œæˆ‘ä»¬è¿”å›å†…å®¹ç»™napiæ—¶ï¼Œä¹Ÿä¼šç»è¿‡node-addon-apiçš„å°è£…å†å›åˆ°napiã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨addoné‡Œåˆ›å»ºä¸€ä¸ªæ•°å­—æ—¶ï¼Œ\tæˆ‘ä»¬ä¼šæ‰§è¡ŒNumber New(napi_env env, double value);Newä¼šè°ƒç”¨napiçš„napi_create_doubleåˆ›å»ºä¸€ä¸ªnapi_valueå˜é‡ã€‚æ¥ç€æŠŠnapi_valueçš„å€¼å°è£…åˆ°Numberï¼Œæœ€åè¿”å›ä¸€ä¸ªNumberç»™æˆ‘ä»¬ï¼Œåç»­æˆ‘ä»¬è°ƒç”¨Numberçš„å…¶ä»–æ–¹æ³•æ—¶ï¼Œnode-addon-apiä¼šä»Numberå¯¹è±¡ä¸­æ‹¿åˆ°ä¿å­˜napi_valueçš„å€¼ï¼Œå†è°ƒç”¨napiçš„apiã€‚è¿™æ ·æˆ‘ä»¬åªéœ€è¦é¢å¯¹node-addon-apiæä¾›çš„æ¥å£è€Œä¸éœ€è¦ç†è§£napiã€‚å¦å¤–node-addon-apiè¿˜åšäº†ä¸€äº›è¿ç®—ç¬¦é‡è½½ä½¿å¾—æˆ‘ä»¬å†™ä»£ç æ›´å®¹æ˜“ã€‚æ¯”å¦‚å¯¹Object []çš„é‡è½½ã€‚</p>\n<pre class=\"prettyprint language-c\"><code> Value operator []( const char* utf8name) const;\n</code></pre><p>æˆ‘ä»¬çœ‹çœ‹å®ç°ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>inline Value Object::operator [](const char* utf8name) const {\n  return Get(utf8name);\n}\n\ninline Value Object::Get(const char* utf8name) const {\n  napi_value result;\n  napi_status status = napi_get_named_property(_env, _value, utf8name, &amp;result);\n  NAPI_THROW_IF_FAILED(_env, status, Value());\n  return Value(_env, result);\n}\n</code></pre><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡obj[â€˜nameâ€™]è¿™ç§æ–¹å¼è®¿é—®å¯¹è±¡äº†ã€‚å¦åˆ™æˆ‘ä»¬è¿˜éœ€è¦åƒä¸‹é¢çš„æ–¹å¼è®¿é—®ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>napi_value value;\nnapi_status status = napi_get_named_property(_env, _value, key, &amp;value);\n</code></pre><p>å¦‚æœå¤§é‡è¿™æ ·çš„ä»£ç å°†ä¼šéå¸¸éº»çƒ¦å’Œä½æ•ˆã€‚å¦å¤–node-addon-apiå¯¹ç±»å‹è¿›è¡Œäº†å¤§é‡çš„é‡è½½ï¼Œä½¿å¾—å˜é‡çš„ç±»å‹è½¬æ¢å¾—ä»¥è‡ªåŠ¨è¿›è¡Œä¸éœ€è¦å¼ºåˆ¶è½¬æ¢æ¥è½¬æ¢å»ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>int32_t num = Numberå¯¹è±¡;\n</code></pre><p>å› ä¸ºNumberå¯¹int32_tè¿›è¡Œäº†é‡è½½ã€‚</p>\n<pre class=\"prettyprint language-c\"><code>inline Number::operator int32_t() const {\n  return Int32Value();\n}\n\ninline int32_t Number::Int32Value() const {\n  int32_t result;\n  napi_status status = napi_get_value_int32(_env, _value, &amp;result);\n  NAPI_THROW_IF_FAILED(_env, status, 0);\n  return result;\n}\n</code></pre><p><strong>åè®°ï¼šæœ¬æ–‡å¤§è‡´åˆ†æäº†node-addon-apiçš„å®ç°åŸç†å’Œæ€æƒ³ï¼Œå®ç°çš„ä»£ç å°†è¿‘ä¸‡è¡Œï¼Œè™½ç„¶æœ‰å¾ˆå¤šç±»ä¼¼çš„é€»è¾‘ï¼Œä½†æ˜¯ä¹Ÿæœ‰äº›æ¯”è¾ƒå¤æ‚çš„å°è£…ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯è‡ªè¡Œé˜…è¯»ã€‚\n.</strong></p>\n</div>",
      "title": "node-addon-apiçš„è®¾è®¡å’Œå®ç°",
      "last_reply_at": "2021-07-22T01:12:07.416Z",
      "good": false,
      "top": false,
      "reply_count": 0,
      "visit_count": 814,
      "create_at": "2021-07-22T01:12:07.416Z",
      "author": {
        "loginname": "theanarkh",
        "avatar_url": "https://avatars.githubusercontent.com/u/21155906?v=4&s=120"
      }
    },
    {
      "id": "60bc9b8b248d045d934ab22c",
      "author_id": "5ab852d6320bb09d69e231f1",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>è¯·æ•™ä¸€ä¸ªå›°æ‰°æˆ‘å¥½ä¹…çš„åŸºç¡€é—®é¢˜,å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ–¹æ³•æ˜¯ä¸æ˜¯å¼‚æ­¥çš„?\næ¯”å¦‚,æˆ‘è‡ªå·±å†™ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°\nå¦‚æœæ˜¯ä¸‹é¢è¿™æ ·çš„,è‚¯å®šå¾—ç”¨awaitåŒ…è£…ä¸€ä¸‹æ‰èƒ½é¡ºåºæ‰§è¡Œ:</p>\n<p><img src=\"//static.cnodejs.org/FpLvBsnTGq0DsrJRF7moPZSLb9iW\" alt=\"12.png\"></p>\n<p>å¦‚æœæ˜¯ä¸‹é¢è¿™æ ·çš„,é‚£æ–¹æ³•å°±ä¸ç”¨åŠ asyncäº†,ç›´æ¥å†™å°±èƒ½é¡ºåºæ‰§è¡Œ:</p>\n<p><img src=\"//static.cnodejs.org/Fl4wunh11_3q4ejIrcOfys_gcKwl\" alt=\"13.png\"></p>\n<p>ä¸Šé¢ä¾‹å­ä¸¾çš„æœ‰ç‚¹æç«¯,ä½†æ˜¯æœ‰çš„æ–¹æ³•åœ¨è°ƒç”¨çš„æ—¶å€™çœŸçš„ä¸çŸ¥é“æ˜¯ä¸æ˜¯å¼‚æ­¥çš„?å¦‚ä½•çŸ¥é“æˆ‘ è‡ªå·±å†™çš„å‡½æ•° åˆ°åº•ç”¨ä¸ç”¨asyncå°è£…ä¸€ä¸‹?æˆ–è€…è¯´å¦‚ä½•çŸ¥é“ä¸€ä¸ªæ–¹æ³•æ˜¯ä¸æ˜¯å¼‚æ­¥çš„å‘¢?</p>\n</div>",
      "title": "å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ–¹æ³•æ˜¯ä¸æ˜¯å¼‚æ­¥çš„?",
      "last_reply_at": "2021-07-22T00:40:49.024Z",
      "good": false,
      "top": false,
      "reply_count": 16,
      "visit_count": 2496,
      "create_at": "2021-06-06T09:55:23.653Z",
      "author": {
        "loginname": "iori2882",
        "avatar_url": "https://avatars.githubusercontent.com/u/1480587?v=4&s=120"
      }
    },
    {
      "id": "60ed05cae3e671154458d802",
      "author_id": "5ef732e113f8b244e57cba0a",
      "tab": "ask",
      "content": "<div class=\"markdown-text\"><p>è¯·é—®ç”¨nodejs åšsaasæ¶æ„çš„webç³»ç»Ÿæ€ä¹ˆåšæ•°æ®éš”ç¦»ï¼Œtypeormæ˜¯å¦æœ‰å¥½çš„æ–¹æ¡ˆåšç§Ÿæˆ·æ•°æ®éš”ç¦»æ“ä½œï¼Œæˆ–è€…æœ‰æ²¡æœ‰å…¶ä»–çš„å¥½çš„å®è·µæ–¹æ¡ˆã€‚ä¸æƒ³æ¯ä¸ªæ“ä½œæ•°æ®åº“çš„åœ°æ–¹äººå·¥åˆ¤æ–­ï¼Œæƒ³è¦ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨æ‹¦æˆªsqlè‡ªåŠ¨å¤„ç†è¯†åˆ«ç§Ÿæˆ·ç„¶åå†å’Œæ•°æ®åº“äº¤äº’çš„æ–¹æ³•ã€‚</p>\n</div>",
      "title": "è¯·é—®ç”¨nodejs åšsaasæ¶æ„çš„webç³»ç»Ÿæ€ä¹ˆåšæ•°æ®éš”ç¦»",
      "last_reply_at": "2021-07-21T13:44:51.147Z",
      "good": false,
      "top": false,
      "reply_count": 6,
      "visit_count": 2335,
      "create_at": "2021-07-13T03:17:30.184Z",
      "author": {
        "loginname": "tuohuang",
        "avatar_url": "https://avatars.githubusercontent.com/u/14804820?v=4&s=120"
      }
    }
  ]
}

export { resp }
